import{w as Ui}from"./index.Ua9e-3Rz.js";import{a7 as xe}from"./scheduler.BnSwxYe-.js";var Ne=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pr(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Fi(n){if(n.__esModule)return n;var t=n.default;if(typeof t=="function"){var e=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var o=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,o.get?o:{enumerable:!0,get:function(){return n[r]}})}),e}var dt={},mn={};mn.byteLength=ja;mn.toByteArray=Va;mn.fromByteArray=Ja;var $e=[],Te=[],Ka=typeof Uint8Array<"u"?Uint8Array:Array,Gn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var _r=0,Wa=Gn.length;_r<Wa;++_r)$e[_r]=Gn[_r],Te[Gn.charCodeAt(_r)]=_r;Te[45]=62;Te[95]=63;function us(n){var t=n.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=n.indexOf("=");e===-1&&(e=t);var r=e===t?0:4-e%4;return[e,r]}function ja(n){var t=us(n),e=t[0],r=t[1];return(e+r)*3/4-r}function Ga(n,t,e){return(t+e)*3/4-e}function Va(n){var t,e=us(n),r=e[0],o=e[1],i=new Ka(Ga(n,r,o)),s=0,c=o>0?r-4:r,d;for(d=0;d<c;d+=4)t=Te[n.charCodeAt(d)]<<18|Te[n.charCodeAt(d+1)]<<12|Te[n.charCodeAt(d+2)]<<6|Te[n.charCodeAt(d+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=t&255;return o===2&&(t=Te[n.charCodeAt(d)]<<2|Te[n.charCodeAt(d+1)]>>4,i[s++]=t&255),o===1&&(t=Te[n.charCodeAt(d)]<<10|Te[n.charCodeAt(d+1)]<<4|Te[n.charCodeAt(d+2)]>>2,i[s++]=t>>8&255,i[s++]=t&255),i}function Za(n){return $e[n>>18&63]+$e[n>>12&63]+$e[n>>6&63]+$e[n&63]}function Ya(n,t,e){for(var r,o=[],i=t;i<e;i+=3)r=(n[i]<<16&16711680)+(n[i+1]<<8&65280)+(n[i+2]&255),o.push(Za(r));return o.join("")}function Ja(n){for(var t,e=n.length,r=e%3,o=[],i=16383,s=0,c=e-r;s<c;s+=i)o.push(Ya(n,s,s+i>c?c:s+i));return r===1?(t=n[e-1],o.push($e[t>>2]+$e[t<<4&63]+"==")):r===2&&(t=(n[e-2]<<8)+n[e-1],o.push($e[t>>10]+$e[t>>4&63]+$e[t<<2&63]+"=")),o.join("")}var Oi={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Oi.read=function(n,t,e,r,o){var i,s,c=o*8-r-1,d=(1<<c)-1,b=d>>1,_=-7,k=e?o-1:0,U=e?-1:1,R=n[t+k];for(k+=U,i=R&(1<<-_)-1,R>>=-_,_+=c;_>0;i=i*256+n[t+k],k+=U,_-=8);for(s=i&(1<<-_)-1,i>>=-_,_+=r;_>0;s=s*256+n[t+k],k+=U,_-=8);if(i===0)i=1-b;else{if(i===d)return s?NaN:(R?-1:1)*(1/0);s=s+Math.pow(2,r),i=i-b}return(R?-1:1)*s*Math.pow(2,i-r)};Oi.write=function(n,t,e,r,o,i){var s,c,d,b=i*8-o-1,_=(1<<b)-1,k=_>>1,U=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=r?0:i-1,M=r?1:-1,A=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,s=_):(s=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-s))<1&&(s--,d*=2),s+k>=1?t+=U/d:t+=U*Math.pow(2,1-k),t*d>=2&&(s++,d/=2),s+k>=_?(c=0,s=_):s+k>=1?(c=(t*d-1)*Math.pow(2,o),s=s+k):(c=t*Math.pow(2,k-1)*Math.pow(2,o),s=0));o>=8;n[e+R]=c&255,R+=M,c/=256,o-=8);for(s=s<<o|c,b+=o;b>0;n[e+R]=s&255,R+=M,s/=256,b-=8);n[e+R-M]|=A*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const t=mn,e=Oi,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=c,n.SlowBuffer=z,n.INSPECT_MAX_BYTES=50;const o=2147483647;n.kMaxLength=o,c.TYPED_ARRAY_SUPPORT=i(),!c.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const g=new Uint8Array(1),f={foo:function(){return 42}};return Object.setPrototypeOf(f,Uint8Array.prototype),Object.setPrototypeOf(g,f),g.foo()===42}catch{return!1}}Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}});function s(g){if(g>o)throw new RangeError('The value "'+g+'" is invalid for option "size"');const f=new Uint8Array(g);return Object.setPrototypeOf(f,c.prototype),f}function c(g,f,l){if(typeof g=="number"){if(typeof f=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return k(g)}return d(g,f,l)}c.poolSize=8192;function d(g,f,l){if(typeof g=="string")return U(g,f);if(ArrayBuffer.isView(g))return M(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(ge(g,ArrayBuffer)||g&&ge(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ge(g,SharedArrayBuffer)||g&&ge(g.buffer,SharedArrayBuffer)))return A(g,f,l);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const S=g.valueOf&&g.valueOf();if(S!=null&&S!==g)return c.from(S,f,l);const L=I(g);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return c.from(g[Symbol.toPrimitive]("string"),f,l);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}c.from=function(g,f,l){return d(g,f,l)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array);function b(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function _(g,f,l){return b(g),g<=0?s(g):f!==void 0?typeof l=="string"?s(g).fill(f,l):s(g).fill(f):s(g)}c.alloc=function(g,f,l){return _(g,f,l)};function k(g){return b(g),s(g<0?0:T(g)|0)}c.allocUnsafe=function(g){return k(g)},c.allocUnsafeSlow=function(g){return k(g)};function U(g,f){if((typeof f!="string"||f==="")&&(f="utf8"),!c.isEncoding(f))throw new TypeError("Unknown encoding: "+f);const l=C(g,f)|0;let S=s(l);const L=S.write(g,f);return L!==l&&(S=S.slice(0,L)),S}function R(g){const f=g.length<0?0:T(g.length)|0,l=s(f);for(let S=0;S<f;S+=1)l[S]=g[S]&255;return l}function M(g){if(ge(g,Uint8Array)){const f=new Uint8Array(g);return A(f.buffer,f.byteOffset,f.byteLength)}return R(g)}function A(g,f,l){if(f<0||g.byteLength<f)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<f+(l||0))throw new RangeError('"length" is outside of buffer bounds');let S;return f===void 0&&l===void 0?S=new Uint8Array(g):l===void 0?S=new Uint8Array(g,f):S=new Uint8Array(g,f,l),Object.setPrototypeOf(S,c.prototype),S}function I(g){if(c.isBuffer(g)){const f=T(g.length)|0,l=s(f);return l.length===0||g.copy(l,0,0,f),l}if(g.length!==void 0)return typeof g.length!="number"||Lt(g.length)?s(0):R(g);if(g.type==="Buffer"&&Array.isArray(g.data))return R(g.data)}function T(g){if(g>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return g|0}function z(g){return+g!=g&&(g=0),c.alloc(+g)}c.isBuffer=function(f){return f!=null&&f._isBuffer===!0&&f!==c.prototype},c.compare=function(f,l){if(ge(f,Uint8Array)&&(f=c.from(f,f.offset,f.byteLength)),ge(l,Uint8Array)&&(l=c.from(l,l.offset,l.byteLength)),!c.isBuffer(f)||!c.isBuffer(l))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(f===l)return 0;let S=f.length,L=l.length;for(let F=0,q=Math.min(S,L);F<q;++F)if(f[F]!==l[F]){S=f[F],L=l[F];break}return S<L?-1:L<S?1:0},c.isEncoding=function(f){switch(String(f).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(f,l){if(!Array.isArray(f))throw new TypeError('"list" argument must be an Array of Buffers');if(f.length===0)return c.alloc(0);let S;if(l===void 0)for(l=0,S=0;S<f.length;++S)l+=f[S].length;const L=c.allocUnsafe(l);let F=0;for(S=0;S<f.length;++S){let q=f[S];if(ge(q,Uint8Array))F+q.length>L.length?(c.isBuffer(q)||(q=c.from(q)),q.copy(L,F)):Uint8Array.prototype.set.call(L,q,F);else if(c.isBuffer(q))q.copy(L,F);else throw new TypeError('"list" argument must be an Array of Buffers');F+=q.length}return L};function C(g,f){if(c.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||ge(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);const l=g.length,S=arguments.length>2&&arguments[2]===!0;if(!S&&l===0)return 0;let L=!1;for(;;)switch(f){case"ascii":case"latin1":case"binary":return l;case"utf8":case"utf-8":return Mt(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l*2;case"hex":return l>>>1;case"base64":return Ct(g).length;default:if(L)return S?-1:Mt(g).length;f=(""+f).toLowerCase(),L=!0}}c.byteLength=C;function D(g,f,l){let S=!1;if((f===void 0||f<0)&&(f=0),f>this.length||((l===void 0||l>this.length)&&(l=this.length),l<=0)||(l>>>=0,f>>>=0,l<=f))return"";for(g||(g="utf8");;)switch(g){case"hex":return m(this,f,l);case"utf8":case"utf-8":return a(this,f,l);case"ascii":return E(this,f,l);case"latin1":case"binary":return x(this,f,l);case"base64":return B(this,f,l);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,f,l);default:if(S)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),S=!0}}c.prototype._isBuffer=!0;function H(g,f,l){const S=g[f];g[f]=g[l],g[l]=S}c.prototype.swap16=function(){const f=this.length;if(f%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let l=0;l<f;l+=2)H(this,l,l+1);return this},c.prototype.swap32=function(){const f=this.length;if(f%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let l=0;l<f;l+=4)H(this,l,l+3),H(this,l+1,l+2);return this},c.prototype.swap64=function(){const f=this.length;if(f%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let l=0;l<f;l+=8)H(this,l,l+7),H(this,l+1,l+6),H(this,l+2,l+5),H(this,l+3,l+4);return this},c.prototype.toString=function(){const f=this.length;return f===0?"":arguments.length===0?a(this,0,f):D.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(f){if(!c.isBuffer(f))throw new TypeError("Argument must be a Buffer");return this===f?!0:c.compare(this,f)===0},c.prototype.inspect=function(){let f="";const l=n.INSPECT_MAX_BYTES;return f=this.toString("hex",0,l).replace(/(.{2})/g,"$1 ").trim(),this.length>l&&(f+=" ... "),"<Buffer "+f+">"},r&&(c.prototype[r]=c.prototype.inspect),c.prototype.compare=function(f,l,S,L,F){if(ge(f,Uint8Array)&&(f=c.from(f,f.offset,f.byteLength)),!c.isBuffer(f))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof f);if(l===void 0&&(l=0),S===void 0&&(S=f?f.length:0),L===void 0&&(L=0),F===void 0&&(F=this.length),l<0||S>f.length||L<0||F>this.length)throw new RangeError("out of range index");if(L>=F&&l>=S)return 0;if(L>=F)return-1;if(l>=S)return 1;if(l>>>=0,S>>>=0,L>>>=0,F>>>=0,this===f)return 0;let q=F-L,pt=S-l;const ht=Math.min(q,pt),lt=this.slice(L,F),Ft=f.slice(l,S);for(let ut=0;ut<ht;++ut)if(lt[ut]!==Ft[ut]){q=lt[ut],pt=Ft[ut];break}return q<pt?-1:pt<q?1:0};function O(g,f,l,S,L){if(g.length===0)return-1;if(typeof l=="string"?(S=l,l=0):l>2147483647?l=2147483647:l<-2147483648&&(l=-2147483648),l=+l,Lt(l)&&(l=L?0:g.length-1),l<0&&(l=g.length+l),l>=g.length){if(L)return-1;l=g.length-1}else if(l<0)if(L)l=0;else return-1;if(typeof f=="string"&&(f=c.from(f,S)),c.isBuffer(f))return f.length===0?-1:W(g,f,l,S,L);if(typeof f=="number")return f=f&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(g,f,l):Uint8Array.prototype.lastIndexOf.call(g,f,l):W(g,[f],l,S,L);throw new TypeError("val must be string, number or Buffer")}function W(g,f,l,S,L){let F=1,q=g.length,pt=f.length;if(S!==void 0&&(S=String(S).toLowerCase(),S==="ucs2"||S==="ucs-2"||S==="utf16le"||S==="utf-16le")){if(g.length<2||f.length<2)return-1;F=2,q/=2,pt/=2,l/=2}function ht(Ft,ut){return F===1?Ft[ut]:Ft.readUInt16BE(ut*F)}let lt;if(L){let Ft=-1;for(lt=l;lt<q;lt++)if(ht(g,lt)===ht(f,Ft===-1?0:lt-Ft)){if(Ft===-1&&(Ft=lt),lt-Ft+1===pt)return Ft*F}else Ft!==-1&&(lt-=lt-Ft),Ft=-1}else for(l+pt>q&&(l=q-pt),lt=l;lt>=0;lt--){let Ft=!0;for(let ut=0;ut<pt;ut++)if(ht(g,lt+ut)!==ht(f,ut)){Ft=!1;break}if(Ft)return lt}return-1}c.prototype.includes=function(f,l,S){return this.indexOf(f,l,S)!==-1},c.prototype.indexOf=function(f,l,S){return O(this,f,l,S,!0)},c.prototype.lastIndexOf=function(f,l,S){return O(this,f,l,S,!1)};function K(g,f,l,S){l=Number(l)||0;const L=g.length-l;S?(S=Number(S),S>L&&(S=L)):S=L;const F=f.length;S>F/2&&(S=F/2);let q;for(q=0;q<S;++q){const pt=parseInt(f.substr(q*2,2),16);if(Lt(pt))return q;g[l+q]=pt}return q}function Q(g,f,l,S){return Rt(Mt(f,g.length-l),g,l,S)}function it(g,f,l,S){return Rt(Pt(f),g,l,S)}function J(g,f,l,S){return Rt(Ct(f),g,l,S)}function wt(g,f,l,S){return Rt(Sr(f,g.length-l),g,l,S)}c.prototype.write=function(f,l,S,L){if(l===void 0)L="utf8",S=this.length,l=0;else if(S===void 0&&typeof l=="string")L=l,S=this.length,l=0;else if(isFinite(l))l=l>>>0,isFinite(S)?(S=S>>>0,L===void 0&&(L="utf8")):(L=S,S=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const F=this.length-l;if((S===void 0||S>F)&&(S=F),f.length>0&&(S<0||l<0)||l>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let q=!1;for(;;)switch(L){case"hex":return K(this,f,l,S);case"utf8":case"utf-8":return Q(this,f,l,S);case"ascii":case"latin1":case"binary":return it(this,f,l,S);case"base64":return J(this,f,l,S);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wt(this,f,l,S);default:if(q)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),q=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(g,f,l){return f===0&&l===g.length?t.fromByteArray(g):t.fromByteArray(g.slice(f,l))}function a(g,f,l){l=Math.min(g.length,l);const S=[];let L=f;for(;L<l;){const F=g[L];let q=null,pt=F>239?4:F>223?3:F>191?2:1;if(L+pt<=l){let ht,lt,Ft,ut;switch(pt){case 1:F<128&&(q=F);break;case 2:ht=g[L+1],(ht&192)===128&&(ut=(F&31)<<6|ht&63,ut>127&&(q=ut));break;case 3:ht=g[L+1],lt=g[L+2],(ht&192)===128&&(lt&192)===128&&(ut=(F&15)<<12|(ht&63)<<6|lt&63,ut>2047&&(ut<55296||ut>57343)&&(q=ut));break;case 4:ht=g[L+1],lt=g[L+2],Ft=g[L+3],(ht&192)===128&&(lt&192)===128&&(Ft&192)===128&&(ut=(F&15)<<18|(ht&63)<<12|(lt&63)<<6|Ft&63,ut>65535&&ut<1114112&&(q=ut))}}q===null?(q=65533,pt=1):q>65535&&(q-=65536,S.push(q>>>10&1023|55296),q=56320|q&1023),S.push(q),L+=pt}return y(S)}const h=4096;function y(g){const f=g.length;if(f<=h)return String.fromCharCode.apply(String,g);let l="",S=0;for(;S<f;)l+=String.fromCharCode.apply(String,g.slice(S,S+=h));return l}function E(g,f,l){let S="";l=Math.min(g.length,l);for(let L=f;L<l;++L)S+=String.fromCharCode(g[L]&127);return S}function x(g,f,l){let S="";l=Math.min(g.length,l);for(let L=f;L<l;++L)S+=String.fromCharCode(g[L]);return S}function m(g,f,l){const S=g.length;(!f||f<0)&&(f=0),(!l||l<0||l>S)&&(l=S);let L="";for(let F=f;F<l;++F)L+=Tt[g[F]];return L}function v(g,f,l){const S=g.slice(f,l);let L="";for(let F=0;F<S.length-1;F+=2)L+=String.fromCharCode(S[F]+S[F+1]*256);return L}c.prototype.slice=function(f,l){const S=this.length;f=~~f,l=l===void 0?S:~~l,f<0?(f+=S,f<0&&(f=0)):f>S&&(f=S),l<0?(l+=S,l<0&&(l=0)):l>S&&(l=S),l<f&&(l=f);const L=this.subarray(f,l);return Object.setPrototypeOf(L,c.prototype),L};function p(g,f,l){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+f>l)throw new RangeError("Trying to access beyond buffer length")}c.prototype.readUintLE=c.prototype.readUIntLE=function(f,l,S){f=f>>>0,l=l>>>0,S||p(f,l,this.length);let L=this[f],F=1,q=0;for(;++q<l&&(F*=256);)L+=this[f+q]*F;return L},c.prototype.readUintBE=c.prototype.readUIntBE=function(f,l,S){f=f>>>0,l=l>>>0,S||p(f,l,this.length);let L=this[f+--l],F=1;for(;l>0&&(F*=256);)L+=this[f+--l]*F;return L},c.prototype.readUint8=c.prototype.readUInt8=function(f,l){return f=f>>>0,l||p(f,1,this.length),this[f]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(f,l){return f=f>>>0,l||p(f,2,this.length),this[f]|this[f+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(f,l){return f=f>>>0,l||p(f,2,this.length),this[f]<<8|this[f+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(f,l){return f=f>>>0,l||p(f,4,this.length),(this[f]|this[f+1]<<8|this[f+2]<<16)+this[f+3]*16777216},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(f,l){return f=f>>>0,l||p(f,4,this.length),this[f]*16777216+(this[f+1]<<16|this[f+2]<<8|this[f+3])},c.prototype.readBigUInt64LE=Se(function(f){f=f>>>0,Bt(f,"offset");const l=this[f],S=this[f+7];(l===void 0||S===void 0)&&vt(f,this.length-8);const L=l+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24,F=this[++f]+this[++f]*2**8+this[++f]*2**16+S*2**24;return BigInt(L)+(BigInt(F)<<BigInt(32))}),c.prototype.readBigUInt64BE=Se(function(f){f=f>>>0,Bt(f,"offset");const l=this[f],S=this[f+7];(l===void 0||S===void 0)&&vt(f,this.length-8);const L=l*2**24+this[++f]*2**16+this[++f]*2**8+this[++f],F=this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+S;return(BigInt(L)<<BigInt(32))+BigInt(F)}),c.prototype.readIntLE=function(f,l,S){f=f>>>0,l=l>>>0,S||p(f,l,this.length);let L=this[f],F=1,q=0;for(;++q<l&&(F*=256);)L+=this[f+q]*F;return F*=128,L>=F&&(L-=Math.pow(2,8*l)),L},c.prototype.readIntBE=function(f,l,S){f=f>>>0,l=l>>>0,S||p(f,l,this.length);let L=l,F=1,q=this[f+--L];for(;L>0&&(F*=256);)q+=this[f+--L]*F;return F*=128,q>=F&&(q-=Math.pow(2,8*l)),q},c.prototype.readInt8=function(f,l){return f=f>>>0,l||p(f,1,this.length),this[f]&128?(255-this[f]+1)*-1:this[f]},c.prototype.readInt16LE=function(f,l){f=f>>>0,l||p(f,2,this.length);const S=this[f]|this[f+1]<<8;return S&32768?S|4294901760:S},c.prototype.readInt16BE=function(f,l){f=f>>>0,l||p(f,2,this.length);const S=this[f+1]|this[f]<<8;return S&32768?S|4294901760:S},c.prototype.readInt32LE=function(f,l){return f=f>>>0,l||p(f,4,this.length),this[f]|this[f+1]<<8|this[f+2]<<16|this[f+3]<<24},c.prototype.readInt32BE=function(f,l){return f=f>>>0,l||p(f,4,this.length),this[f]<<24|this[f+1]<<16|this[f+2]<<8|this[f+3]},c.prototype.readBigInt64LE=Se(function(f){f=f>>>0,Bt(f,"offset");const l=this[f],S=this[f+7];(l===void 0||S===void 0)&&vt(f,this.length-8);const L=this[f+4]+this[f+5]*2**8+this[f+6]*2**16+(S<<24);return(BigInt(L)<<BigInt(32))+BigInt(l+this[++f]*2**8+this[++f]*2**16+this[++f]*2**24)}),c.prototype.readBigInt64BE=Se(function(f){f=f>>>0,Bt(f,"offset");const l=this[f],S=this[f+7];(l===void 0||S===void 0)&&vt(f,this.length-8);const L=(l<<24)+this[++f]*2**16+this[++f]*2**8+this[++f];return(BigInt(L)<<BigInt(32))+BigInt(this[++f]*2**24+this[++f]*2**16+this[++f]*2**8+S)}),c.prototype.readFloatLE=function(f,l){return f=f>>>0,l||p(f,4,this.length),e.read(this,f,!0,23,4)},c.prototype.readFloatBE=function(f,l){return f=f>>>0,l||p(f,4,this.length),e.read(this,f,!1,23,4)},c.prototype.readDoubleLE=function(f,l){return f=f>>>0,l||p(f,8,this.length),e.read(this,f,!0,52,8)},c.prototype.readDoubleBE=function(f,l){return f=f>>>0,l||p(f,8,this.length),e.read(this,f,!1,52,8)};function u(g,f,l,S,L,F){if(!c.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(f>L||f<F)throw new RangeError('"value" argument is out of bounds');if(l+S>g.length)throw new RangeError("Index out of range")}c.prototype.writeUintLE=c.prototype.writeUIntLE=function(f,l,S,L){if(f=+f,l=l>>>0,S=S>>>0,!L){const pt=Math.pow(2,8*S)-1;u(this,f,l,S,pt,0)}let F=1,q=0;for(this[l]=f&255;++q<S&&(F*=256);)this[l+q]=f/F&255;return l+S},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(f,l,S,L){if(f=+f,l=l>>>0,S=S>>>0,!L){const pt=Math.pow(2,8*S)-1;u(this,f,l,S,pt,0)}let F=S-1,q=1;for(this[l+F]=f&255;--F>=0&&(q*=256);)this[l+F]=f/q&255;return l+S},c.prototype.writeUint8=c.prototype.writeUInt8=function(f,l,S){return f=+f,l=l>>>0,S||u(this,f,l,1,255,0),this[l]=f&255,l+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(f,l,S){return f=+f,l=l>>>0,S||u(this,f,l,2,65535,0),this[l]=f&255,this[l+1]=f>>>8,l+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(f,l,S){return f=+f,l=l>>>0,S||u(this,f,l,2,65535,0),this[l]=f>>>8,this[l+1]=f&255,l+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(f,l,S){return f=+f,l=l>>>0,S||u(this,f,l,4,4294967295,0),this[l+3]=f>>>24,this[l+2]=f>>>16,this[l+1]=f>>>8,this[l]=f&255,l+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(f,l,S){return f=+f,l=l>>>0,S||u(this,f,l,4,4294967295,0),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4};function w(g,f,l,S,L){bt(f,S,L,g,l,7);let F=Number(f&BigInt(4294967295));g[l++]=F,F=F>>8,g[l++]=F,F=F>>8,g[l++]=F,F=F>>8,g[l++]=F;let q=Number(f>>BigInt(32)&BigInt(4294967295));return g[l++]=q,q=q>>8,g[l++]=q,q=q>>8,g[l++]=q,q=q>>8,g[l++]=q,l}function $(g,f,l,S,L){bt(f,S,L,g,l,7);let F=Number(f&BigInt(4294967295));g[l+7]=F,F=F>>8,g[l+6]=F,F=F>>8,g[l+5]=F,F=F>>8,g[l+4]=F;let q=Number(f>>BigInt(32)&BigInt(4294967295));return g[l+3]=q,q=q>>8,g[l+2]=q,q=q>>8,g[l+1]=q,q=q>>8,g[l]=q,l+8}c.prototype.writeBigUInt64LE=Se(function(f,l=0){return w(this,f,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeBigUInt64BE=Se(function(f,l=0){return $(this,f,l,BigInt(0),BigInt("0xffffffffffffffff"))}),c.prototype.writeIntLE=function(f,l,S,L){if(f=+f,l=l>>>0,!L){const ht=Math.pow(2,8*S-1);u(this,f,l,S,ht-1,-ht)}let F=0,q=1,pt=0;for(this[l]=f&255;++F<S&&(q*=256);)f<0&&pt===0&&this[l+F-1]!==0&&(pt=1),this[l+F]=(f/q>>0)-pt&255;return l+S},c.prototype.writeIntBE=function(f,l,S,L){if(f=+f,l=l>>>0,!L){const ht=Math.pow(2,8*S-1);u(this,f,l,S,ht-1,-ht)}let F=S-1,q=1,pt=0;for(this[l+F]=f&255;--F>=0&&(q*=256);)f<0&&pt===0&&this[l+F+1]!==0&&(pt=1),this[l+F]=(f/q>>0)-pt&255;return l+S},c.prototype.writeInt8=function(f,l,S){return f=+f,l=l>>>0,S||u(this,f,l,1,127,-128),f<0&&(f=255+f+1),this[l]=f&255,l+1},c.prototype.writeInt16LE=function(f,l,S){return f=+f,l=l>>>0,S||u(this,f,l,2,32767,-32768),this[l]=f&255,this[l+1]=f>>>8,l+2},c.prototype.writeInt16BE=function(f,l,S){return f=+f,l=l>>>0,S||u(this,f,l,2,32767,-32768),this[l]=f>>>8,this[l+1]=f&255,l+2},c.prototype.writeInt32LE=function(f,l,S){return f=+f,l=l>>>0,S||u(this,f,l,4,2147483647,-2147483648),this[l]=f&255,this[l+1]=f>>>8,this[l+2]=f>>>16,this[l+3]=f>>>24,l+4},c.prototype.writeInt32BE=function(f,l,S){return f=+f,l=l>>>0,S||u(this,f,l,4,2147483647,-2147483648),f<0&&(f=4294967295+f+1),this[l]=f>>>24,this[l+1]=f>>>16,this[l+2]=f>>>8,this[l+3]=f&255,l+4},c.prototype.writeBigInt64LE=Se(function(f,l=0){return w(this,f,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),c.prototype.writeBigInt64BE=Se(function(f,l=0){return $(this,f,l,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function j(g,f,l,S,L,F){if(l+S>g.length)throw new RangeError("Index out of range");if(l<0)throw new RangeError("Index out of range")}function V(g,f,l,S,L){return f=+f,l=l>>>0,L||j(g,f,l,4),e.write(g,f,l,S,23,4),l+4}c.prototype.writeFloatLE=function(f,l,S){return V(this,f,l,!0,S)},c.prototype.writeFloatBE=function(f,l,S){return V(this,f,l,!1,S)};function et(g,f,l,S,L){return f=+f,l=l>>>0,L||j(g,f,l,8),e.write(g,f,l,S,52,8),l+8}c.prototype.writeDoubleLE=function(f,l,S){return et(this,f,l,!0,S)},c.prototype.writeDoubleBE=function(f,l,S){return et(this,f,l,!1,S)},c.prototype.copy=function(f,l,S,L){if(!c.isBuffer(f))throw new TypeError("argument should be a Buffer");if(S||(S=0),!L&&L!==0&&(L=this.length),l>=f.length&&(l=f.length),l||(l=0),L>0&&L<S&&(L=S),L===S||f.length===0||this.length===0)return 0;if(l<0)throw new RangeError("targetStart out of bounds");if(S<0||S>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),f.length-l<L-S&&(L=f.length-l+S);const F=L-S;return this===f&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(l,S,L):Uint8Array.prototype.set.call(f,this.subarray(S,L),l),F},c.prototype.fill=function(f,l,S,L){if(typeof f=="string"){if(typeof l=="string"?(L=l,l=0,S=this.length):typeof S=="string"&&(L=S,S=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!c.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(f.length===1){const q=f.charCodeAt(0);(L==="utf8"&&q<128||L==="latin1")&&(f=q)}}else typeof f=="number"?f=f&255:typeof f=="boolean"&&(f=Number(f));if(l<0||this.length<l||this.length<S)throw new RangeError("Out of range index");if(S<=l)return this;l=l>>>0,S=S===void 0?this.length:S>>>0,f||(f=0);let F;if(typeof f=="number")for(F=l;F<S;++F)this[F]=f;else{const q=c.isBuffer(f)?f:c.from(f,L),pt=q.length;if(pt===0)throw new TypeError('The value "'+f+'" is invalid for argument "value"');for(F=0;F<S-l;++F)this[F+l]=q[F%pt]}return this};const rt={};function ot(g,f,l){rt[g]=class extends l{constructor(){super(),Object.defineProperty(this,"message",{value:f.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}ot("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ot("ERR_INVALID_ARG_TYPE",function(g,f){return`The "${g}" argument must be of type number. Received type ${typeof f}`},TypeError),ot("ERR_OUT_OF_RANGE",function(g,f,l){let S=`The value of "${g}" is out of range.`,L=l;return Number.isInteger(l)&&Math.abs(l)>2**32?L=_t(String(l)):typeof l=="bigint"&&(L=String(l),(l>BigInt(2)**BigInt(32)||l<-(BigInt(2)**BigInt(32)))&&(L=_t(L)),L+="n"),S+=` It must be ${f}. Received ${L}`,S},RangeError);function _t(g){let f="",l=g.length;const S=g[0]==="-"?1:0;for(;l>=S+4;l-=3)f=`_${g.slice(l-3,l)}${f}`;return`${g.slice(0,l)}${f}`}function gt(g,f,l){Bt(f,"offset"),(g[f]===void 0||g[f+l]===void 0)&&vt(f,g.length-(l+1))}function bt(g,f,l,S,L,F){if(g>l||g<f){const q=typeof f=="bigint"?"n":"";let pt;throw F>3?f===0||f===BigInt(0)?pt=`>= 0${q} and < 2${q} ** ${(F+1)*8}${q}`:pt=`>= -(2${q} ** ${(F+1)*8-1}${q}) and < 2 ** ${(F+1)*8-1}${q}`:pt=`>= ${f}${q} and <= ${l}${q}`,new rt.ERR_OUT_OF_RANGE("value",pt,g)}gt(S,L,F)}function Bt(g,f){if(typeof g!="number")throw new rt.ERR_INVALID_ARG_TYPE(f,"number",g)}function vt(g,f,l){throw Math.floor(g)!==g?(Bt(g,l),new rt.ERR_OUT_OF_RANGE(l||"offset","an integer",g)):f<0?new rt.ERR_BUFFER_OUT_OF_BOUNDS:new rt.ERR_OUT_OF_RANGE(l||"offset",`>= ${l?1:0} and <= ${f}`,g)}const It=/[^+/0-9A-Za-z-_]/g;function De(g){if(g=g.split("=")[0],g=g.trim().replace(It,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function Mt(g,f){f=f||1/0;let l;const S=g.length;let L=null;const F=[];for(let q=0;q<S;++q){if(l=g.charCodeAt(q),l>55295&&l<57344){if(!L){if(l>56319){(f-=3)>-1&&F.push(239,191,189);continue}else if(q+1===S){(f-=3)>-1&&F.push(239,191,189);continue}L=l;continue}if(l<56320){(f-=3)>-1&&F.push(239,191,189),L=l;continue}l=(L-55296<<10|l-56320)+65536}else L&&(f-=3)>-1&&F.push(239,191,189);if(L=null,l<128){if((f-=1)<0)break;F.push(l)}else if(l<2048){if((f-=2)<0)break;F.push(l>>6|192,l&63|128)}else if(l<65536){if((f-=3)<0)break;F.push(l>>12|224,l>>6&63|128,l&63|128)}else if(l<1114112){if((f-=4)<0)break;F.push(l>>18|240,l>>12&63|128,l>>6&63|128,l&63|128)}else throw new Error("Invalid code point")}return F}function Pt(g){const f=[];for(let l=0;l<g.length;++l)f.push(g.charCodeAt(l)&255);return f}function Sr(g,f){let l,S,L;const F=[];for(let q=0;q<g.length&&!((f-=2)<0);++q)l=g.charCodeAt(q),S=l>>8,L=l%256,F.push(L),F.push(S);return F}function Ct(g){return t.toByteArray(De(g))}function Rt(g,f,l,S){let L;for(L=0;L<S&&!(L+l>=f.length||L>=g.length);++L)f[L+l]=g[L];return L}function ge(g,f){return g instanceof f||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===f.name}function Lt(g){return g!==g}const Tt=function(){const g="0123456789abcdef",f=new Array(256);for(let l=0;l<16;++l){const S=l*16;for(let L=0;L<16;++L)f[S+L]=g[l]+g[L]}return f}();function Se(g){return typeof BigInt>"u"?Ut:g}function Ut(){throw new Error("BigInt not supported")}})(dt);function So(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function Xa(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function fs(n,...t){if(!Xa(n))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(n.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${n.length}`)}function Qa(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");So(n.outputLen),So(n.blockLen)}function un(n,t=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(t&&n.finished)throw new Error("Hash#digest() has already been called")}function tc(n,t){fs(n);const e=t.outputLen;if(n.length<e)throw new Error(`digestInto() expects output buffer of length at least ${e}`)}const Vn=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ls(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}const Zn=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),ze=(n,t)=>n<<32-t|n>>>t,ec=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!ec)throw new Error("Non little-endian hardware is not supported");function hs(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Pi(n){if(typeof n=="string"&&(n=hs(n)),!ls(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function ds(...n){let t=0;for(let r=0;r<n.length;r++){const o=n[r];if(!ls(o))throw new Error("Uint8Array expected");t+=o.length}const e=new Uint8Array(t);for(let r=0,o=0;r<n.length;r++){const i=n[r];e.set(i,o),o+=i.length}return e}class ps{clone(){return this._cloneInto()}}function gs(n){const t=r=>n().update(Pi(r)).digest(),e=n();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>n(),t}function ys(n=32){if(Vn&&typeof Vn.getRandomValues=="function")return Vn.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function rc(n,t,e,r){if(typeof n.setBigUint64=="function")return n.setBigUint64(t,e,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(e>>o&i),c=Number(e&i),d=r?4:0,b=r?0:4;n.setUint32(t+d,s,r),n.setUint32(t+b,c,r)}class ms extends ps{constructor(t,e,r,o){super(),this.blockLen=t,this.outputLen=e,this.padOffset=r,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Zn(this.buffer)}update(t){un(this);const{view:e,buffer:r,blockLen:o}=this;t=Pi(t);const i=t.length;for(let s=0;s<i;){const c=Math.min(o-this.pos,i-s);if(c===o){const d=Zn(t);for(;o<=i-s;s+=o)this.process(d,s);continue}r.set(t.subarray(s,s+c),this.pos),this.pos+=c,s+=c,this.pos===o&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){un(this),tc(t,this),this.finished=!0;const{buffer:e,view:r,blockLen:o,isLE:i}=this;let{pos:s}=this;e[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>o-s&&(this.process(r,0),s=0);for(let k=s;k<o;k++)e[k]=0;rc(r,o-8,BigInt(this.length*8),i),this.process(r,0);const c=Zn(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const b=d/4,_=this.get();if(b>_.length)throw new Error("_sha2: outputLen bigger than state");for(let k=0;k<b;k++)c.setUint32(4*k,_[k],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const r=t.slice(0,e);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:r,length:o,finished:i,destroyed:s,pos:c}=this;return t.length=o,t.pos=c,t.finished=i,t.destroyed=s,o%e&&t.buffer.set(r),t}}const rn=BigInt(2**32-1),Ei=BigInt(32);function ws(n,t=!1){return t?{h:Number(n&rn),l:Number(n>>Ei&rn)}:{h:Number(n>>Ei&rn)|0,l:Number(n&rn)|0}}function nc(n,t=!1){let e=new Uint32Array(n.length),r=new Uint32Array(n.length);for(let o=0;o<n.length;o++){const{h:i,l:s}=ws(n[o],t);[e[o],r[o]]=[i,s]}return[e,r]}const ic=(n,t)=>BigInt(n>>>0)<<Ei|BigInt(t>>>0),oc=(n,t,e)=>n>>>e,sc=(n,t,e)=>n<<32-e|t>>>e,ac=(n,t,e)=>n>>>e|t<<32-e,cc=(n,t,e)=>n<<32-e|t>>>e,uc=(n,t,e)=>n<<64-e|t>>>e-32,fc=(n,t,e)=>n>>>e-32|t<<64-e,lc=(n,t)=>t,hc=(n,t)=>n,dc=(n,t,e)=>n<<e|t>>>32-e,pc=(n,t,e)=>t<<e|n>>>32-e,gc=(n,t,e)=>t<<e-32|n>>>64-e,yc=(n,t,e)=>n<<e-32|t>>>64-e;function mc(n,t,e,r){const o=(t>>>0)+(r>>>0);return{h:n+e+(o/2**32|0)|0,l:o|0}}const wc=(n,t,e)=>(n>>>0)+(t>>>0)+(e>>>0),bc=(n,t,e,r)=>t+e+r+(n/2**32|0)|0,vc=(n,t,e,r)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0),xc=(n,t,e,r,o)=>t+e+r+o+(n/2**32|0)|0,Ec=(n,t,e,r,o)=>(n>>>0)+(t>>>0)+(e>>>0)+(r>>>0)+(o>>>0),Sc=(n,t,e,r,o,i)=>t+e+r+o+i+(n/2**32|0)|0,yt={fromBig:ws,split:nc,toBig:ic,shrSH:oc,shrSL:sc,rotrSH:ac,rotrSL:cc,rotrBH:uc,rotrBL:fc,rotr32H:lc,rotr32L:hc,rotlSH:dc,rotlSL:pc,rotlBH:gc,rotlBL:yc,add:mc,add3L:wc,add3H:bc,add4L:vc,add4H:xc,add5H:Sc,add5L:Ec},[_c,Bc]=yt.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),tr=new Uint32Array(80),er=new Uint32Array(80);class Ac extends ms{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:t,Al:e,Bh:r,Bl:o,Ch:i,Cl:s,Dh:c,Dl:d,Eh:b,El:_,Fh:k,Fl:U,Gh:R,Gl:M,Hh:A,Hl:I}=this;return[t,e,r,o,i,s,c,d,b,_,k,U,R,M,A,I]}set(t,e,r,o,i,s,c,d,b,_,k,U,R,M,A,I){this.Ah=t|0,this.Al=e|0,this.Bh=r|0,this.Bl=o|0,this.Ch=i|0,this.Cl=s|0,this.Dh=c|0,this.Dl=d|0,this.Eh=b|0,this.El=_|0,this.Fh=k|0,this.Fl=U|0,this.Gh=R|0,this.Gl=M|0,this.Hh=A|0,this.Hl=I|0}process(t,e){for(let C=0;C<16;C++,e+=4)tr[C]=t.getUint32(e),er[C]=t.getUint32(e+=4);for(let C=16;C<80;C++){const D=tr[C-15]|0,H=er[C-15]|0,O=yt.rotrSH(D,H,1)^yt.rotrSH(D,H,8)^yt.shrSH(D,H,7),W=yt.rotrSL(D,H,1)^yt.rotrSL(D,H,8)^yt.shrSL(D,H,7),K=tr[C-2]|0,Q=er[C-2]|0,it=yt.rotrSH(K,Q,19)^yt.rotrBH(K,Q,61)^yt.shrSH(K,Q,6),J=yt.rotrSL(K,Q,19)^yt.rotrBL(K,Q,61)^yt.shrSL(K,Q,6),wt=yt.add4L(W,J,er[C-7],er[C-16]),B=yt.add4H(wt,O,it,tr[C-7],tr[C-16]);tr[C]=B|0,er[C]=wt|0}let{Ah:r,Al:o,Bh:i,Bl:s,Ch:c,Cl:d,Dh:b,Dl:_,Eh:k,El:U,Fh:R,Fl:M,Gh:A,Gl:I,Hh:T,Hl:z}=this;for(let C=0;C<80;C++){const D=yt.rotrSH(k,U,14)^yt.rotrSH(k,U,18)^yt.rotrBH(k,U,41),H=yt.rotrSL(k,U,14)^yt.rotrSL(k,U,18)^yt.rotrBL(k,U,41),O=k&R^~k&A,W=U&M^~U&I,K=yt.add5L(z,H,W,Bc[C],er[C]),Q=yt.add5H(K,T,D,O,_c[C],tr[C]),it=K|0,J=yt.rotrSH(r,o,28)^yt.rotrBH(r,o,34)^yt.rotrBH(r,o,39),wt=yt.rotrSL(r,o,28)^yt.rotrBL(r,o,34)^yt.rotrBL(r,o,39),B=r&i^r&c^i&c,a=o&s^o&d^s&d;T=A|0,z=I|0,A=R|0,I=M|0,R=k|0,M=U|0,{h:k,l:U}=yt.add(b|0,_|0,Q|0,it|0),b=c|0,_=d|0,c=i|0,d=s|0,i=r|0,s=o|0;const h=yt.add3L(it,wt,a);r=yt.add3H(h,Q,J,B),o=h|0}({h:r,l:o}=yt.add(this.Ah|0,this.Al|0,r|0,o|0)),{h:i,l:s}=yt.add(this.Bh|0,this.Bl|0,i|0,s|0),{h:c,l:d}=yt.add(this.Ch|0,this.Cl|0,c|0,d|0),{h:b,l:_}=yt.add(this.Dh|0,this.Dl|0,b|0,_|0),{h:k,l:U}=yt.add(this.Eh|0,this.El|0,k|0,U|0),{h:R,l:M}=yt.add(this.Fh|0,this.Fl|0,R|0,M|0),{h:A,l:I}=yt.add(this.Gh|0,this.Gl|0,A|0,I|0),{h:T,l:z}=yt.add(this.Hh|0,this.Hl|0,T|0,z|0),this.set(r,o,i,s,c,d,b,_,k,U,R,M,A,I,T,z)}roundClean(){tr.fill(0),er.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const bs=gs(()=>new Ac);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vs=BigInt(0),wn=BigInt(1),Ic=BigInt(2);function Ke(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}const kc=Array.from({length:256},(n,t)=>t.toString(16).padStart(2,"0"));function mr(n){if(!Ke(n))throw new Error("Uint8Array expected");let t="";for(let e=0;e<n.length;e++)t+=kc[n[e]];return t}function xs(n){const t=n.toString(16);return t.length&1?`0${t}`:t}function Ni(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}const Ze={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function _o(n){if(n>=Ze._0&&n<=Ze._9)return n-Ze._0;if(n>=Ze._A&&n<=Ze._F)return n-(Ze._A-10);if(n>=Ze._a&&n<=Ze._f)return n-(Ze._a-10)}function Lr(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const t=n.length,e=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(e);for(let o=0,i=0;o<e;o++,i+=2){const s=_o(n.charCodeAt(i)),c=_o(n.charCodeAt(i+1));if(s===void 0||c===void 0){const d=n[i]+n[i+1];throw new Error('hex string expected, got non-hex character "'+d+'" at index '+i)}r[o]=s*16+c}return r}function pr(n){return Ni(mr(n))}function Mr(n){if(!Ke(n))throw new Error("Uint8Array expected");return Ni(mr(Uint8Array.from(n).reverse()))}function Tr(n,t){return Lr(n.toString(16).padStart(t*2,"0"))}function jr(n,t){return Tr(n,t).reverse()}function Mc(n){return Lr(xs(n))}function ue(n,t,e){let r;if(typeof t=="string")try{r=Lr(t)}catch(i){throw new Error(`${n} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Ke(t))r=Uint8Array.from(t);else throw new Error(`${n} must be hex string or Uint8Array`);const o=r.length;if(typeof e=="number"&&o!==e)throw new Error(`${n} expected ${e} bytes, got ${o}`);return r}function wr(...n){let t=0;for(let o=0;o<n.length;o++){const i=n[o];if(!Ke(i))throw new Error("Uint8Array expected");t+=i.length}let e=new Uint8Array(t),r=0;for(let o=0;o<n.length;o++){const i=n[o];e.set(i,r),r+=i.length}return e}function Rc(n,t){if(n.length!==t.length)return!1;let e=0;for(let r=0;r<n.length;r++)e|=n[r]^t[r];return e===0}function Lc(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function Tc(n){let t;for(t=0;n>vs;n>>=wn,t+=1);return t}function Cc(n,t){return n>>BigInt(t)&wn}const Uc=(n,t,e)=>n|(e?wn:vs)<<BigInt(t),qi=n=>(Ic<<BigInt(n-1))-wn,Yn=n=>new Uint8Array(n),Bo=n=>Uint8Array.from(n);function Es(n,t,e){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=Yn(n),o=Yn(n),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},c=(...k)=>e(o,r,...k),d=(k=Yn())=>{o=c(Bo([0]),k),r=c(),k.length!==0&&(o=c(Bo([1]),k),r=c())},b=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let k=0;const U=[];for(;k<t;){r=c();const R=r.slice();U.push(R),k+=r.length}return wr(...U)};return(k,U)=>{s(),d(k);let R;for(;!(R=U(b()));)d();return s(),R}}const Fc={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||Ke(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,t)=>t.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function Nr(n,t,e={}){const r=(o,i,s)=>{const c=Fc[i];if(typeof c!="function")throw new Error(`Invalid validator "${i}", expected function`);const d=n[o];if(!(s&&d===void 0)&&!c(d,n))throw new Error(`Invalid param ${String(o)}=${d} (${typeof d}), expected ${i}`)};for(const[o,i]of Object.entries(t))r(o,i,!1);for(const[o,i]of Object.entries(e))r(o,i,!0);return n}const Oc=Object.freeze(Object.defineProperty({__proto__:null,bitGet:Cc,bitLen:Tc,bitMask:qi,bitSet:Uc,bytesToHex:mr,bytesToNumberBE:pr,bytesToNumberLE:Mr,concatBytes:wr,createHmacDrbg:Es,ensureBytes:ue,equalBytes:Rc,hexToBytes:Lr,hexToNumber:Ni,isBytes:Ke,numberToBytesBE:Tr,numberToBytesLE:jr,numberToHexUnpadded:xs,numberToVarBytesBE:Mc,utf8ToBytes:Lc,validateObject:Nr},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const fe=BigInt(0),$t=BigInt(1),fr=BigInt(2),Pc=BigInt(3),Si=BigInt(4),Ao=BigInt(5),Io=BigInt(8);BigInt(9);BigInt(16);function Dt(n,t){const e=n%t;return e>=fe?e:t+e}function Nc(n,t,e){if(e<=fe||t<fe)throw new Error("Expected power/modulo > 0");if(e===$t)return fe;let r=$t;for(;t>fe;)t&$t&&(r=r*n%e),n=n*n%e,t>>=$t;return r}function Ht(n,t,e){let r=n;for(;t-- >fe;)r*=r,r%=e;return r}function _i(n,t){if(n===fe||t<=fe)throw new Error(`invert: expected positive integers, got n=${n} mod=${t}`);let e=Dt(n,t),r=t,o=fe,i=$t;for(;e!==fe;){const c=r/e,d=r%e,b=o-i*c;r=e,e=d,o=i,i=b}if(r!==$t)throw new Error("invert: does not exist");return Dt(o,t)}function qc(n){const t=(n-$t)/fr;let e,r,o;for(e=n-$t,r=0;e%fr===fe;e/=fr,r++);for(o=fr;o<n&&Nc(o,t,n)!==n-$t;o++);if(r===1){const s=(n+$t)/Si;return function(d,b){const _=d.pow(b,s);if(!d.eql(d.sqr(_),b))throw new Error("Cannot find square root");return _}}const i=(e+$t)/fr;return function(c,d){if(c.pow(d,t)===c.neg(c.ONE))throw new Error("Cannot find square root");let b=r,_=c.pow(c.mul(c.ONE,o),e),k=c.pow(d,i),U=c.pow(d,e);for(;!c.eql(U,c.ONE);){if(c.eql(U,c.ZERO))return c.ZERO;let R=1;for(let A=c.sqr(U);R<b&&!c.eql(A,c.ONE);R++)A=c.sqr(A);const M=c.pow(_,$t<<BigInt(b-R-1));_=c.sqr(M),k=c.mul(k,M),U=c.mul(U,_),b=R}return k}}function Dc(n){if(n%Si===Pc){const t=(n+$t)/Si;return function(r,o){const i=r.pow(o,t);if(!r.eql(r.sqr(i),o))throw new Error("Cannot find square root");return i}}if(n%Io===Ao){const t=(n-Ao)/Io;return function(r,o){const i=r.mul(o,fr),s=r.pow(i,t),c=r.mul(o,s),d=r.mul(r.mul(c,fr),s),b=r.mul(c,r.sub(d,r.ONE));if(!r.eql(r.sqr(b),o))throw new Error("Cannot find square root");return b}}return qc(n)}const zc=(n,t)=>(Dt(n,t)&$t)===$t,$c=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Hc(n){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=$c.reduce((r,o)=>(r[o]="function",r),t);return Nr(n,e)}function Kc(n,t,e){if(e<fe)throw new Error("Expected power > 0");if(e===fe)return n.ONE;if(e===$t)return t;let r=n.ONE,o=t;for(;e>fe;)e&$t&&(r=n.mul(r,o)),o=n.sqr(o),e>>=$t;return r}function Wc(n,t){const e=new Array(t.length),r=t.reduce((i,s,c)=>n.is0(s)?i:(e[c]=i,n.mul(i,s)),n.ONE),o=n.inv(r);return t.reduceRight((i,s,c)=>n.is0(s)?i:(e[c]=n.mul(i,e[c]),n.mul(i,s)),o),e}function Ss(n,t){const e=t!==void 0?t:n.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function _s(n,t,e=!1,r={}){if(n<=fe)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:o,nByteLength:i}=Ss(n,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const s=Dc(n),c=Object.freeze({ORDER:n,BITS:o,BYTES:i,MASK:qi(o),ZERO:fe,ONE:$t,create:d=>Dt(d,n),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return fe<=d&&d<n},is0:d=>d===fe,isOdd:d=>(d&$t)===$t,neg:d=>Dt(-d,n),eql:(d,b)=>d===b,sqr:d=>Dt(d*d,n),add:(d,b)=>Dt(d+b,n),sub:(d,b)=>Dt(d-b,n),mul:(d,b)=>Dt(d*b,n),pow:(d,b)=>Kc(c,d,b),div:(d,b)=>Dt(d*_i(b,n),n),sqrN:d=>d*d,addN:(d,b)=>d+b,subN:(d,b)=>d-b,mulN:(d,b)=>d*b,inv:d=>_i(d,n),sqrt:r.sqrt||(d=>s(c,d)),invertBatch:d=>Wc(c,d),cmov:(d,b,_)=>_?b:d,toBytes:d=>e?jr(d,i):Tr(d,i),fromBytes:d=>{if(d.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${d.length}`);return e?Mr(d):pr(d)}});return Object.freeze(c)}function jc(n,t){if(!n.isOdd)throw new Error("Field doesn't have isOdd");const e=n.sqrt(t);return n.isOdd(e)?n.neg(e):e}function Bs(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const t=n.toString(2).length;return Math.ceil(t/8)}function As(n){const t=Bs(n);return t+Math.ceil(t/2)}function Gc(n,t,e=!1){const r=n.length,o=Bs(t),i=As(t);if(r<16||r<i||r>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${r}`);const s=e?pr(n):Mr(n),c=Dt(s,t-$t)+$t;return e?jr(c,o):Tr(c,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Vc=BigInt(0),Jn=BigInt(1);function Is(n,t){const e=(o,i)=>{const s=i.negate();return o?s:i},r=o=>{const i=Math.ceil(t/o)+1,s=2**(o-1);return{windows:i,windowSize:s}};return{constTimeNegate:e,unsafeLadder(o,i){let s=n.ZERO,c=o;for(;i>Vc;)i&Jn&&(s=s.add(c)),c=c.double(),i>>=Jn;return s},precomputeWindow(o,i){const{windows:s,windowSize:c}=r(i),d=[];let b=o,_=b;for(let k=0;k<s;k++){_=b,d.push(_);for(let U=1;U<c;U++)_=_.add(b),d.push(_);b=_.double()}return d},wNAF(o,i,s){const{windows:c,windowSize:d}=r(o);let b=n.ZERO,_=n.BASE;const k=BigInt(2**o-1),U=2**o,R=BigInt(o);for(let M=0;M<c;M++){const A=M*d;let I=Number(s&k);s>>=R,I>d&&(I-=U,s+=Jn);const T=A,z=A+Math.abs(I)-1,C=M%2!==0,D=I<0;I===0?_=_.add(e(C,i[T])):b=b.add(e(D,i[z]))}return{p:b,f:_}},wNAFCached(o,i,s,c){const d=o._WINDOW_SIZE||1;let b=i.get(o);return b||(b=this.precomputeWindow(o,d),d!==1&&i.set(o,c(b))),this.wNAF(d,b,s)}}}function Di(n){return Hc(n.Fp),Nr(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ss(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Oe=BigInt(0),Ae=BigInt(1),nn=BigInt(2),Zc=BigInt(8),Yc={zip215:!0};function Jc(n){const t=Di(n);return Nr(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}function zi(n){const t=Jc(n),{Fp:e,n:r,prehash:o,hash:i,randomBytes:s,nByteLength:c,h:d}=t,b=nn<<BigInt(c*8)-Ae,_=e.create,k=t.uvRatio||((x,m)=>{try{return{isValid:!0,value:e.sqrt(x*e.inv(m))}}catch{return{isValid:!1,value:Oe}}}),U=t.adjustScalarBytes||(x=>x),R=t.domain||((x,m,v)=>{if(m.length||v)throw new Error("Contexts/pre-hash are not supported");return x}),M=x=>typeof x=="bigint"&&Oe<x,A=(x,m)=>M(x)&&M(m)&&x<m,I=x=>x===Oe||A(x,b);function T(x,m){if(A(x,m))return x;throw new Error(`Expected valid scalar < ${m}, got ${typeof x} ${x}`)}function z(x){return x===Oe?x:T(x,r)}const C=new Map;function D(x){if(!(x instanceof H))throw new Error("ExtendedPoint expected")}class H{constructor(m,v,p,u){if(this.ex=m,this.ey=v,this.ez=p,this.et=u,!I(m))throw new Error("x required");if(!I(v))throw new Error("y required");if(!I(p))throw new Error("z required");if(!I(u))throw new Error("t required")}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(m){if(m instanceof H)throw new Error("extended point not allowed");const{x:v,y:p}=m||{};if(!I(v)||!I(p))throw new Error("invalid affine point");return new H(v,p,Ae,_(v*p))}static normalizeZ(m){const v=e.invertBatch(m.map(p=>p.ez));return m.map((p,u)=>p.toAffine(v[u])).map(H.fromAffine)}_setWindowSize(m){this._WINDOW_SIZE=m,C.delete(this)}assertValidity(){const{a:m,d:v}=t;if(this.is0())throw new Error("bad point: ZERO");const{ex:p,ey:u,ez:w,et:$}=this,j=_(p*p),V=_(u*u),et=_(w*w),rt=_(et*et),ot=_(j*m),_t=_(et*_(ot+V)),gt=_(rt+_(v*_(j*V)));if(_t!==gt)throw new Error("bad point: equation left != right (1)");const bt=_(p*u),Bt=_(w*$);if(bt!==Bt)throw new Error("bad point: equation left != right (2)")}equals(m){D(m);const{ex:v,ey:p,ez:u}=this,{ex:w,ey:$,ez:j}=m,V=_(v*j),et=_(w*u),rt=_(p*j),ot=_($*u);return V===et&&rt===ot}is0(){return this.equals(H.ZERO)}negate(){return new H(_(-this.ex),this.ey,this.ez,_(-this.et))}double(){const{a:m}=t,{ex:v,ey:p,ez:u}=this,w=_(v*v),$=_(p*p),j=_(nn*_(u*u)),V=_(m*w),et=v+p,rt=_(_(et*et)-w-$),ot=V+$,_t=ot-j,gt=V-$,bt=_(rt*_t),Bt=_(ot*gt),vt=_(rt*gt),It=_(_t*ot);return new H(bt,Bt,It,vt)}add(m){D(m);const{a:v,d:p}=t,{ex:u,ey:w,ez:$,et:j}=this,{ex:V,ey:et,ez:rt,et:ot}=m;if(v===BigInt(-1)){const ge=_((w-u)*(et+V)),Lt=_((w+u)*(et-V)),Tt=_(Lt-ge);if(Tt===Oe)return this.double();const Se=_($*nn*ot),Ut=_(j*nn*rt),g=Ut+Se,f=Lt+ge,l=Ut-Se,S=_(g*Tt),L=_(f*l),F=_(g*l),q=_(Tt*f);return new H(S,L,q,F)}const _t=_(u*V),gt=_(w*et),bt=_(j*p*ot),Bt=_($*rt),vt=_((u+w)*(V+et)-_t-gt),It=Bt-bt,De=Bt+bt,Mt=_(gt-v*_t),Pt=_(vt*It),Sr=_(De*Mt),Ct=_(vt*Mt),Rt=_(It*De);return new H(Pt,Sr,Rt,Ct)}subtract(m){return this.add(m.negate())}wNAF(m){return K.wNAFCached(this,C,m,H.normalizeZ)}multiply(m){const{p:v,f:p}=this.wNAF(T(m,r));return H.normalizeZ([v,p])[0]}multiplyUnsafe(m){let v=z(m);return v===Oe?W:this.equals(W)||v===Ae?this:this.equals(O)?this.wNAF(v).p:K.unsafeLadder(this,v)}isSmallOrder(){return this.multiplyUnsafe(d).is0()}isTorsionFree(){return K.unsafeLadder(this,r).is0()}toAffine(m){const{ex:v,ey:p,ez:u}=this,w=this.is0();m==null&&(m=w?Zc:e.inv(u));const $=_(v*m),j=_(p*m),V=_(u*m);if(w)return{x:Oe,y:Ae};if(V!==Ae)throw new Error("invZ was invalid");return{x:$,y:j}}clearCofactor(){const{h:m}=t;return m===Ae?this:this.multiplyUnsafe(m)}static fromHex(m,v=!1){const{d:p,a:u}=t,w=e.BYTES;m=ue("pointHex",m,w);const $=m.slice(),j=m[w-1];$[w-1]=j&-129;const V=Mr($);V===Oe||(v?T(V,b):T(V,e.ORDER));const et=_(V*V),rt=_(et-Ae),ot=_(p*et-u);let{isValid:_t,value:gt}=k(rt,ot);if(!_t)throw new Error("Point.fromHex: invalid y coordinate");const bt=(gt&Ae)===Ae,Bt=(j&128)!==0;if(!v&&gt===Oe&&Bt)throw new Error("Point.fromHex: x=0 and x_0=1");return Bt!==bt&&(gt=_(-gt)),H.fromAffine({x:gt,y:V})}static fromPrivateKey(m){return J(m).point}toRawBytes(){const{x:m,y:v}=this.toAffine(),p=jr(v,e.BYTES);return p[p.length-1]|=m&Ae?128:0,p}toHex(){return mr(this.toRawBytes())}}H.BASE=new H(t.Gx,t.Gy,Ae,_(t.Gx*t.Gy)),H.ZERO=new H(Oe,Ae,Ae,Oe);const{BASE:O,ZERO:W}=H,K=Is(H,c*8);function Q(x){return Dt(x,r)}function it(x){return Q(Mr(x))}function J(x){const m=c;x=ue("private key",x,m);const v=ue("hashed private key",i(x),2*m),p=U(v.slice(0,m)),u=v.slice(m,2*m),w=it(p),$=O.multiply(w),j=$.toRawBytes();return{head:p,prefix:u,scalar:w,point:$,pointBytes:j}}function wt(x){return J(x).pointBytes}function B(x=new Uint8Array,...m){const v=wr(...m);return it(i(R(v,ue("context",x),!!o)))}function a(x,m,v={}){x=ue("message",x),o&&(x=o(x));const{prefix:p,scalar:u,pointBytes:w}=J(m),$=B(v.context,p,x),j=O.multiply($).toRawBytes(),V=B(v.context,j,w,x),et=Q($+V*u);z(et);const rt=wr(j,jr(et,e.BYTES));return ue("result",rt,c*2)}const h=Yc;function y(x,m,v,p=h){const{context:u,zip215:w}=p,$=e.BYTES;x=ue("signature",x,2*$),m=ue("message",m),o&&(m=o(m));const j=Mr(x.slice($,2*$));let V,et,rt;try{V=H.fromHex(v,w),et=H.fromHex(x.slice(0,$),w),rt=O.multiplyUnsafe(j)}catch{return!1}if(!w&&V.isSmallOrder())return!1;const ot=B(u,et.toRawBytes(),V.toRawBytes(),m);return et.add(V.multiplyUnsafe(ot)).subtract(rt).clearCofactor().equals(H.ZERO)}return O._setWindowSize(8),{CURVE:t,getPublicKey:wt,sign:a,verify:y,ExtendedPoint:H,utils:{getExtendedPublicKey:J,randomPrivateKey:()=>s(e.BYTES),precompute(x=8,m=H.BASE){return m._setWindowSize(x),m.multiply(BigInt(3)),m}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $i=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ko=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const Xc=BigInt(1),Bi=BigInt(2),Qc=BigInt(5),Mo=BigInt(10),tu=BigInt(20),eu=BigInt(40),Ro=BigInt(80);function ru(n){const t=$i,r=n*n%t*n%t,o=Ht(r,Bi,t)*r%t,i=Ht(o,Xc,t)*n%t,s=Ht(i,Qc,t)*i%t,c=Ht(s,Mo,t)*s%t,d=Ht(c,tu,t)*c%t,b=Ht(d,eu,t)*d%t,_=Ht(b,Ro,t)*b%t,k=Ht(_,Ro,t)*b%t,U=Ht(k,Mo,t)*s%t;return{pow_p_5_8:Ht(U,Bi,t)*n%t,b2:r}}function nu(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function iu(n,t){const e=$i,r=Dt(t*t*t,e),o=Dt(r*r*t,e),i=ru(n*o).pow_p_5_8;let s=Dt(n*r*i,e);const c=Dt(t*s*s,e),d=s,b=Dt(s*ko,e),_=c===n,k=c===Dt(-n,e),U=c===Dt(-n*ko,e);return _&&(s=d),(k||U)&&(s=b),zc(s,e)&&(s=Dt(-s,e)),{isValid:_||k,value:s}}const Xe=_s($i,void 0,!0),Hi={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Xe,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:bs,randomBytes:ys,adjustScalarBytes:nu,uvRatio:iu},Ki=zi(Hi);function ks(n,t,e){if(t.length>255)throw new Error("Context is too big");return ds(hs("SigEd25519 no Ed25519 collisions"),new Uint8Array([e?1:0,t.length]),t,n)}({...Hi});({...Hi});const ou=(Xe.ORDER+BigInt(3))/BigInt(8);Xe.pow(Bi,ou);Xe.sqrt(Xe.neg(Xe.ONE));(Xe.ORDER-BigInt(5))/BigInt(8);BigInt(486662);jc(Xe,Xe.neg(BigInt(486664)));BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235");BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578");BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838");BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var Wi={exports:{}};const su={},au=Object.freeze(Object.defineProperty({__proto__:null,default:su},Symbol.toStringTag,{value:"Module"})),cu=Fi(au);Wi.exports;(function(n){(function(t,e){function r(B,a){if(!B)throw new Error(a||"Assertion failed")}function o(B,a){B.super_=a;var h=function(){};h.prototype=a.prototype,B.prototype=new h,B.prototype.constructor=B}function i(B,a,h){if(i.isBN(B))return B;this.negative=0,this.words=null,this.length=0,this.red=null,B!==null&&((a==="le"||a==="be")&&(h=a,a=10),this._init(B||0,a||10,h||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var s;try{typeof window<"u"&&typeof window.Buffer<"u"?s=window.Buffer:s=cu.Buffer}catch{}i.isBN=function(a){return a instanceof i?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===i.wordSize&&Array.isArray(a.words)},i.max=function(a,h){return a.cmp(h)>0?a:h},i.min=function(a,h){return a.cmp(h)<0?a:h},i.prototype._init=function(a,h,y){if(typeof a=="number")return this._initNumber(a,h,y);if(typeof a=="object")return this._initArray(a,h,y);h==="hex"&&(h=16),r(h===(h|0)&&h>=2&&h<=36),a=a.toString().replace(/\s+/g,"");var E=0;a[0]==="-"&&(E++,this.negative=1),E<a.length&&(h===16?this._parseHex(a,E,y):(this._parseBase(a,h,E),y==="le"&&this._initArray(this.toArray(),h,y)))},i.prototype._initNumber=function(a,h,y){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(r(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),h,y)},i.prototype._initArray=function(a,h,y){if(r(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var x,m,v=0;if(y==="be")for(E=a.length-1,x=0;E>=0;E-=3)m=a[E]|a[E-1]<<8|a[E-2]<<16,this.words[x]|=m<<v&67108863,this.words[x+1]=m>>>26-v&67108863,v+=24,v>=26&&(v-=26,x++);else if(y==="le")for(E=0,x=0;E<a.length;E+=3)m=a[E]|a[E+1]<<8|a[E+2]<<16,this.words[x]|=m<<v&67108863,this.words[x+1]=m>>>26-v&67108863,v+=24,v>=26&&(v-=26,x++);return this._strip()};function c(B,a){var h=B.charCodeAt(a);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;r(!1,"Invalid character in "+B)}function d(B,a,h){var y=c(B,h);return h-1>=a&&(y|=c(B,h-1)<<4),y}i.prototype._parseHex=function(a,h,y){this.length=Math.ceil((a.length-h)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var x=0,m=0,v;if(y==="be")for(E=a.length-1;E>=h;E-=2)v=d(a,h,E)<<x,this.words[m]|=v&67108863,x>=18?(x-=18,m+=1,this.words[m]|=v>>>26):x+=8;else{var p=a.length-h;for(E=p%2===0?h+1:h;E<a.length;E+=2)v=d(a,h,E)<<x,this.words[m]|=v&67108863,x>=18?(x-=18,m+=1,this.words[m]|=v>>>26):x+=8}this._strip()};function b(B,a,h,y){for(var E=0,x=0,m=Math.min(B.length,h),v=a;v<m;v++){var p=B.charCodeAt(v)-48;E*=y,p>=49?x=p-49+10:p>=17?x=p-17+10:x=p,r(p>=0&&x<y,"Invalid character"),E+=x}return E}i.prototype._parseBase=function(a,h,y){this.words=[0],this.length=1;for(var E=0,x=1;x<=67108863;x*=h)E++;E--,x=x/h|0;for(var m=a.length-y,v=m%E,p=Math.min(m,m-v)+y,u=0,w=y;w<p;w+=E)u=b(a,w,w+E,h),this.imuln(x),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(v!==0){var $=1;for(u=b(a,w,a.length,h),w=0;w<v;w++)$*=h;this.imuln($),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},i.prototype.copy=function(a){a.words=new Array(this.length);for(var h=0;h<this.length;h++)a.words[h]=this.words[h];a.length=this.length,a.negative=this.negative,a.red=this.red};function _(B,a){B.words=a.words,B.length=a.length,B.negative=a.negative,B.red=a.red}if(i.prototype._move=function(a){_(a,this)},i.prototype.clone=function(){var a=new i(null);return this.copy(a),a},i.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=k}catch{i.prototype.inspect=k}else i.prototype.inspect=k;function k(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var U=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],R=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(a,h){a=a||10,h=h|0||1;var y;if(a===16||a==="hex"){y="";for(var E=0,x=0,m=0;m<this.length;m++){var v=this.words[m],p=((v<<E|x)&16777215).toString(16);x=v>>>24-E&16777215,E+=2,E>=26&&(E-=26,m--),x!==0||m!==this.length-1?y=U[6-p.length]+p+y:y=p+y}for(x!==0&&(y=x.toString(16)+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(a===(a|0)&&a>=2&&a<=36){var u=R[a],w=M[a];y="";var $=this.clone();for($.negative=0;!$.isZero();){var j=$.modrn(w).toString(a);$=$.idivn(w),$.isZero()?y=j+y:y=U[u-j.length]+j+y}for(this.isZero()&&(y="0"+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}r(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},i.prototype.toJSON=function(){return this.toString(16,2)},s&&(i.prototype.toBuffer=function(a,h){return this.toArrayLike(s,a,h)}),i.prototype.toArray=function(a,h){return this.toArrayLike(Array,a,h)};var A=function(a,h){return a.allocUnsafe?a.allocUnsafe(h):new a(h)};i.prototype.toArrayLike=function(a,h,y){this._strip();var E=this.byteLength(),x=y||Math.max(1,E);r(E<=x,"byte array longer than desired length"),r(x>0,"Requested array length <= 0");var m=A(a,x),v=h==="le"?"LE":"BE";return this["_toArrayLike"+v](m,E),m},i.prototype._toArrayLikeLE=function(a,h){for(var y=0,E=0,x=0,m=0;x<this.length;x++){var v=this.words[x]<<m|E;a[y++]=v&255,y<a.length&&(a[y++]=v>>8&255),y<a.length&&(a[y++]=v>>16&255),m===6?(y<a.length&&(a[y++]=v>>24&255),E=0,m=0):(E=v>>>24,m+=2)}if(y<a.length)for(a[y++]=E;y<a.length;)a[y++]=0},i.prototype._toArrayLikeBE=function(a,h){for(var y=a.length-1,E=0,x=0,m=0;x<this.length;x++){var v=this.words[x]<<m|E;a[y--]=v&255,y>=0&&(a[y--]=v>>8&255),y>=0&&(a[y--]=v>>16&255),m===6?(y>=0&&(a[y--]=v>>24&255),E=0,m=0):(E=v>>>24,m+=2)}if(y>=0)for(a[y--]=E;y>=0;)a[y--]=0},Math.clz32?i.prototype._countBits=function(a){return 32-Math.clz32(a)}:i.prototype._countBits=function(a){var h=a,y=0;return h>=4096&&(y+=13,h>>>=13),h>=64&&(y+=7,h>>>=7),h>=8&&(y+=4,h>>>=4),h>=2&&(y+=2,h>>>=2),y+h},i.prototype._zeroBits=function(a){if(a===0)return 26;var h=a,y=0;return h&8191||(y+=13,h>>>=13),h&127||(y+=7,h>>>=7),h&15||(y+=4,h>>>=4),h&3||(y+=2,h>>>=2),h&1||y++,y},i.prototype.bitLength=function(){var a=this.words[this.length-1],h=this._countBits(a);return(this.length-1)*26+h};function I(B){for(var a=new Array(B.bitLength()),h=0;h<a.length;h++){var y=h/26|0,E=h%26;a[h]=B.words[y]>>>E&1}return a}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,h=0;h<this.length;h++){var y=this._zeroBits(this.words[h]);if(a+=y,y!==26)break}return a},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},i.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var h=0;h<a.length;h++)this.words[h]=this.words[h]|a.words[h];return this._strip()},i.prototype.ior=function(a){return r((this.negative|a.negative)===0),this.iuor(a)},i.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},i.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},i.prototype.iuand=function(a){var h;this.length>a.length?h=a:h=this;for(var y=0;y<h.length;y++)this.words[y]=this.words[y]&a.words[y];return this.length=h.length,this._strip()},i.prototype.iand=function(a){return r((this.negative|a.negative)===0),this.iuand(a)},i.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},i.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},i.prototype.iuxor=function(a){var h,y;this.length>a.length?(h=this,y=a):(h=a,y=this);for(var E=0;E<y.length;E++)this.words[E]=h.words[E]^y.words[E];if(this!==h)for(;E<h.length;E++)this.words[E]=h.words[E];return this.length=h.length,this._strip()},i.prototype.ixor=function(a){return r((this.negative|a.negative)===0),this.iuxor(a)},i.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},i.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},i.prototype.inotn=function(a){r(typeof a=="number"&&a>=0);var h=Math.ceil(a/26)|0,y=a%26;this._expand(h),y>0&&h--;for(var E=0;E<h;E++)this.words[E]=~this.words[E]&67108863;return y>0&&(this.words[E]=~this.words[E]&67108863>>26-y),this._strip()},i.prototype.notn=function(a){return this.clone().inotn(a)},i.prototype.setn=function(a,h){r(typeof a=="number"&&a>=0);var y=a/26|0,E=a%26;return this._expand(y+1),h?this.words[y]=this.words[y]|1<<E:this.words[y]=this.words[y]&~(1<<E),this._strip()},i.prototype.iadd=function(a){var h;if(this.negative!==0&&a.negative===0)return this.negative=0,h=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,h=this.isub(a),a.negative=1,h._normSign();var y,E;this.length>a.length?(y=this,E=a):(y=a,E=this);for(var x=0,m=0;m<E.length;m++)h=(y.words[m]|0)+(E.words[m]|0)+x,this.words[m]=h&67108863,x=h>>>26;for(;x!==0&&m<y.length;m++)h=(y.words[m]|0)+x,this.words[m]=h&67108863,x=h>>>26;if(this.length=y.length,x!==0)this.words[this.length]=x,this.length++;else if(y!==this)for(;m<y.length;m++)this.words[m]=y.words[m];return this},i.prototype.add=function(a){var h;return a.negative!==0&&this.negative===0?(a.negative=0,h=this.sub(a),a.negative^=1,h):a.negative===0&&this.negative!==0?(this.negative=0,h=a.sub(this),this.negative=1,h):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},i.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var h=this.iadd(a);return a.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var y=this.cmp(a);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,x;y>0?(E=this,x=a):(E=a,x=this);for(var m=0,v=0;v<x.length;v++)h=(E.words[v]|0)-(x.words[v]|0)+m,m=h>>26,this.words[v]=h&67108863;for(;m!==0&&v<E.length;v++)h=(E.words[v]|0)+m,m=h>>26,this.words[v]=h&67108863;if(m===0&&v<E.length&&E!==this)for(;v<E.length;v++)this.words[v]=E.words[v];return this.length=Math.max(this.length,v),E!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(a){return this.clone().isub(a)};function T(B,a,h){h.negative=a.negative^B.negative;var y=B.length+a.length|0;h.length=y,y=y-1|0;var E=B.words[0]|0,x=a.words[0]|0,m=E*x,v=m&67108863,p=m/67108864|0;h.words[0]=v;for(var u=1;u<y;u++){for(var w=p>>>26,$=p&67108863,j=Math.min(u,a.length-1),V=Math.max(0,u-B.length+1);V<=j;V++){var et=u-V|0;E=B.words[et]|0,x=a.words[V]|0,m=E*x+$,w+=m/67108864|0,$=m&67108863}h.words[u]=$|0,p=w|0}return p!==0?h.words[u]=p|0:h.length--,h._strip()}var z=function(a,h,y){var E=a.words,x=h.words,m=y.words,v=0,p,u,w,$=E[0]|0,j=$&8191,V=$>>>13,et=E[1]|0,rt=et&8191,ot=et>>>13,_t=E[2]|0,gt=_t&8191,bt=_t>>>13,Bt=E[3]|0,vt=Bt&8191,It=Bt>>>13,De=E[4]|0,Mt=De&8191,Pt=De>>>13,Sr=E[5]|0,Ct=Sr&8191,Rt=Sr>>>13,ge=E[6]|0,Lt=ge&8191,Tt=ge>>>13,Se=E[7]|0,Ut=Se&8191,g=Se>>>13,f=E[8]|0,l=f&8191,S=f>>>13,L=E[9]|0,F=L&8191,q=L>>>13,pt=x[0]|0,ht=pt&8191,lt=pt>>>13,Ft=x[1]|0,ut=Ft&8191,Wt=Ft>>>13,go=x[2]|0,jt=go&8191,Gt=go>>>13,yo=x[3]|0,Vt=yo&8191,Zt=yo>>>13,mo=x[4]|0,Yt=mo&8191,Jt=mo>>>13,wo=x[5]|0,Xt=wo&8191,Qt=wo>>>13,bo=x[6]|0,te=bo&8191,ee=bo>>>13,vo=x[7]|0,re=vo&8191,ne=vo>>>13,xo=x[8]|0,ie=xo&8191,oe=xo>>>13,Eo=x[9]|0,se=Eo&8191,ae=Eo>>>13;y.negative=a.negative^h.negative,y.length=19,p=Math.imul(j,ht),u=Math.imul(j,lt),u=u+Math.imul(V,ht)|0,w=Math.imul(V,lt);var kn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(kn>>>26)|0,kn&=67108863,p=Math.imul(rt,ht),u=Math.imul(rt,lt),u=u+Math.imul(ot,ht)|0,w=Math.imul(ot,lt),p=p+Math.imul(j,ut)|0,u=u+Math.imul(j,Wt)|0,u=u+Math.imul(V,ut)|0,w=w+Math.imul(V,Wt)|0;var Mn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(Mn>>>26)|0,Mn&=67108863,p=Math.imul(gt,ht),u=Math.imul(gt,lt),u=u+Math.imul(bt,ht)|0,w=Math.imul(bt,lt),p=p+Math.imul(rt,ut)|0,u=u+Math.imul(rt,Wt)|0,u=u+Math.imul(ot,ut)|0,w=w+Math.imul(ot,Wt)|0,p=p+Math.imul(j,jt)|0,u=u+Math.imul(j,Gt)|0,u=u+Math.imul(V,jt)|0,w=w+Math.imul(V,Gt)|0;var Rn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,p=Math.imul(vt,ht),u=Math.imul(vt,lt),u=u+Math.imul(It,ht)|0,w=Math.imul(It,lt),p=p+Math.imul(gt,ut)|0,u=u+Math.imul(gt,Wt)|0,u=u+Math.imul(bt,ut)|0,w=w+Math.imul(bt,Wt)|0,p=p+Math.imul(rt,jt)|0,u=u+Math.imul(rt,Gt)|0,u=u+Math.imul(ot,jt)|0,w=w+Math.imul(ot,Gt)|0,p=p+Math.imul(j,Vt)|0,u=u+Math.imul(j,Zt)|0,u=u+Math.imul(V,Vt)|0,w=w+Math.imul(V,Zt)|0;var Ln=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(Ln>>>26)|0,Ln&=67108863,p=Math.imul(Mt,ht),u=Math.imul(Mt,lt),u=u+Math.imul(Pt,ht)|0,w=Math.imul(Pt,lt),p=p+Math.imul(vt,ut)|0,u=u+Math.imul(vt,Wt)|0,u=u+Math.imul(It,ut)|0,w=w+Math.imul(It,Wt)|0,p=p+Math.imul(gt,jt)|0,u=u+Math.imul(gt,Gt)|0,u=u+Math.imul(bt,jt)|0,w=w+Math.imul(bt,Gt)|0,p=p+Math.imul(rt,Vt)|0,u=u+Math.imul(rt,Zt)|0,u=u+Math.imul(ot,Vt)|0,w=w+Math.imul(ot,Zt)|0,p=p+Math.imul(j,Yt)|0,u=u+Math.imul(j,Jt)|0,u=u+Math.imul(V,Yt)|0,w=w+Math.imul(V,Jt)|0;var Tn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,p=Math.imul(Ct,ht),u=Math.imul(Ct,lt),u=u+Math.imul(Rt,ht)|0,w=Math.imul(Rt,lt),p=p+Math.imul(Mt,ut)|0,u=u+Math.imul(Mt,Wt)|0,u=u+Math.imul(Pt,ut)|0,w=w+Math.imul(Pt,Wt)|0,p=p+Math.imul(vt,jt)|0,u=u+Math.imul(vt,Gt)|0,u=u+Math.imul(It,jt)|0,w=w+Math.imul(It,Gt)|0,p=p+Math.imul(gt,Vt)|0,u=u+Math.imul(gt,Zt)|0,u=u+Math.imul(bt,Vt)|0,w=w+Math.imul(bt,Zt)|0,p=p+Math.imul(rt,Yt)|0,u=u+Math.imul(rt,Jt)|0,u=u+Math.imul(ot,Yt)|0,w=w+Math.imul(ot,Jt)|0,p=p+Math.imul(j,Xt)|0,u=u+Math.imul(j,Qt)|0,u=u+Math.imul(V,Xt)|0,w=w+Math.imul(V,Qt)|0;var Cn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(Cn>>>26)|0,Cn&=67108863,p=Math.imul(Lt,ht),u=Math.imul(Lt,lt),u=u+Math.imul(Tt,ht)|0,w=Math.imul(Tt,lt),p=p+Math.imul(Ct,ut)|0,u=u+Math.imul(Ct,Wt)|0,u=u+Math.imul(Rt,ut)|0,w=w+Math.imul(Rt,Wt)|0,p=p+Math.imul(Mt,jt)|0,u=u+Math.imul(Mt,Gt)|0,u=u+Math.imul(Pt,jt)|0,w=w+Math.imul(Pt,Gt)|0,p=p+Math.imul(vt,Vt)|0,u=u+Math.imul(vt,Zt)|0,u=u+Math.imul(It,Vt)|0,w=w+Math.imul(It,Zt)|0,p=p+Math.imul(gt,Yt)|0,u=u+Math.imul(gt,Jt)|0,u=u+Math.imul(bt,Yt)|0,w=w+Math.imul(bt,Jt)|0,p=p+Math.imul(rt,Xt)|0,u=u+Math.imul(rt,Qt)|0,u=u+Math.imul(ot,Xt)|0,w=w+Math.imul(ot,Qt)|0,p=p+Math.imul(j,te)|0,u=u+Math.imul(j,ee)|0,u=u+Math.imul(V,te)|0,w=w+Math.imul(V,ee)|0;var Un=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(Un>>>26)|0,Un&=67108863,p=Math.imul(Ut,ht),u=Math.imul(Ut,lt),u=u+Math.imul(g,ht)|0,w=Math.imul(g,lt),p=p+Math.imul(Lt,ut)|0,u=u+Math.imul(Lt,Wt)|0,u=u+Math.imul(Tt,ut)|0,w=w+Math.imul(Tt,Wt)|0,p=p+Math.imul(Ct,jt)|0,u=u+Math.imul(Ct,Gt)|0,u=u+Math.imul(Rt,jt)|0,w=w+Math.imul(Rt,Gt)|0,p=p+Math.imul(Mt,Vt)|0,u=u+Math.imul(Mt,Zt)|0,u=u+Math.imul(Pt,Vt)|0,w=w+Math.imul(Pt,Zt)|0,p=p+Math.imul(vt,Yt)|0,u=u+Math.imul(vt,Jt)|0,u=u+Math.imul(It,Yt)|0,w=w+Math.imul(It,Jt)|0,p=p+Math.imul(gt,Xt)|0,u=u+Math.imul(gt,Qt)|0,u=u+Math.imul(bt,Xt)|0,w=w+Math.imul(bt,Qt)|0,p=p+Math.imul(rt,te)|0,u=u+Math.imul(rt,ee)|0,u=u+Math.imul(ot,te)|0,w=w+Math.imul(ot,ee)|0,p=p+Math.imul(j,re)|0,u=u+Math.imul(j,ne)|0,u=u+Math.imul(V,re)|0,w=w+Math.imul(V,ne)|0;var Fn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(Fn>>>26)|0,Fn&=67108863,p=Math.imul(l,ht),u=Math.imul(l,lt),u=u+Math.imul(S,ht)|0,w=Math.imul(S,lt),p=p+Math.imul(Ut,ut)|0,u=u+Math.imul(Ut,Wt)|0,u=u+Math.imul(g,ut)|0,w=w+Math.imul(g,Wt)|0,p=p+Math.imul(Lt,jt)|0,u=u+Math.imul(Lt,Gt)|0,u=u+Math.imul(Tt,jt)|0,w=w+Math.imul(Tt,Gt)|0,p=p+Math.imul(Ct,Vt)|0,u=u+Math.imul(Ct,Zt)|0,u=u+Math.imul(Rt,Vt)|0,w=w+Math.imul(Rt,Zt)|0,p=p+Math.imul(Mt,Yt)|0,u=u+Math.imul(Mt,Jt)|0,u=u+Math.imul(Pt,Yt)|0,w=w+Math.imul(Pt,Jt)|0,p=p+Math.imul(vt,Xt)|0,u=u+Math.imul(vt,Qt)|0,u=u+Math.imul(It,Xt)|0,w=w+Math.imul(It,Qt)|0,p=p+Math.imul(gt,te)|0,u=u+Math.imul(gt,ee)|0,u=u+Math.imul(bt,te)|0,w=w+Math.imul(bt,ee)|0,p=p+Math.imul(rt,re)|0,u=u+Math.imul(rt,ne)|0,u=u+Math.imul(ot,re)|0,w=w+Math.imul(ot,ne)|0,p=p+Math.imul(j,ie)|0,u=u+Math.imul(j,oe)|0,u=u+Math.imul(V,ie)|0,w=w+Math.imul(V,oe)|0;var On=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(On>>>26)|0,On&=67108863,p=Math.imul(F,ht),u=Math.imul(F,lt),u=u+Math.imul(q,ht)|0,w=Math.imul(q,lt),p=p+Math.imul(l,ut)|0,u=u+Math.imul(l,Wt)|0,u=u+Math.imul(S,ut)|0,w=w+Math.imul(S,Wt)|0,p=p+Math.imul(Ut,jt)|0,u=u+Math.imul(Ut,Gt)|0,u=u+Math.imul(g,jt)|0,w=w+Math.imul(g,Gt)|0,p=p+Math.imul(Lt,Vt)|0,u=u+Math.imul(Lt,Zt)|0,u=u+Math.imul(Tt,Vt)|0,w=w+Math.imul(Tt,Zt)|0,p=p+Math.imul(Ct,Yt)|0,u=u+Math.imul(Ct,Jt)|0,u=u+Math.imul(Rt,Yt)|0,w=w+Math.imul(Rt,Jt)|0,p=p+Math.imul(Mt,Xt)|0,u=u+Math.imul(Mt,Qt)|0,u=u+Math.imul(Pt,Xt)|0,w=w+Math.imul(Pt,Qt)|0,p=p+Math.imul(vt,te)|0,u=u+Math.imul(vt,ee)|0,u=u+Math.imul(It,te)|0,w=w+Math.imul(It,ee)|0,p=p+Math.imul(gt,re)|0,u=u+Math.imul(gt,ne)|0,u=u+Math.imul(bt,re)|0,w=w+Math.imul(bt,ne)|0,p=p+Math.imul(rt,ie)|0,u=u+Math.imul(rt,oe)|0,u=u+Math.imul(ot,ie)|0,w=w+Math.imul(ot,oe)|0,p=p+Math.imul(j,se)|0,u=u+Math.imul(j,ae)|0,u=u+Math.imul(V,se)|0,w=w+Math.imul(V,ae)|0;var Pn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(Pn>>>26)|0,Pn&=67108863,p=Math.imul(F,ut),u=Math.imul(F,Wt),u=u+Math.imul(q,ut)|0,w=Math.imul(q,Wt),p=p+Math.imul(l,jt)|0,u=u+Math.imul(l,Gt)|0,u=u+Math.imul(S,jt)|0,w=w+Math.imul(S,Gt)|0,p=p+Math.imul(Ut,Vt)|0,u=u+Math.imul(Ut,Zt)|0,u=u+Math.imul(g,Vt)|0,w=w+Math.imul(g,Zt)|0,p=p+Math.imul(Lt,Yt)|0,u=u+Math.imul(Lt,Jt)|0,u=u+Math.imul(Tt,Yt)|0,w=w+Math.imul(Tt,Jt)|0,p=p+Math.imul(Ct,Xt)|0,u=u+Math.imul(Ct,Qt)|0,u=u+Math.imul(Rt,Xt)|0,w=w+Math.imul(Rt,Qt)|0,p=p+Math.imul(Mt,te)|0,u=u+Math.imul(Mt,ee)|0,u=u+Math.imul(Pt,te)|0,w=w+Math.imul(Pt,ee)|0,p=p+Math.imul(vt,re)|0,u=u+Math.imul(vt,ne)|0,u=u+Math.imul(It,re)|0,w=w+Math.imul(It,ne)|0,p=p+Math.imul(gt,ie)|0,u=u+Math.imul(gt,oe)|0,u=u+Math.imul(bt,ie)|0,w=w+Math.imul(bt,oe)|0,p=p+Math.imul(rt,se)|0,u=u+Math.imul(rt,ae)|0,u=u+Math.imul(ot,se)|0,w=w+Math.imul(ot,ae)|0;var Nn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(Nn>>>26)|0,Nn&=67108863,p=Math.imul(F,jt),u=Math.imul(F,Gt),u=u+Math.imul(q,jt)|0,w=Math.imul(q,Gt),p=p+Math.imul(l,Vt)|0,u=u+Math.imul(l,Zt)|0,u=u+Math.imul(S,Vt)|0,w=w+Math.imul(S,Zt)|0,p=p+Math.imul(Ut,Yt)|0,u=u+Math.imul(Ut,Jt)|0,u=u+Math.imul(g,Yt)|0,w=w+Math.imul(g,Jt)|0,p=p+Math.imul(Lt,Xt)|0,u=u+Math.imul(Lt,Qt)|0,u=u+Math.imul(Tt,Xt)|0,w=w+Math.imul(Tt,Qt)|0,p=p+Math.imul(Ct,te)|0,u=u+Math.imul(Ct,ee)|0,u=u+Math.imul(Rt,te)|0,w=w+Math.imul(Rt,ee)|0,p=p+Math.imul(Mt,re)|0,u=u+Math.imul(Mt,ne)|0,u=u+Math.imul(Pt,re)|0,w=w+Math.imul(Pt,ne)|0,p=p+Math.imul(vt,ie)|0,u=u+Math.imul(vt,oe)|0,u=u+Math.imul(It,ie)|0,w=w+Math.imul(It,oe)|0,p=p+Math.imul(gt,se)|0,u=u+Math.imul(gt,ae)|0,u=u+Math.imul(bt,se)|0,w=w+Math.imul(bt,ae)|0;var qn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(qn>>>26)|0,qn&=67108863,p=Math.imul(F,Vt),u=Math.imul(F,Zt),u=u+Math.imul(q,Vt)|0,w=Math.imul(q,Zt),p=p+Math.imul(l,Yt)|0,u=u+Math.imul(l,Jt)|0,u=u+Math.imul(S,Yt)|0,w=w+Math.imul(S,Jt)|0,p=p+Math.imul(Ut,Xt)|0,u=u+Math.imul(Ut,Qt)|0,u=u+Math.imul(g,Xt)|0,w=w+Math.imul(g,Qt)|0,p=p+Math.imul(Lt,te)|0,u=u+Math.imul(Lt,ee)|0,u=u+Math.imul(Tt,te)|0,w=w+Math.imul(Tt,ee)|0,p=p+Math.imul(Ct,re)|0,u=u+Math.imul(Ct,ne)|0,u=u+Math.imul(Rt,re)|0,w=w+Math.imul(Rt,ne)|0,p=p+Math.imul(Mt,ie)|0,u=u+Math.imul(Mt,oe)|0,u=u+Math.imul(Pt,ie)|0,w=w+Math.imul(Pt,oe)|0,p=p+Math.imul(vt,se)|0,u=u+Math.imul(vt,ae)|0,u=u+Math.imul(It,se)|0,w=w+Math.imul(It,ae)|0;var Dn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,p=Math.imul(F,Yt),u=Math.imul(F,Jt),u=u+Math.imul(q,Yt)|0,w=Math.imul(q,Jt),p=p+Math.imul(l,Xt)|0,u=u+Math.imul(l,Qt)|0,u=u+Math.imul(S,Xt)|0,w=w+Math.imul(S,Qt)|0,p=p+Math.imul(Ut,te)|0,u=u+Math.imul(Ut,ee)|0,u=u+Math.imul(g,te)|0,w=w+Math.imul(g,ee)|0,p=p+Math.imul(Lt,re)|0,u=u+Math.imul(Lt,ne)|0,u=u+Math.imul(Tt,re)|0,w=w+Math.imul(Tt,ne)|0,p=p+Math.imul(Ct,ie)|0,u=u+Math.imul(Ct,oe)|0,u=u+Math.imul(Rt,ie)|0,w=w+Math.imul(Rt,oe)|0,p=p+Math.imul(Mt,se)|0,u=u+Math.imul(Mt,ae)|0,u=u+Math.imul(Pt,se)|0,w=w+Math.imul(Pt,ae)|0;var zn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(zn>>>26)|0,zn&=67108863,p=Math.imul(F,Xt),u=Math.imul(F,Qt),u=u+Math.imul(q,Xt)|0,w=Math.imul(q,Qt),p=p+Math.imul(l,te)|0,u=u+Math.imul(l,ee)|0,u=u+Math.imul(S,te)|0,w=w+Math.imul(S,ee)|0,p=p+Math.imul(Ut,re)|0,u=u+Math.imul(Ut,ne)|0,u=u+Math.imul(g,re)|0,w=w+Math.imul(g,ne)|0,p=p+Math.imul(Lt,ie)|0,u=u+Math.imul(Lt,oe)|0,u=u+Math.imul(Tt,ie)|0,w=w+Math.imul(Tt,oe)|0,p=p+Math.imul(Ct,se)|0,u=u+Math.imul(Ct,ae)|0,u=u+Math.imul(Rt,se)|0,w=w+Math.imul(Rt,ae)|0;var $n=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+($n>>>26)|0,$n&=67108863,p=Math.imul(F,te),u=Math.imul(F,ee),u=u+Math.imul(q,te)|0,w=Math.imul(q,ee),p=p+Math.imul(l,re)|0,u=u+Math.imul(l,ne)|0,u=u+Math.imul(S,re)|0,w=w+Math.imul(S,ne)|0,p=p+Math.imul(Ut,ie)|0,u=u+Math.imul(Ut,oe)|0,u=u+Math.imul(g,ie)|0,w=w+Math.imul(g,oe)|0,p=p+Math.imul(Lt,se)|0,u=u+Math.imul(Lt,ae)|0,u=u+Math.imul(Tt,se)|0,w=w+Math.imul(Tt,ae)|0;var Hn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(Hn>>>26)|0,Hn&=67108863,p=Math.imul(F,re),u=Math.imul(F,ne),u=u+Math.imul(q,re)|0,w=Math.imul(q,ne),p=p+Math.imul(l,ie)|0,u=u+Math.imul(l,oe)|0,u=u+Math.imul(S,ie)|0,w=w+Math.imul(S,oe)|0,p=p+Math.imul(Ut,se)|0,u=u+Math.imul(Ut,ae)|0,u=u+Math.imul(g,se)|0,w=w+Math.imul(g,ae)|0;var Kn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(Kn>>>26)|0,Kn&=67108863,p=Math.imul(F,ie),u=Math.imul(F,oe),u=u+Math.imul(q,ie)|0,w=Math.imul(q,oe),p=p+Math.imul(l,se)|0,u=u+Math.imul(l,ae)|0,u=u+Math.imul(S,se)|0,w=w+Math.imul(S,ae)|0;var Wn=(v+p|0)+((u&8191)<<13)|0;v=(w+(u>>>13)|0)+(Wn>>>26)|0,Wn&=67108863,p=Math.imul(F,se),u=Math.imul(F,ae),u=u+Math.imul(q,se)|0,w=Math.imul(q,ae);var jn=(v+p|0)+((u&8191)<<13)|0;return v=(w+(u>>>13)|0)+(jn>>>26)|0,jn&=67108863,m[0]=kn,m[1]=Mn,m[2]=Rn,m[3]=Ln,m[4]=Tn,m[5]=Cn,m[6]=Un,m[7]=Fn,m[8]=On,m[9]=Pn,m[10]=Nn,m[11]=qn,m[12]=Dn,m[13]=zn,m[14]=$n,m[15]=Hn,m[16]=Kn,m[17]=Wn,m[18]=jn,v!==0&&(m[19]=v,y.length++),y};Math.imul||(z=T);function C(B,a,h){h.negative=a.negative^B.negative,h.length=B.length+a.length;for(var y=0,E=0,x=0;x<h.length-1;x++){var m=E;E=0;for(var v=y&67108863,p=Math.min(x,a.length-1),u=Math.max(0,x-B.length+1);u<=p;u++){var w=x-u,$=B.words[w]|0,j=a.words[u]|0,V=$*j,et=V&67108863;m=m+(V/67108864|0)|0,et=et+v|0,v=et&67108863,m=m+(et>>>26)|0,E+=m>>>26,m&=67108863}h.words[x]=v,y=m,m=E}return y!==0?h.words[x]=y:h.length--,h._strip()}function D(B,a,h){return C(B,a,h)}i.prototype.mulTo=function(a,h){var y,E=this.length+a.length;return this.length===10&&a.length===10?y=z(this,a,h):E<63?y=T(this,a,h):E<1024?y=C(this,a,h):y=D(this,a,h),y},i.prototype.mul=function(a){var h=new i(null);return h.words=new Array(this.length+a.length),this.mulTo(a,h)},i.prototype.mulf=function(a){var h=new i(null);return h.words=new Array(this.length+a.length),D(this,a,h)},i.prototype.imul=function(a){return this.clone().mulTo(a,this)},i.prototype.imuln=function(a){var h=a<0;h&&(a=-a),r(typeof a=="number"),r(a<67108864);for(var y=0,E=0;E<this.length;E++){var x=(this.words[E]|0)*a,m=(x&67108863)+(y&67108863);y>>=26,y+=x/67108864|0,y+=m>>>26,this.words[E]=m&67108863}return y!==0&&(this.words[E]=y,this.length++),h?this.ineg():this},i.prototype.muln=function(a){return this.clone().imuln(a)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(a){var h=I(a);if(h.length===0)return new i(1);for(var y=this,E=0;E<h.length&&h[E]===0;E++,y=y.sqr());if(++E<h.length)for(var x=y.sqr();E<h.length;E++,x=x.sqr())h[E]!==0&&(y=y.mul(x));return y},i.prototype.iushln=function(a){r(typeof a=="number"&&a>=0);var h=a%26,y=(a-h)/26,E=67108863>>>26-h<<26-h,x;if(h!==0){var m=0;for(x=0;x<this.length;x++){var v=this.words[x]&E,p=(this.words[x]|0)-v<<h;this.words[x]=p|m,m=v>>>26-h}m&&(this.words[x]=m,this.length++)}if(y!==0){for(x=this.length-1;x>=0;x--)this.words[x+y]=this.words[x];for(x=0;x<y;x++)this.words[x]=0;this.length+=y}return this._strip()},i.prototype.ishln=function(a){return r(this.negative===0),this.iushln(a)},i.prototype.iushrn=function(a,h,y){r(typeof a=="number"&&a>=0);var E;h?E=(h-h%26)/26:E=0;var x=a%26,m=Math.min((a-x)/26,this.length),v=67108863^67108863>>>x<<x,p=y;if(E-=m,E=Math.max(0,E),p){for(var u=0;u<m;u++)p.words[u]=this.words[u];p.length=m}if(m!==0)if(this.length>m)for(this.length-=m,u=0;u<this.length;u++)this.words[u]=this.words[u+m];else this.words[0]=0,this.length=1;var w=0;for(u=this.length-1;u>=0&&(w!==0||u>=E);u--){var $=this.words[u]|0;this.words[u]=w<<26-x|$>>>x,w=$&v}return p&&w!==0&&(p.words[p.length++]=w),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(a,h,y){return r(this.negative===0),this.iushrn(a,h,y)},i.prototype.shln=function(a){return this.clone().ishln(a)},i.prototype.ushln=function(a){return this.clone().iushln(a)},i.prototype.shrn=function(a){return this.clone().ishrn(a)},i.prototype.ushrn=function(a){return this.clone().iushrn(a)},i.prototype.testn=function(a){r(typeof a=="number"&&a>=0);var h=a%26,y=(a-h)/26,E=1<<h;if(this.length<=y)return!1;var x=this.words[y];return!!(x&E)},i.prototype.imaskn=function(a){r(typeof a=="number"&&a>=0);var h=a%26,y=(a-h)/26;if(r(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(h!==0&&y++,this.length=Math.min(y,this.length),h!==0){var E=67108863^67108863>>>h<<h;this.words[this.length-1]&=E}return this._strip()},i.prototype.maskn=function(a){return this.clone().imaskn(a)},i.prototype.iaddn=function(a){return r(typeof a=="number"),r(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},i.prototype._iaddn=function(a){this.words[0]+=a;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(a){if(r(typeof a=="number"),r(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(a){return this.clone().iaddn(a)},i.prototype.subn=function(a){return this.clone().isubn(a)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(a,h,y){var E=a.length+y,x;this._expand(E);var m,v=0;for(x=0;x<a.length;x++){m=(this.words[x+y]|0)+v;var p=(a.words[x]|0)*h;m-=p&67108863,v=(m>>26)-(p/67108864|0),this.words[x+y]=m&67108863}for(;x<this.length-y;x++)m=(this.words[x+y]|0)+v,v=m>>26,this.words[x+y]=m&67108863;if(v===0)return this._strip();for(r(v===-1),v=0,x=0;x<this.length;x++)m=-(this.words[x]|0)+v,v=m>>26,this.words[x]=m&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(a,h){var y=this.length-a.length,E=this.clone(),x=a,m=x.words[x.length-1]|0,v=this._countBits(m);y=26-v,y!==0&&(x=x.ushln(y),E.iushln(y),m=x.words[x.length-1]|0);var p=E.length-x.length,u;if(h!=="mod"){u=new i(null),u.length=p+1,u.words=new Array(u.length);for(var w=0;w<u.length;w++)u.words[w]=0}var $=E.clone()._ishlnsubmul(x,1,p);$.negative===0&&(E=$,u&&(u.words[p]=1));for(var j=p-1;j>=0;j--){var V=(E.words[x.length+j]|0)*67108864+(E.words[x.length+j-1]|0);for(V=Math.min(V/m|0,67108863),E._ishlnsubmul(x,V,j);E.negative!==0;)V--,E.negative=0,E._ishlnsubmul(x,1,j),E.isZero()||(E.negative^=1);u&&(u.words[j]=V)}return u&&u._strip(),E._strip(),h!=="div"&&y!==0&&E.iushrn(y),{div:u||null,mod:E}},i.prototype.divmod=function(a,h,y){if(r(!a.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var E,x,m;return this.negative!==0&&a.negative===0?(m=this.neg().divmod(a,h),h!=="mod"&&(E=m.div.neg()),h!=="div"&&(x=m.mod.neg(),y&&x.negative!==0&&x.iadd(a)),{div:E,mod:x}):this.negative===0&&a.negative!==0?(m=this.divmod(a.neg(),h),h!=="mod"&&(E=m.div.neg()),{div:E,mod:m.mod}):this.negative&a.negative?(m=this.neg().divmod(a.neg(),h),h!=="div"&&(x=m.mod.neg(),y&&x.negative!==0&&x.isub(a)),{div:m.div,mod:x}):a.length>this.length||this.cmp(a)<0?{div:new i(0),mod:this}:a.length===1?h==="div"?{div:this.divn(a.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new i(this.modrn(a.words[0]))}:this._wordDiv(a,h)},i.prototype.div=function(a){return this.divmod(a,"div",!1).div},i.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},i.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},i.prototype.divRound=function(a){var h=this.divmod(a);if(h.mod.isZero())return h.div;var y=h.div.negative!==0?h.mod.isub(a):h.mod,E=a.ushrn(1),x=a.andln(1),m=y.cmp(E);return m<0||x===1&&m===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(a){var h=a<0;h&&(a=-a),r(a<=67108863);for(var y=(1<<26)%a,E=0,x=this.length-1;x>=0;x--)E=(y*E+(this.words[x]|0))%a;return h?-E:E},i.prototype.modn=function(a){return this.modrn(a)},i.prototype.idivn=function(a){var h=a<0;h&&(a=-a),r(a<=67108863);for(var y=0,E=this.length-1;E>=0;E--){var x=(this.words[E]|0)+y*67108864;this.words[E]=x/a|0,y=x%a}return this._strip(),h?this.ineg():this},i.prototype.divn=function(a){return this.clone().idivn(a)},i.prototype.egcd=function(a){r(a.negative===0),r(!a.isZero());var h=this,y=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var E=new i(1),x=new i(0),m=new i(0),v=new i(1),p=0;h.isEven()&&y.isEven();)h.iushrn(1),y.iushrn(1),++p;for(var u=y.clone(),w=h.clone();!h.isZero();){for(var $=0,j=1;!(h.words[0]&j)&&$<26;++$,j<<=1);if($>0)for(h.iushrn($);$-- >0;)(E.isOdd()||x.isOdd())&&(E.iadd(u),x.isub(w)),E.iushrn(1),x.iushrn(1);for(var V=0,et=1;!(y.words[0]&et)&&V<26;++V,et<<=1);if(V>0)for(y.iushrn(V);V-- >0;)(m.isOdd()||v.isOdd())&&(m.iadd(u),v.isub(w)),m.iushrn(1),v.iushrn(1);h.cmp(y)>=0?(h.isub(y),E.isub(m),x.isub(v)):(y.isub(h),m.isub(E),v.isub(x))}return{a:m,b:v,gcd:y.iushln(p)}},i.prototype._invmp=function(a){r(a.negative===0),r(!a.isZero());var h=this,y=a.clone();h.negative!==0?h=h.umod(a):h=h.clone();for(var E=new i(1),x=new i(0),m=y.clone();h.cmpn(1)>0&&y.cmpn(1)>0;){for(var v=0,p=1;!(h.words[0]&p)&&v<26;++v,p<<=1);if(v>0)for(h.iushrn(v);v-- >0;)E.isOdd()&&E.iadd(m),E.iushrn(1);for(var u=0,w=1;!(y.words[0]&w)&&u<26;++u,w<<=1);if(u>0)for(y.iushrn(u);u-- >0;)x.isOdd()&&x.iadd(m),x.iushrn(1);h.cmp(y)>=0?(h.isub(y),E.isub(x)):(y.isub(h),x.isub(E))}var $;return h.cmpn(1)===0?$=E:$=x,$.cmpn(0)<0&&$.iadd(a),$},i.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var h=this.clone(),y=a.clone();h.negative=0,y.negative=0;for(var E=0;h.isEven()&&y.isEven();E++)h.iushrn(1),y.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;y.isEven();)y.iushrn(1);var x=h.cmp(y);if(x<0){var m=h;h=y,y=m}else if(x===0||y.cmpn(1)===0)break;h.isub(y)}while(!0);return y.iushln(E)},i.prototype.invm=function(a){return this.egcd(a).a.umod(a)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(a){return this.words[0]&a},i.prototype.bincn=function(a){r(typeof a=="number");var h=a%26,y=(a-h)/26,E=1<<h;if(this.length<=y)return this._expand(y+1),this.words[y]|=E,this;for(var x=E,m=y;x!==0&&m<this.length;m++){var v=this.words[m]|0;v+=x,x=v>>>26,v&=67108863,this.words[m]=v}return x!==0&&(this.words[m]=x,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(a){var h=a<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var y;if(this.length>1)y=1;else{h&&(a=-a),r(a<=67108863,"Number is too big");var E=this.words[0]|0;y=E===a?0:E<a?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var h=this.ucmp(a);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var h=0,y=this.length-1;y>=0;y--){var E=this.words[y]|0,x=a.words[y]|0;if(E!==x){E<x?h=-1:E>x&&(h=1);break}}return h},i.prototype.gtn=function(a){return this.cmpn(a)===1},i.prototype.gt=function(a){return this.cmp(a)===1},i.prototype.gten=function(a){return this.cmpn(a)>=0},i.prototype.gte=function(a){return this.cmp(a)>=0},i.prototype.ltn=function(a){return this.cmpn(a)===-1},i.prototype.lt=function(a){return this.cmp(a)===-1},i.prototype.lten=function(a){return this.cmpn(a)<=0},i.prototype.lte=function(a){return this.cmp(a)<=0},i.prototype.eqn=function(a){return this.cmpn(a)===0},i.prototype.eq=function(a){return this.cmp(a)===0},i.red=function(a){return new J(a)},i.prototype.toRed=function(a){return r(!this.red,"Already a number in reduction context"),r(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},i.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(a){return this.red=a,this},i.prototype.forceRed=function(a){return r(!this.red,"Already a number in reduction context"),this._forceRed(a)},i.prototype.redAdd=function(a){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},i.prototype.redIAdd=function(a){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},i.prototype.redSub=function(a){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},i.prototype.redISub=function(a){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},i.prototype.redShl=function(a){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},i.prototype.redMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},i.prototype.redIMul=function(a){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},i.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(a){return r(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var H={k256:null,p224:null,p192:null,p25519:null};function O(B,a){this.name=B,this.p=new i(a,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}O.prototype._tmp=function(){var a=new i(null);return a.words=new Array(Math.ceil(this.n/13)),a},O.prototype.ireduce=function(a){var h=a,y;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),y=h.bitLength();while(y>this.n);var E=y<this.n?-1:h.ucmp(this.p);return E===0?(h.words[0]=0,h.length=1):E>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},O.prototype.split=function(a,h){a.iushrn(this.n,0,h)},O.prototype.imulK=function(a){return a.imul(this.k)};function W(){O.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(W,O),W.prototype.split=function(a,h){for(var y=4194303,E=Math.min(a.length,9),x=0;x<E;x++)h.words[x]=a.words[x];if(h.length=E,a.length<=9){a.words[0]=0,a.length=1;return}var m=a.words[9];for(h.words[h.length++]=m&y,x=10;x<a.length;x++){var v=a.words[x]|0;a.words[x-10]=(v&y)<<4|m>>>22,m=v}m>>>=22,a.words[x-10]=m,m===0&&a.length>10?a.length-=10:a.length-=9},W.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var h=0,y=0;y<a.length;y++){var E=a.words[y]|0;h+=E*977,a.words[y]=h&67108863,h=E*64+(h/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function K(){O.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(K,O);function Q(){O.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Q,O);function it(){O.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(it,O),it.prototype.imulK=function(a){for(var h=0,y=0;y<a.length;y++){var E=(a.words[y]|0)*19+h,x=E&67108863;E>>>=26,a.words[y]=x,h=E}return h!==0&&(a.words[a.length++]=h),a},i._prime=function(a){if(H[a])return H[a];var h;if(a==="k256")h=new W;else if(a==="p224")h=new K;else if(a==="p192")h=new Q;else if(a==="p25519")h=new it;else throw new Error("Unknown prime "+a);return H[a]=h,h};function J(B){if(typeof B=="string"){var a=i._prime(B);this.m=a.p,this.prime=a}else r(B.gtn(1),"modulus must be greater than 1"),this.m=B,this.prime=null}J.prototype._verify1=function(a){r(a.negative===0,"red works only with positives"),r(a.red,"red works only with red numbers")},J.prototype._verify2=function(a,h){r((a.negative|h.negative)===0,"red works only with positives"),r(a.red&&a.red===h.red,"red works only with red numbers")},J.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(_(a,a.umod(this.m)._forceRed(this)),a)},J.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},J.prototype.add=function(a,h){this._verify2(a,h);var y=a.add(h);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},J.prototype.iadd=function(a,h){this._verify2(a,h);var y=a.iadd(h);return y.cmp(this.m)>=0&&y.isub(this.m),y},J.prototype.sub=function(a,h){this._verify2(a,h);var y=a.sub(h);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},J.prototype.isub=function(a,h){this._verify2(a,h);var y=a.isub(h);return y.cmpn(0)<0&&y.iadd(this.m),y},J.prototype.shl=function(a,h){return this._verify1(a),this.imod(a.ushln(h))},J.prototype.imul=function(a,h){return this._verify2(a,h),this.imod(a.imul(h))},J.prototype.mul=function(a,h){return this._verify2(a,h),this.imod(a.mul(h))},J.prototype.isqr=function(a){return this.imul(a,a.clone())},J.prototype.sqr=function(a){return this.mul(a,a)},J.prototype.sqrt=function(a){if(a.isZero())return a.clone();var h=this.m.andln(3);if(r(h%2===1),h===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(a,y)}for(var E=this.m.subn(1),x=0;!E.isZero()&&E.andln(1)===0;)x++,E.iushrn(1);r(!E.isZero());var m=new i(1).toRed(this),v=m.redNeg(),p=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new i(2*u*u).toRed(this);this.pow(u,p).cmp(v)!==0;)u.redIAdd(v);for(var w=this.pow(u,E),$=this.pow(a,E.addn(1).iushrn(1)),j=this.pow(a,E),V=x;j.cmp(m)!==0;){for(var et=j,rt=0;et.cmp(m)!==0;rt++)et=et.redSqr();r(rt<V);var ot=this.pow(w,new i(1).iushln(V-rt-1));$=$.redMul(ot),w=ot.redSqr(),j=j.redMul(w),V=rt}return $},J.prototype.invm=function(a){var h=a._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},J.prototype.pow=function(a,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return a.clone();var y=4,E=new Array(1<<y);E[0]=new i(1).toRed(this),E[1]=a;for(var x=2;x<E.length;x++)E[x]=this.mul(E[x-1],a);var m=E[0],v=0,p=0,u=h.bitLength()%26;for(u===0&&(u=26),x=h.length-1;x>=0;x--){for(var w=h.words[x],$=u-1;$>=0;$--){var j=w>>$&1;if(m!==E[0]&&(m=this.sqr(m)),j===0&&v===0){p=0;continue}v<<=1,v|=j,p++,!(p!==y&&(x!==0||$!==0))&&(m=this.mul(m,E[v]),p=0,v=0)}u=26}return m},J.prototype.convertTo=function(a){var h=a.umod(this.m);return h===a?h.clone():h},J.prototype.convertFrom=function(a){var h=a.clone();return h.red=null,h},i.mont=function(a){return new wt(a)};function wt(B){J.call(this,B),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(wt,J),wt.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},wt.prototype.convertFrom=function(a){var h=this.imod(a.mul(this.rinv));return h.red=null,h},wt.prototype.imul=function(a,h){if(a.isZero()||h.isZero())return a.words[0]=0,a.length=1,a;var y=a.imul(h),E=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=y.isub(E).iushrn(this.shift),m=x;return x.cmp(this.m)>=0?m=x.isub(this.m):x.cmpn(0)<0&&(m=x.iadd(this.m)),m._forceRed(this)},wt.prototype.mul=function(a,h){if(a.isZero()||h.isZero())return new i(0)._forceRed(this);var y=a.mul(h),E=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=y.isub(E).iushrn(this.shift),m=x;return x.cmp(this.m)>=0?m=x.isub(this.m):x.cmpn(0)<0&&(m=x.iadd(this.m)),m._forceRed(this)},wt.prototype.invm=function(a){var h=this.imod(a._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(n,Ne)})(Wi);var Ms=Wi.exports;const Lo=Pr(Ms);var Ai={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(n,t){var e=dt,r=e.Buffer;function o(s,c){for(var d in s)c[d]=s[d]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?n.exports=e:(o(e,t),t.Buffer=i);function i(s,c,d){return r(s,c,d)}i.prototype=Object.create(r.prototype),o(r,i),i.from=function(s,c,d){if(typeof s=="number")throw new TypeError("Argument must not be a number");return r(s,c,d)},i.alloc=function(s,c,d){if(typeof s!="number")throw new TypeError("Argument must be a number");var b=r(s);return c!==void 0?typeof d=="string"?b.fill(c,d):b.fill(c):b.fill(0),b},i.allocUnsafe=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return r(s)},i.allocUnsafeSlow=function(s){if(typeof s!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(s)}})(Ai,Ai.exports);var uu=Ai.exports,on=uu.Buffer;function fu(n){if(n.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var r=0;r<n.length;r++){var o=n.charAt(r),i=o.charCodeAt(0);if(t[i]!==255)throw new TypeError(o+" is ambiguous");t[i]=r}var s=n.length,c=n.charAt(0),d=Math.log(s)/Math.log(256),b=Math.log(256)/Math.log(s);function _(R){if((Array.isArray(R)||R instanceof Uint8Array)&&(R=on.from(R)),!on.isBuffer(R))throw new TypeError("Expected Buffer");if(R.length===0)return"";for(var M=0,A=0,I=0,T=R.length;I!==T&&R[I]===0;)I++,M++;for(var z=(T-I)*b+1>>>0,C=new Uint8Array(z);I!==T;){for(var D=R[I],H=0,O=z-1;(D!==0||H<A)&&O!==-1;O--,H++)D+=256*C[O]>>>0,C[O]=D%s>>>0,D=D/s>>>0;if(D!==0)throw new Error("Non-zero carry");A=H,I++}for(var W=z-A;W!==z&&C[W]===0;)W++;for(var K=c.repeat(M);W<z;++W)K+=n.charAt(C[W]);return K}function k(R){if(typeof R!="string")throw new TypeError("Expected String");if(R.length===0)return on.alloc(0);for(var M=0,A=0,I=0;R[M]===c;)A++,M++;for(var T=(R.length-M)*d+1>>>0,z=new Uint8Array(T);R[M];){var C=t[R.charCodeAt(M)];if(C===255)return;for(var D=0,H=T-1;(C!==0||D<I)&&H!==-1;H--,D++)C+=s*z[H]>>>0,z[H]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");I=D,M++}for(var O=T-I;O!==T&&z[O]===0;)O++;var W=on.allocUnsafe(A+(T-O));W.fill(0,0,A);for(var K=A;O!==T;)W[K++]=z[O++];return W}function U(R){var M=k(R);if(M)return M;throw new Error("Non-base"+s+" character")}return{encode:_,decodeUnsafe:k,decode:U}}var Rs=fu,lu=Rs,hu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",du=lu(hu);const pe=Pr(du),pu=(n,t,e)=>n&t^~n&e,gu=(n,t,e)=>n&t^n&e^t&e,yu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),rr=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),nr=new Uint32Array(64);class mu extends ms{constructor(){super(64,32,8,!1),this.A=rr[0]|0,this.B=rr[1]|0,this.C=rr[2]|0,this.D=rr[3]|0,this.E=rr[4]|0,this.F=rr[5]|0,this.G=rr[6]|0,this.H=rr[7]|0}get(){const{A:t,B:e,C:r,D:o,E:i,F:s,G:c,H:d}=this;return[t,e,r,o,i,s,c,d]}set(t,e,r,o,i,s,c,d){this.A=t|0,this.B=e|0,this.C=r|0,this.D=o|0,this.E=i|0,this.F=s|0,this.G=c|0,this.H=d|0}process(t,e){for(let k=0;k<16;k++,e+=4)nr[k]=t.getUint32(e,!1);for(let k=16;k<64;k++){const U=nr[k-15],R=nr[k-2],M=ze(U,7)^ze(U,18)^U>>>3,A=ze(R,17)^ze(R,19)^R>>>10;nr[k]=A+nr[k-7]+M+nr[k-16]|0}let{A:r,B:o,C:i,D:s,E:c,F:d,G:b,H:_}=this;for(let k=0;k<64;k++){const U=ze(c,6)^ze(c,11)^ze(c,25),R=_+U+pu(c,d,b)+yu[k]+nr[k]|0,A=(ze(r,2)^ze(r,13)^ze(r,22))+gu(r,o,i)|0;_=b,b=d,d=c,c=s+R|0,s=i,i=o,o=r,r=R+A|0}r=r+this.A|0,o=o+this.B|0,i=i+this.C|0,s=s+this.D|0,c=c+this.E|0,d=d+this.F|0,b=b+this.G|0,_=_+this.H|0,this.set(r,o,i,s,c,d,b,_)}roundClean(){nr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Ii=gs(()=>new mu);var de={},wu=Rs,bu="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",vu=wu(bu);function Ye(n,t,e){return t<=n&&n<=e}function bn(n){if(n===void 0)return{};if(n===Object(n))return n;throw TypeError("Could not convert argument to dictionary")}function xu(n){for(var t=String(n),e=t.length,r=0,o=[];r<e;){var i=t.charCodeAt(r);if(i<55296||i>57343)o.push(i);else if(56320<=i&&i<=57343)o.push(65533);else if(55296<=i&&i<=56319)if(r===e-1)o.push(65533);else{var s=n.charCodeAt(r+1);if(56320<=s&&s<=57343){var c=i&1023,d=s&1023;o.push(65536+(c<<10)+d),r+=1}else o.push(65533)}r+=1}return o}function Eu(n){for(var t="",e=0;e<n.length;++e){var r=n[e];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode((r>>10)+55296,(r&1023)+56320))}return t}var fn=-1;function ji(n){this.tokens=[].slice.call(n)}ji.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():fn},prepend:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(n)},push:function(n){if(Array.isArray(n))for(var t=n;t.length;)this.tokens.push(t.shift());else this.tokens.push(n)}};var Cr=-1;function Xn(n,t){if(n)throw TypeError("Decoder error");return t||65533}var ln="utf-8";function hn(n,t){if(!(this instanceof hn))return new hn(n,t);if(n=n!==void 0?String(n).toLowerCase():ln,n!==ln)throw new Error("Encoding not supported. Only utf-8 is supported");t=bn(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}hn.prototype={decode:function(t,e){var r;typeof t=="object"&&t instanceof ArrayBuffer?r=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):r=new Uint8Array(0),e=bn(e),this._streaming||(this._decoder=new Su({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var o=new ji(r),i=[],s;!o.endOfStream()&&(s=this._decoder.handler(o,o.read()),s!==Cr);)s!==null&&(Array.isArray(s)?i.push.apply(i,s):i.push(s));if(!this._streaming){do{if(s=this._decoder.handler(o,o.read()),s===Cr)break;s!==null&&(Array.isArray(s)?i.push.apply(i,s):i.push(s))}while(!o.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Eu(i)}};function dn(n,t){if(!(this instanceof dn))return new dn(n,t);if(n=n!==void 0?String(n).toLowerCase():ln,n!==ln)throw new Error("Encoding not supported. Only utf-8 is supported");t=bn(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}dn.prototype={encode:function(t,e){t=t?String(t):"",e=bn(e),this._streaming||(this._encoder=new _u(this._options)),this._streaming=!!e.stream;for(var r=[],o=new ji(xu(t)),i;!o.endOfStream()&&(i=this._encoder.handler(o,o.read()),i!==Cr);)Array.isArray(i)?r.push.apply(r,i):r.push(i);if(!this._streaming){for(;i=this._encoder.handler(o,o.read()),i!==Cr;)Array.isArray(i)?r.push.apply(r,i):r.push(i);this._encoder=null}return new Uint8Array(r)}};function Su(n){var t=n.fatal,e=0,r=0,o=0,i=128,s=191;this.handler=function(c,d){if(d===fn&&o!==0)return o=0,Xn(t);if(d===fn)return Cr;if(o===0){if(Ye(d,0,127))return d;if(Ye(d,194,223))o=1,e=d-192;else if(Ye(d,224,239))d===224&&(i=160),d===237&&(s=159),o=2,e=d-224;else if(Ye(d,240,244))d===240&&(i=144),d===244&&(s=143),o=3,e=d-240;else return Xn(t);return e=e<<6*o,null}if(!Ye(d,i,s))return e=o=r=0,i=128,s=191,c.prepend(d),Xn(t);if(i=128,s=191,r+=1,e+=d-128<<6*(o-r),r!==o)return null;var b=e;return e=o=r=0,b}}function _u(n){n.fatal,this.handler=function(t,e){if(e===fn)return Cr;if(Ye(e,0,127))return e;var r,o;Ye(e,128,2047)?(r=1,o=192):Ye(e,2048,65535)?(r=2,o=224):Ye(e,65536,1114111)&&(r=3,o=240);for(var i=[(e>>6*r)+o];r>0;){var s=e>>6*(r-1);i.push(128|s&63),r-=1}return i}}const Bu=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:hn,TextEncoder:dn},Symbol.toStringTag,{value:"Module"})),Au=Fi(Bu);var Iu=Ne&&Ne.__createBinding||(Object.create?function(n,t,e,r){r===void 0&&(r=e),Object.defineProperty(n,r,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,r){r===void 0&&(r=e),n[r]=t[e]}),ku=Ne&&Ne.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),je=Ne&&Ne.__decorate||function(n,t,e,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,e):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,t,e,r);else for(var c=n.length-1;c>=0;c--)(s=n[c])&&(i=(o<3?s(i):o>3?s(t,e,i):s(t,e))||i);return o>3&&i&&Object.defineProperty(t,e,i),i},Mu=Ne&&Ne.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.hasOwnProperty.call(n,e)&&Iu(t,n,e);return ku(t,n),t},Ls=Ne&&Ne.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(de,"__esModule",{value:!0});var Ts=de.deserializeUnchecked=Ns=de.deserialize=Ps=de.serialize=de.BinaryReader=de.BinaryWriter=de.BorshError=de.baseDecode=de.baseEncode=void 0;const sr=Ls(Ms),Cs=Ls(vu),Ru=Mu(Au),Lu=typeof TextDecoder!="function"?Ru.TextDecoder:TextDecoder,Tu=new Lu("utf-8",{fatal:!0});function Cu(n){return typeof n=="string"&&(n=Buffer.from(n,"utf8")),Cs.default.encode(Buffer.from(n))}de.baseEncode=Cu;function Uu(n){return Buffer.from(Cs.default.decode(n))}de.baseDecode=Uu;const Qn=1024;class Ee extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}de.BorshError=Ee;class Us{constructor(){this.buf=Buffer.alloc(Qn),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(Qn)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new sr.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new sr.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new sr.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new sr.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(Qn)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const r of t)this.maybeResize(),e(r)}toArray(){return this.buf.subarray(0,this.length)}}de.BinaryWriter=Us;function Ge(n,t,e){const r=e.value;e.value=function(...o){try{return r.apply(this,o)}catch(i){if(i instanceof RangeError){const s=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(s)>=0)throw new Ee("Reached the end of buffer when deserializing")}throw i}}}class Re{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new sr.default(t,"le")}readU128(){const t=this.readBuffer(16);return new sr.default(t,"le")}readU256(){const t=this.readBuffer(32);return new sr.default(t,"le")}readU512(){const t=this.readBuffer(64);return new sr.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Ee(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Tu.decode(e)}catch(r){throw new Ee(`Error decoding UTF-8 string: ${r}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),r=Array();for(let o=0;o<e;++o)r.push(t());return r}}je([Ge],Re.prototype,"readU8",null);je([Ge],Re.prototype,"readU16",null);je([Ge],Re.prototype,"readU32",null);je([Ge],Re.prototype,"readU64",null);je([Ge],Re.prototype,"readU128",null);je([Ge],Re.prototype,"readU256",null);je([Ge],Re.prototype,"readU512",null);je([Ge],Re.prototype,"readString",null);je([Ge],Re.prototype,"readFixedArray",null);je([Ge],Re.prototype,"readArray",null);de.BinaryReader=Re;function Fs(n){return n.charAt(0).toUpperCase()+n.slice(1)}function lr(n,t,e,r,o){try{if(typeof r=="string")o[`write${Fs(r)}`](e);else if(r instanceof Array)if(typeof r[0]=="number"){if(e.length!==r[0])throw new Ee(`Expecting byte array of length ${r[0]}, but got ${e.length} bytes`);o.writeFixedArray(e)}else if(r.length===2&&typeof r[1]=="number"){if(e.length!==r[1])throw new Ee(`Expecting byte array of length ${r[1]}, but got ${e.length} bytes`);for(let i=0;i<r[1];i++)lr(n,null,e[i],r[0],o)}else o.writeArray(e,i=>{lr(n,t,i,r[0],o)});else if(r.kind!==void 0)switch(r.kind){case"option":{e==null?o.writeU8(0):(o.writeU8(1),lr(n,t,e,r.type,o));break}case"map":{o.writeU32(e.size),e.forEach((i,s)=>{lr(n,t,s,r.key,o),lr(n,t,i,r.value,o)});break}default:throw new Ee(`FieldType ${r} unrecognized`)}else Os(n,e,o)}catch(i){throw i instanceof Ee&&i.addToFieldPath(t),i}}function Os(n,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const r=n.get(t.constructor);if(!r)throw new Ee(`Class ${t.constructor.name} is missing in schema`);if(r.kind==="struct")r.fields.map(([o,i])=>{lr(n,o,t[o],i,e)});else if(r.kind==="enum"){const o=t[r.field];for(let i=0;i<r.values.length;++i){const[s,c]=r.values[i];if(s===o){e.writeU8(i),lr(n,s,t[s],c,e);break}}}else throw new Ee(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Fu(n,t,e=Us){const r=new e;return Os(n,t,r),r.toArray()}var Ps=de.serialize=Fu;function hr(n,t,e,r){try{if(typeof e=="string")return r[`read${Fs(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return r.readFixedArray(e[0]);if(typeof e[1]=="number"){const o=[];for(let i=0;i<e[1];i++)o.push(hr(n,null,e[0],r));return o}else return r.readArray(()=>hr(n,t,e[0],r))}if(e.kind==="option")return r.readU8()?hr(n,t,e.type,r):void 0;if(e.kind==="map"){let o=new Map;const i=r.readU32();for(let s=0;s<i;s++){const c=hr(n,t,e.key,r),d=hr(n,t,e.value,r);o.set(c,d)}return o}return Gi(n,e,r)}catch(o){throw o instanceof Ee&&o.addToFieldPath(t),o}}function Gi(n,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const r=n.get(t);if(!r)throw new Ee(`Class ${t.name} is missing in schema`);if(r.kind==="struct"){const o={};for(const[i,s]of n.get(t).fields)o[i]=hr(n,i,s,e);return new t(o)}if(r.kind==="enum"){const o=e.readU8();if(o>=r.values.length)throw new Ee(`Enum index: ${o} is out of range`);const[i,s]=r.values[o],c=hr(n,i,s,e);return new t({[i]:c})}throw new Ee(`Unexpected schema kind: ${r.kind} for ${t.constructor.name}`)}function Ou(n,t,e,r=Re){const o=new r(e),i=Gi(n,t,o);if(o.offset<e.length)throw new Ee(`Unexpected ${e.length-o.offset} bytes after deserialized data`);return i}var Ns=de.deserialize=Ou;function Pu(n,t,e,r=Re){const o=new r(e);return Gi(n,t,o)}Ts=de.deserializeUnchecked=Pu;var N={};Object.defineProperty(N,"__esModule",{value:!0});N.s16=N.s8=N.nu64be=N.u48be=N.u40be=N.u32be=N.u24be=N.u16be=he=N.nu64=N.u48=N.u40=at=N.u32=N.u24=Ue=N.u16=At=N.u8=gr=N.offset=N.greedy=N.Constant=N.UTF8=N.CString=N.Blob=N.Boolean=N.BitField=N.BitStructure=N.VariantLayout=N.Union=N.UnionLayoutDiscriminator=N.UnionDiscriminator=N.Structure=N.Sequence=N.DoubleBE=N.Double=N.FloatBE=N.Float=N.NearInt64BE=N.NearInt64=N.NearUInt64BE=N.NearUInt64=N.IntBE=N.Int=N.UIntBE=N.UInt=N.OffsetLayout=N.GreedyCount=N.ExternalLayout=N.bindConstructorLayout=N.nameWithProperty=N.Layout=N.uint8ArrayToBuffer=N.checkUint8Array=void 0;N.constant=N.utf8=N.cstr=Ot=N.blob=N.unionLayoutDiscriminator=N.union=ve=N.seq=N.bits=nt=N.struct=N.f64be=N.f64=N.f32be=N.f32=N.ns64be=N.s48be=N.s40be=N.s32be=N.s24be=N.s16be=Ie=N.ns64=N.s48=N.s40=N.s32=N.s24=void 0;const Vi=dt;function qr(n){if(!(n instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}N.checkUint8Array=qr;function St(n){return qr(n),Vi.Buffer.from(n.buffer,n.byteOffset,n.length)}N.uint8ArrayToBuffer=St;class kt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}N.Layout=kt;function Zi(n,t){return t.property?n+"["+t.property+"]":n}N.nameWithProperty=Zi;function Nu(n,t){if(typeof n!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(n,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof kt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");n.layout_=t,t.boundConstructor_=n,t.makeDestinationObject=()=>new n,Object.defineProperty(n.prototype,"encode",{value(e,r){return t.encode(this,e,r)},writable:!0}),Object.defineProperty(n,"decode",{value(e,r){return t.decode(e,r)},writable:!0})}N.bindConstructorLayout=Nu;class _e extends kt{isCount(){throw new Error("ExternalLayout is abstract")}}N.ExternalLayout=_e;class qs extends _e{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){qr(t);const r=t.length-e;return Math.floor(r/this.elementSpan)}encode(t,e,r){return 0}}N.GreedyCount=qs;class Yi extends _e{constructor(t,e=0,r){if(!(t instanceof kt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,r||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Fe||this.layout instanceof Pe}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,r=0){return this.layout.encode(t,e,r+this.offset)}}N.OffsetLayout=Yi;class Fe extends kt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return St(t).readUIntLE(e,this.span)}encode(t,e,r=0){return St(e).writeUIntLE(t,r,this.span),this.span}}N.UInt=Fe;class Pe extends kt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return St(t).readUIntBE(e,this.span)}encode(t,e,r=0){return St(e).writeUIntBE(t,r,this.span),this.span}}N.UIntBE=Pe;class br extends kt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return St(t).readIntLE(e,this.span)}encode(t,e,r=0){return St(e).writeIntLE(t,r,this.span),this.span}}N.Int=br;class Dr extends kt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return St(t).readIntBE(e,this.span)}encode(t,e,r=0){return St(e).writeIntBE(t,r,this.span),this.span}}N.IntBE=Dr;const ki=Math.pow(2,32);function vn(n){const t=Math.floor(n/ki),e=n-t*ki;return{hi32:t,lo32:e}}function xn(n,t){return n*ki+t}class Ds extends kt{constructor(t){super(8,t)}decode(t,e=0){const r=St(t),o=r.readUInt32LE(e),i=r.readUInt32LE(e+4);return xn(i,o)}encode(t,e,r=0){const o=vn(t),i=St(e);return i.writeUInt32LE(o.lo32,r),i.writeUInt32LE(o.hi32,r+4),8}}N.NearUInt64=Ds;class zs extends kt{constructor(t){super(8,t)}decode(t,e=0){const r=St(t),o=r.readUInt32BE(e),i=r.readUInt32BE(e+4);return xn(o,i)}encode(t,e,r=0){const o=vn(t),i=St(e);return i.writeUInt32BE(o.hi32,r),i.writeUInt32BE(o.lo32,r+4),8}}N.NearUInt64BE=zs;class $s extends kt{constructor(t){super(8,t)}decode(t,e=0){const r=St(t),o=r.readUInt32LE(e),i=r.readInt32LE(e+4);return xn(i,o)}encode(t,e,r=0){const o=vn(t),i=St(e);return i.writeUInt32LE(o.lo32,r),i.writeInt32LE(o.hi32,r+4),8}}N.NearInt64=$s;class Hs extends kt{constructor(t){super(8,t)}decode(t,e=0){const r=St(t),o=r.readInt32BE(e),i=r.readUInt32BE(e+4);return xn(o,i)}encode(t,e,r=0){const o=vn(t),i=St(e);return i.writeInt32BE(o.hi32,r),i.writeUInt32BE(o.lo32,r+4),8}}N.NearInt64BE=Hs;class Ks extends kt{constructor(t){super(4,t)}decode(t,e=0){return St(t).readFloatLE(e)}encode(t,e,r=0){return St(e).writeFloatLE(t,r),4}}N.Float=Ks;class Ws extends kt{constructor(t){super(4,t)}decode(t,e=0){return St(t).readFloatBE(e)}encode(t,e,r=0){return St(e).writeFloatBE(t,r),4}}N.FloatBE=Ws;class js extends kt{constructor(t){super(8,t)}decode(t,e=0){return St(t).readDoubleLE(e)}encode(t,e,r=0){return St(e).writeDoubleLE(t,r),8}}N.Double=js;class Gs extends kt{constructor(t){super(8,t)}decode(t,e=0){return St(t).readDoubleBE(e)}encode(t,e,r=0){return St(e).writeDoubleBE(t,r),8}}N.DoubleBE=Gs;class Vs extends kt{constructor(t,e,r){if(!(t instanceof kt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof _e&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let o=-1;!(e instanceof _e)&&0<t.span&&(o=e*t.span),super(o,r),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0,o=this.count;if(o instanceof _e&&(o=o.decode(t,e)),0<this.elementLayout.span)r=o*this.elementLayout.span;else{let i=0;for(;i<o;)r+=this.elementLayout.getSpan(t,e+r),++i}return r}decode(t,e=0){const r=[];let o=0,i=this.count;for(i instanceof _e&&(i=i.decode(t,e));o<i;)r.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),o+=1;return r}encode(t,e,r=0){const o=this.elementLayout,i=t.reduce((s,c)=>s+o.encode(c,e,r+s),0);return this.count instanceof _e&&this.count.encode(t.length,e,r),i}}N.Sequence=Vs;class Zs extends kt{constructor(t,e,r){if(!(Array.isArray(t)&&t.reduce((i,s)=>i&&s instanceof kt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&r===void 0&&(r=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let o=-1;try{o=t.reduce((i,s)=>i+s.getSpan(),0)}catch{}super(o,e),this.fields=t,this.decodePrefixes=!!r}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;try{r=this.fields.reduce((o,i)=>{const s=i.getSpan(t,e);return e+=s,o+s},0)}catch{throw new RangeError("indeterminate span")}return r}decode(t,e=0){qr(t);const r=this.makeDestinationObject();for(const o of this.fields)if(o.property!==void 0&&(r[o.property]=o.decode(t,e)),e+=o.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return r}encode(t,e,r=0){const o=r;let i=0,s=0;for(const c of this.fields){let d=c.span;if(s=0<d?d:0,c.property!==void 0){const b=t[c.property];b!==void 0&&(s=c.encode(b,e,r),0>d&&(d=c.getSpan(e,r)))}i=r,r+=d}return i+s-o}fromArray(t){const e=this.makeDestinationObject();for(const r of this.fields)r.property!==void 0&&0<t.length&&(e[r.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const r of this.fields){if(r.property===t)return e;0>r.span?e=-1:0<=e&&(e+=r.span)}}}N.Structure=Zs;class Ji{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,r){throw new Error("UnionDiscriminator is abstract")}}N.UnionDiscriminator=Ji;class pn extends Ji{constructor(t,e){if(!(t instanceof _e&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,r){return this.layout.encode(t,e,r)}}N.UnionLayoutDiscriminator=pn;class Xi extends kt{constructor(t,e,r){let o;if(t instanceof Fe||t instanceof Pe)o=new pn(new Yi(t));else if(t instanceof _e&&t.isCount())o=new pn(t);else if(t instanceof Ji)o=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof kt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof Fe||t instanceof Pe)&&(i+=o.layout.span)),super(i,r),this.discriminator=o,this.usesPrefixDiscriminator=t instanceof Fe||t instanceof Pe,this.defaultLayout=e,this.registry={};let s=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(c){return s(c)},this.configGetSourceVariant=function(c){s=c.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const r=this.getVariant(t,e);if(!r)throw new Error("unable to determine span for unrecognized variant");return r.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const r=this.registry[e];if(r.property&&Object.prototype.hasOwnProperty.call(t,r.property))return r}throw new Error("unable to infer src variant")}decode(t,e=0){let r;const o=this.discriminator,i=o.decode(t,e),s=this.registry[i];if(s===void 0){const c=this.defaultLayout;let d=0;this.usesPrefixDiscriminator&&(d=o.layout.span),r=this.makeDestinationObject(),r[o.property]=i,r[c.property]=c.decode(t,e+d)}else r=s.decode(t,e);return r}encode(t,e,r=0){const o=this.getSourceVariant(t);if(o===void 0){const i=this.discriminator,s=this.defaultLayout;let c=0;return this.usesPrefixDiscriminator&&(c=i.layout.span),i.encode(t[i.property],e,r),c+s.encode(t[s.property],e,r+c)}return o.encode(t,e,r)}addVariant(t,e,r){const o=new Ys(this,t,e,r);return this.registry[t]=o,o}getVariant(t,e=0){let r;return t instanceof Uint8Array?r=this.discriminator.decode(t,e):r=t,this.registry[r]}}N.Union=Xi;class Ys extends kt{constructor(t,e,r,o){if(!(t instanceof Xi))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof r=="string"&&o===void 0&&(o=r,r=null),r){if(!(r instanceof kt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=r.span&&r.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof o!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=r?r.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,o),this.union=t,this.variant=e,this.layout=r||null}getSpan(t,e=0){if(0<=this.span)return this.span;let r=0;this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span);let o=0;return this.layout&&(o=this.layout.getSpan(t,e+r)),r+o}decode(t,e=0){const r=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let o=0;return this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout?r[this.property]=this.layout.decode(t,e+o):this.property?r[this.property]=!0:this.union.usesPrefixDiscriminator&&(r[this.union.discriminator.property]=this.variant),r}encode(t,e,r=0){let o=0;if(this.union.usesPrefixDiscriminator&&(o=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,r);let i=o;if(this.layout&&(this.layout.encode(t[this.property],e,r+o),i+=this.layout.getSpan(e,r+o),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}N.VariantLayout=Ys;function Ar(n){return 0>n&&(n+=4294967296),n}class Qi extends kt{constructor(t,e,r){if(!(t instanceof Fe||t instanceof Pe))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&r===void 0&&(r=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,r),this.word=t,this.msb=!!e,this.fields=[];let o=0;this._packedSetValue=function(i){return o=Ar(i),this},this._packedGetValue=function(){return o}}decode(t,e=0){const r=this.makeDestinationObject(),o=this.word.decode(t,e);this._packedSetValue(o);for(const i of this.fields)i.property!==void 0&&(r[i.property]=i.decode(t));return r}encode(t,e,r=0){const o=this.word.decode(e,r);this._packedSetValue(o);for(const i of this.fields)if(i.property!==void 0){const s=t[i.property];s!==void 0&&i.encode(s)}return this.word.encode(this._packedGetValue(),e,r)}addField(t,e){const r=new to(this,t,e);return this.fields.push(r),r}addBoolean(t){const e=new Js(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}N.BitStructure=Qi;class to{constructor(t,e,r){if(!(t instanceof Qi))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const o=8*t.span,i=t.fields.reduce((s,c)=>s+c.bits,0);if(e+i>o)throw new Error("bits too long for span remainder ("+(o-i)+" of "+o+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=o-i-e),this.wordMask=Ar(this.valueMask<<this.start),this.property=r}decode(t,e){const r=this.container._packedGetValue();return Ar(r&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Ar(t&this.valueMask))throw new TypeError(Zi("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),r=Ar(t<<this.start);this.container._packedSetValue(Ar(e&~this.wordMask)|r)}}N.BitField=to;let Js=class extends to{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};N.Boolean=Js;class Xs extends kt{constructor(t,e){if(!(t instanceof _e&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let r=-1;t instanceof _e||(r=t),super(r,e),this.length=t}getSpan(t,e){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),r}decode(t,e=0){let r=this.span;return 0>r&&(r=this.length.decode(t,e)),St(t).slice(e,e+r)}encode(t,e,r){let o=this.length;if(this.length instanceof _e&&(o=t.length),!(t instanceof Uint8Array&&o===t.length))throw new TypeError(Zi("Blob.encode",this)+" requires (length "+o+") Uint8Array as src");if(r+o>e.length)throw new RangeError("encoding overruns Uint8Array");const i=St(t);return St(e).write(i.toString("hex"),r,o,"hex"),this.length instanceof _e&&this.length.encode(o,e,r),o}}N.Blob=Xs;class Qs extends kt{constructor(t){super(-1,t)}getSpan(t,e=0){qr(t);let r=e;for(;r<t.length&&t[r]!==0;)r+=1;return 1+r-e}decode(t,e=0){const r=this.getSpan(t,e);return St(t).slice(e,e+r-1).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const o=Vi.Buffer.from(t,"utf8"),i=o.length;if(r+i>e.length)throw new RangeError("encoding overruns Buffer");const s=St(e);return o.copy(s,r),s[r+i]=0,i+1}}N.CString=Qs;class ta extends kt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return qr(t),t.length-e}decode(t,e=0){const r=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return St(t).slice(e,e+r).toString("utf-8")}encode(t,e,r=0){typeof t!="string"&&(t=String(t));const o=Vi.Buffer.from(t,"utf8"),i=o.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(r+i>e.length)throw new RangeError("encoding overruns Buffer");return o.copy(St(e),r),i}}N.UTF8=ta;class ea extends kt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,r){return 0}}N.Constant=ea;N.greedy=(n,t)=>new qs(n,t);var gr=N.offset=(n,t,e)=>new Yi(n,t,e),At=N.u8=n=>new Fe(1,n),Ue=N.u16=n=>new Fe(2,n);N.u24=n=>new Fe(3,n);var at=N.u32=n=>new Fe(4,n);N.u40=n=>new Fe(5,n);N.u48=n=>new Fe(6,n);var he=N.nu64=n=>new Ds(n);N.u16be=n=>new Pe(2,n);N.u24be=n=>new Pe(3,n);N.u32be=n=>new Pe(4,n);N.u40be=n=>new Pe(5,n);N.u48be=n=>new Pe(6,n);N.nu64be=n=>new zs(n);N.s8=n=>new br(1,n);N.s16=n=>new br(2,n);N.s24=n=>new br(3,n);N.s32=n=>new br(4,n);N.s40=n=>new br(5,n);N.s48=n=>new br(6,n);var Ie=N.ns64=n=>new $s(n);N.s16be=n=>new Dr(2,n);N.s24be=n=>new Dr(3,n);N.s32be=n=>new Dr(4,n);N.s40be=n=>new Dr(5,n);N.s48be=n=>new Dr(6,n);N.ns64be=n=>new Hs(n);N.f32=n=>new Ks(n);N.f32be=n=>new Ws(n);N.f64=n=>new js(n);N.f64be=n=>new Gs(n);var nt=N.struct=(n,t,e)=>new Zs(n,t,e);N.bits=(n,t,e)=>new Qi(n,t,e);var ve=N.seq=(n,t,e)=>new Vs(n,t,e);N.union=(n,t,e)=>new Xi(n,t,e);N.unionLayoutDiscriminator=(n,t)=>new pn(n,t);var Ot=N.blob=(n,t)=>new Xs(n,t);N.cstr=n=>new Qs(n);N.utf8=(n,t)=>new ta(n,t);N.constant=(n,t)=>new ea(n,t);var Jr={};Object.defineProperty(Jr,"__esModule",{value:!0});function qu(n){{const t=Buffer.from(n);t.reverse();const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}var Du=Jr.toBigIntLE=qu;function zu(n){{const t=n.toString("hex");return t.length===0?BigInt(0):BigInt(`0x${t}`)}}Jr.toBigIntBE=zu;function $u(n,t){{const e=n.toString(16),r=Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex");return r.reverse(),r}}var Hu=Jr.toBufferLE=$u;function Ku(n,t){{const e=n.toString(16);return Buffer.from(e.padStart(t*2,"0").slice(0,t*2),"hex")}}Jr.toBufferBE=Ku;class Wu extends TypeError{constructor(t,e){let r;const{message:o,...i}=t,{path:s}=t,c=s.length===0?o:"At path: "+s.join(".")+" -- "+o;super(c),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>{var d;return(d=r)!=null?d:r=[t,...e()]}}}function ju(n){return cr(n)&&typeof n[Symbol.iterator]=="function"}function cr(n){return typeof n=="object"&&n!=null}function qe(n){return typeof n=="string"?JSON.stringify(n):""+n}function Gu(n){const{done:t,value:e}=n.next();return t?void 0:e}function Vu(n,t,e,r){if(n===!0)return;n===!1?n={}:typeof n=="string"&&(n={message:n});const{path:o,branch:i}=t,{type:s}=e,{refinement:c,message:d="Expected a value of type `"+s+"`"+(c?" with refinement `"+c+"`":"")+", but received: `"+qe(r)+"`"}=n;return{value:r,type:s,refinement:c,key:o[o.length-1],path:o,branch:i,...n,message:d}}function*To(n,t,e,r){ju(n)||(n=[n]);for(const o of n){const i=Vu(o,t,e,r);i&&(yield i)}}function*eo(n,t,e={}){const{path:r=[],branch:o=[n],coerce:i=!1,mask:s=!1}=e,c={path:r,branch:o};if(i&&(n=t.coercer(n,c),s&&t.type!=="type"&&cr(t.schema)&&cr(n)&&!Array.isArray(n)))for(const b in n)t.schema[b]===void 0&&delete n[b];let d=!0;for(const b of t.validator(n,c))d=!1,yield[b,void 0];for(let[b,_,k]of t.entries(n,c)){const U=eo(_,k,{path:b===void 0?r:[...r,b],branch:b===void 0?o:[...o,_],coerce:i,mask:s});for(const R of U)R[0]?(d=!1,yield[R[0],void 0]):i&&(_=R[1],b===void 0?n=_:n instanceof Map?n.set(b,_):n instanceof Set?n.add(_):cr(n)&&(n[b]=_))}if(d)for(const b of t.refiner(n,c))d=!1,yield[b,void 0];d&&(yield[void 0,n])}let Ve=class{constructor(t){const{type:e,schema:r,validator:o,refiner:i,coercer:s=d=>d,entries:c=function*(){}}=t;this.type=e,this.schema=r,this.entries=c,this.coercer=s,o?this.validator=(d,b)=>{const _=o(d,b);return To(_,b,this,d)}:this.validator=()=>[],i?this.refiner=(d,b)=>{const _=i(d,b);return To(_,b,this,d)}:this.refiner=()=>[]}assert(t){return Zu(t,this)}create(t){return Y(t,this)}is(t){return ra(t,this)}mask(t){return Yu(t,this)}validate(t,e={}){return Xr(t,this,e)}};function Zu(n,t){const e=Xr(n,t);if(e[0])throw e[0]}function Y(n,t){const e=Xr(n,t,{coerce:!0});if(e[0])throw e[0];return e[1]}function Yu(n,t){const e=Xr(n,t,{coerce:!0,mask:!0});if(e[0])throw e[0];return e[1]}function ra(n,t){return!Xr(n,t)[0]}function Xr(n,t,e={}){const r=eo(n,t,e),o=Gu(r);return o[0]?[new Wu(o[0],function*(){for(const s of r)s[0]&&(yield s[0])}),void 0]:[void 0,o[1]]}function vr(n,t){return new Ve({type:n,schema:null,validator:t})}function Ju(){return vr("any",()=>!0)}function tt(n){return new Ve({type:"array",schema:n,*entries(t){if(n&&Array.isArray(t))for(const[e,r]of t.entries())yield[e,r,n]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||"Expected an array value, but received: "+qe(t)}})}function We(){return vr("boolean",n=>typeof n=="boolean")}function ro(n){return vr("instance",t=>t instanceof n||"Expected a `"+n.name+"` instance, but received: "+qe(t))}function zt(n){const t=qe(n),e=typeof n;return new Ve({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?n:null,validator(r){return r===n||"Expected the literal `"+t+"`, but received: "+qe(r)}})}function Xu(){return vr("never",()=>!1)}function X(n){return new Ve({...n,validator:(t,e)=>t===null||n.validator(t,e),refiner:(t,e)=>t===null||n.refiner(t,e)})}function P(){return vr("number",n=>typeof n=="number"&&!isNaN(n)||"Expected a number, but received: "+qe(n))}function ct(n){return new Ve({...n,validator:(t,e)=>t===void 0||n.validator(t,e),refiner:(t,e)=>t===void 0||n.refiner(t,e)})}function na(n,t){return new Ve({type:"record",schema:null,*entries(e){if(cr(e))for(const r in e){const o=e[r];yield[r,r,n],yield[r,o,t]}},validator(e){return cr(e)||"Expected an object, but received: "+qe(e)}})}function Z(){return vr("string",n=>typeof n=="string"||"Expected a string, but received: "+qe(n))}function no(n){const t=Xu();return new Ve({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const r=Math.max(n.length,e.length);for(let o=0;o<r;o++)yield[o,e[o],n[o]||t]}},validator(e){return Array.isArray(e)||"Expected an array, but received: "+qe(e)}})}function G(n){const t=Object.keys(n);return new Ve({type:"type",schema:n,*entries(e){if(cr(e))for(const r of t)yield[r,e[r],n[r]]},validator(e){return cr(e)||"Expected an object, but received: "+qe(e)}})}function Be(n){const t=n.map(e=>e.type).join(" | ");return new Ve({type:"union",schema:null,validator(e,r){const o=[];for(const i of n){const[...s]=eo(e,i,r),[c]=s;if(c[0])for(const[d]of s)d&&o.push(d);else return[]}return["Expected the value to satisfy a union of `"+t+"`, but received: "+qe(e),...o]}})}function Qr(){return vr("unknown",()=>!0)}function tn(n,t,e){return new Ve({...n,coercer:(r,o)=>ra(r,t)?n.coercer(e(r,o),o):n.coercer(r,o)})}var sn,Qu=new Uint8Array(16);function ia(){if(!sn&&(sn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!sn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return sn(Qu)}const tf=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function En(n){return typeof n=="string"&&tf.test(n)}var le=[];for(var ti=0;ti<256;++ti)le.push((ti+256).toString(16).substr(1));function Sn(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(le[n[t+0]]+le[n[t+1]]+le[n[t+2]]+le[n[t+3]]+"-"+le[n[t+4]]+le[n[t+5]]+"-"+le[n[t+6]]+le[n[t+7]]+"-"+le[n[t+8]]+le[n[t+9]]+"-"+le[n[t+10]]+le[n[t+11]]+le[n[t+12]]+le[n[t+13]]+le[n[t+14]]+le[n[t+15]]).toLowerCase();if(!En(e))throw TypeError("Stringified UUID is invalid");return e}var Co,ei,ri=0,ni=0;function ef(n,t,e){var r=t&&e||0,o=t||new Array(16);n=n||{};var i=n.node||Co,s=n.clockseq!==void 0?n.clockseq:ei;if(i==null||s==null){var c=n.random||(n.rng||ia)();i==null&&(i=Co=[c[0]|1,c[1],c[2],c[3],c[4],c[5]]),s==null&&(s=ei=(c[6]<<8|c[7])&16383)}var d=n.msecs!==void 0?n.msecs:Date.now(),b=n.nsecs!==void 0?n.nsecs:ni+1,_=d-ri+(b-ni)/1e4;if(_<0&&n.clockseq===void 0&&(s=s+1&16383),(_<0||d>ri)&&n.nsecs===void 0&&(b=0),b>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ri=d,ni=b,ei=s,d+=122192928e5;var k=((d&268435455)*1e4+b)%4294967296;o[r++]=k>>>24&255,o[r++]=k>>>16&255,o[r++]=k>>>8&255,o[r++]=k&255;var U=d/4294967296*1e4&268435455;o[r++]=U>>>8&255,o[r++]=U&255,o[r++]=U>>>24&15|16,o[r++]=U>>>16&255,o[r++]=s>>>8|128,o[r++]=s&255;for(var R=0;R<6;++R)o[r+R]=i[R];return t||Sn(o)}function oa(n){if(!En(n))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function rf(n){n=unescape(encodeURIComponent(n));for(var t=[],e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var nf="6ba7b810-9dad-11d1-80b4-00c04fd430c8",of="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function sa(n,t,e){function r(o,i,s,c){if(typeof o=="string"&&(o=rf(o)),typeof i=="string"&&(i=oa(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+o.length);if(d.set(i),d.set(o,i.length),d=e(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,s){c=c||0;for(var b=0;b<16;++b)s[c+b]=d[b];return s}return Sn(d)}try{r.name=n}catch{}return r.DNS=nf,r.URL=of,r}function sf(n){if(typeof n=="string"){var t=unescape(encodeURIComponent(n));n=new Uint8Array(t.length);for(var e=0;e<t.length;++e)n[e]=t.charCodeAt(e)}return af(cf(uf(n),n.length*8))}function af(n){for(var t=[],e=n.length*32,r="0123456789abcdef",o=0;o<e;o+=8){var i=n[o>>5]>>>o%32&255,s=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);t.push(s)}return t}function aa(n){return(n+64>>>9<<4)+14+1}function cf(n,t){n[t>>5]|=128<<t%32,n[aa(t)-1]=t;for(var e=1732584193,r=-271733879,o=-1732584194,i=271733878,s=0;s<n.length;s+=16){var c=e,d=r,b=o,_=i;e=ye(e,r,o,i,n[s],7,-680876936),i=ye(i,e,r,o,n[s+1],12,-389564586),o=ye(o,i,e,r,n[s+2],17,606105819),r=ye(r,o,i,e,n[s+3],22,-1044525330),e=ye(e,r,o,i,n[s+4],7,-176418897),i=ye(i,e,r,o,n[s+5],12,1200080426),o=ye(o,i,e,r,n[s+6],17,-1473231341),r=ye(r,o,i,e,n[s+7],22,-45705983),e=ye(e,r,o,i,n[s+8],7,1770035416),i=ye(i,e,r,o,n[s+9],12,-1958414417),o=ye(o,i,e,r,n[s+10],17,-42063),r=ye(r,o,i,e,n[s+11],22,-1990404162),e=ye(e,r,o,i,n[s+12],7,1804603682),i=ye(i,e,r,o,n[s+13],12,-40341101),o=ye(o,i,e,r,n[s+14],17,-1502002290),r=ye(r,o,i,e,n[s+15],22,1236535329),e=me(e,r,o,i,n[s+1],5,-165796510),i=me(i,e,r,o,n[s+6],9,-1069501632),o=me(o,i,e,r,n[s+11],14,643717713),r=me(r,o,i,e,n[s],20,-373897302),e=me(e,r,o,i,n[s+5],5,-701558691),i=me(i,e,r,o,n[s+10],9,38016083),o=me(o,i,e,r,n[s+15],14,-660478335),r=me(r,o,i,e,n[s+4],20,-405537848),e=me(e,r,o,i,n[s+9],5,568446438),i=me(i,e,r,o,n[s+14],9,-1019803690),o=me(o,i,e,r,n[s+3],14,-187363961),r=me(r,o,i,e,n[s+8],20,1163531501),e=me(e,r,o,i,n[s+13],5,-1444681467),i=me(i,e,r,o,n[s+2],9,-51403784),o=me(o,i,e,r,n[s+7],14,1735328473),r=me(r,o,i,e,n[s+12],20,-1926607734),e=we(e,r,o,i,n[s+5],4,-378558),i=we(i,e,r,o,n[s+8],11,-2022574463),o=we(o,i,e,r,n[s+11],16,1839030562),r=we(r,o,i,e,n[s+14],23,-35309556),e=we(e,r,o,i,n[s+1],4,-1530992060),i=we(i,e,r,o,n[s+4],11,1272893353),o=we(o,i,e,r,n[s+7],16,-155497632),r=we(r,o,i,e,n[s+10],23,-1094730640),e=we(e,r,o,i,n[s+13],4,681279174),i=we(i,e,r,o,n[s],11,-358537222),o=we(o,i,e,r,n[s+3],16,-722521979),r=we(r,o,i,e,n[s+6],23,76029189),e=we(e,r,o,i,n[s+9],4,-640364487),i=we(i,e,r,o,n[s+12],11,-421815835),o=we(o,i,e,r,n[s+15],16,530742520),r=we(r,o,i,e,n[s+2],23,-995338651),e=be(e,r,o,i,n[s],6,-198630844),i=be(i,e,r,o,n[s+7],10,1126891415),o=be(o,i,e,r,n[s+14],15,-1416354905),r=be(r,o,i,e,n[s+5],21,-57434055),e=be(e,r,o,i,n[s+12],6,1700485571),i=be(i,e,r,o,n[s+3],10,-1894986606),o=be(o,i,e,r,n[s+10],15,-1051523),r=be(r,o,i,e,n[s+1],21,-2054922799),e=be(e,r,o,i,n[s+8],6,1873313359),i=be(i,e,r,o,n[s+15],10,-30611744),o=be(o,i,e,r,n[s+6],15,-1560198380),r=be(r,o,i,e,n[s+13],21,1309151649),e=be(e,r,o,i,n[s+4],6,-145523070),i=be(i,e,r,o,n[s+11],10,-1120210379),o=be(o,i,e,r,n[s+2],15,718787259),r=be(r,o,i,e,n[s+9],21,-343485551),e=ar(e,c),r=ar(r,d),o=ar(o,b),i=ar(i,_)}return[e,r,o,i]}function uf(n){if(n.length===0)return[];for(var t=n.length*8,e=new Uint32Array(aa(t)),r=0;r<t;r+=8)e[r>>5]|=(n[r/8]&255)<<r%32;return e}function ar(n,t){var e=(n&65535)+(t&65535),r=(n>>16)+(t>>16)+(e>>16);return r<<16|e&65535}function ff(n,t){return n<<t|n>>>32-t}function _n(n,t,e,r,o,i){return ar(ff(ar(ar(t,n),ar(r,i)),o),e)}function ye(n,t,e,r,o,i,s){return _n(t&e|~t&r,n,t,o,i,s)}function me(n,t,e,r,o,i,s){return _n(t&r|e&~r,n,t,o,i,s)}function we(n,t,e,r,o,i,s){return _n(t^e^r,n,t,o,i,s)}function be(n,t,e,r,o,i,s){return _n(e^(t|~r),n,t,o,i,s)}var lf=sa("v3",48,sf);const hf=lf;function df(n,t,e){n=n||{};var r=n.random||(n.rng||ia)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){e=e||0;for(var o=0;o<16;++o)t[e+o]=r[o];return t}return Sn(r)}function pf(n,t,e,r){switch(n){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function ii(n,t){return n<<t|n>>>32-t}function gf(n){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=[];for(var o=0;o<r.length;++o)n.push(r.charCodeAt(o))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var i=n.length/4+2,s=Math.ceil(i/16),c=new Array(s),d=0;d<s;++d){for(var b=new Uint32Array(16),_=0;_<16;++_)b[_]=n[d*64+_*4]<<24|n[d*64+_*4+1]<<16|n[d*64+_*4+2]<<8|n[d*64+_*4+3];c[d]=b}c[s-1][14]=(n.length-1)*8/Math.pow(2,32),c[s-1][14]=Math.floor(c[s-1][14]),c[s-1][15]=(n.length-1)*8&4294967295;for(var k=0;k<s;++k){for(var U=new Uint32Array(80),R=0;R<16;++R)U[R]=c[k][R];for(var M=16;M<80;++M)U[M]=ii(U[M-3]^U[M-8]^U[M-14]^U[M-16],1);for(var A=e[0],I=e[1],T=e[2],z=e[3],C=e[4],D=0;D<80;++D){var H=Math.floor(D/20),O=ii(A,5)+pf(H,I,T,z)+C+t[H]+U[D]>>>0;C=z,z=T,T=ii(I,30)>>>0,I=A,A=O}e[0]=e[0]+A>>>0,e[1]=e[1]+I>>>0,e[2]=e[2]+T>>>0,e[3]=e[3]+z>>>0,e[4]=e[4]+C>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var yf=sa("v5",80,gf);const mf=yf,wf="00000000-0000-0000-0000-000000000000";function bf(n){if(!En(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const vf=Object.freeze(Object.defineProperty({__proto__:null,NIL:wf,parse:oa,stringify:Sn,v1:ef,v3:hf,v4:df,v5:mf,validate:En,version:bf},Symbol.toStringTag,{value:"Module"})),ca=Fi(vf),xf=ca.v4,Ef=function(n,t,e,r){if(typeof n!="string")throw new TypeError(n+" must be a string");r=r||{};const o=typeof r.version=="number"?r.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const i={method:n};if(o===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const s=typeof r.generator=="function"?r.generator:function(){return xf()};i.id=s(i,r)}else o===2&&e===null?r.notificationIdNull&&(i.id=null):i.id=e;return i};var Sf=Ef;const _f=ca.v4,Bf=Sf,Gr=function(n,t){if(!(this instanceof Gr))return new Gr(n,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return _f()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=n};var Af=Gr;Gr.prototype.request=function(n,t,e,r){const o=this;let i=null;const s=Array.isArray(n)&&typeof t=="function";if(this.options.version===1&&s)throw new TypeError("JSON-RPC 1.0 does not support batching");if(s||!s&&n&&typeof n=="object"&&typeof t=="function")r=t,i=n;else{typeof e=="function"&&(r=e,e=void 0);const b=typeof r=="function";try{i=Bf(n,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(_){if(b)return r(_);throw _}if(!b)return i}let d;try{d=JSON.stringify(i,this.options.replacer)}catch(b){return r(b)}return this.callServer(d,function(b,_){o._parseResponse(b,_,r)}),i};Gr.prototype._parseResponse=function(n,t,e){if(n){e(n);return}if(!t)return e();let r;try{r=JSON.parse(t,this.options.reviver)}catch(o){return e(o)}if(e.length===3)if(Array.isArray(r)){const o=function(s){return typeof s.error<"u"},i=function(s){return!o(s)};return e(null,r.filter(o),r.filter(i))}else return e(null,r.error,r.result);e(null,r)};const If=Pr(Af);var ua={},fa={exports:{}};(function(n){function t(e){return e&&e.__esModule?e:{default:e}}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports})(fa);var io=fa.exports,oi={exports:{}},si={exports:{}},Uo;function en(){return Uo||(Uo=1,function(n){function t(e){"@babel/helpers - typeof";return n.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},n.exports.__esModule=!0,n.exports.default=n.exports,t(e)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(si)),si.exports}var Fo;function kf(){return Fo||(Fo=1,function(n){var t=en().default;function e(){n.exports=e=function(){return o},n.exports.__esModule=!0,n.exports.default=n.exports;var r,o={},i=Object.prototype,s=i.hasOwnProperty,c=Object.defineProperty||function(m,v,p){m[v]=p.value},d=typeof Symbol=="function"?Symbol:{},b=d.iterator||"@@iterator",_=d.asyncIterator||"@@asyncIterator",k=d.toStringTag||"@@toStringTag";function U(m,v,p){return Object.defineProperty(m,v,{value:p,enumerable:!0,configurable:!0,writable:!0}),m[v]}try{U({},"")}catch{U=function(p,u,w){return p[u]=w}}function R(m,v,p,u){var w=v&&v.prototype instanceof D?v:D,$=Object.create(w.prototype),j=new E(u||[]);return c($,"_invoke",{value:B(m,p,j)}),$}function M(m,v,p){try{return{type:"normal",arg:m.call(v,p)}}catch(u){return{type:"throw",arg:u}}}o.wrap=R;var A="suspendedStart",I="suspendedYield",T="executing",z="completed",C={};function D(){}function H(){}function O(){}var W={};U(W,b,function(){return this});var K=Object.getPrototypeOf,Q=K&&K(K(x([])));Q&&Q!==i&&s.call(Q,b)&&(W=Q);var it=O.prototype=D.prototype=Object.create(W);function J(m){["next","throw","return"].forEach(function(v){U(m,v,function(p){return this._invoke(v,p)})})}function wt(m,v){function p(w,$,j,V){var et=M(m[w],m,$);if(et.type!=="throw"){var rt=et.arg,ot=rt.value;return ot&&t(ot)=="object"&&s.call(ot,"__await")?v.resolve(ot.__await).then(function(_t){p("next",_t,j,V)},function(_t){p("throw",_t,j,V)}):v.resolve(ot).then(function(_t){rt.value=_t,j(rt)},function(_t){return p("throw",_t,j,V)})}V(et.arg)}var u;c(this,"_invoke",{value:function($,j){function V(){return new v(function(et,rt){p($,j,et,rt)})}return u=u?u.then(V,V):V()}})}function B(m,v,p){var u=A;return function(w,$){if(u===T)throw new Error("Generator is already running");if(u===z){if(w==="throw")throw $;return{value:r,done:!0}}for(p.method=w,p.arg=$;;){var j=p.delegate;if(j){var V=a(j,p);if(V){if(V===C)continue;return V}}if(p.method==="next")p.sent=p._sent=p.arg;else if(p.method==="throw"){if(u===A)throw u=z,p.arg;p.dispatchException(p.arg)}else p.method==="return"&&p.abrupt("return",p.arg);u=T;var et=M(m,v,p);if(et.type==="normal"){if(u=p.done?z:I,et.arg===C)continue;return{value:et.arg,done:p.done}}et.type==="throw"&&(u=z,p.method="throw",p.arg=et.arg)}}}function a(m,v){var p=v.method,u=m.iterator[p];if(u===r)return v.delegate=null,p==="throw"&&m.iterator.return&&(v.method="return",v.arg=r,a(m,v),v.method==="throw")||p!=="return"&&(v.method="throw",v.arg=new TypeError("The iterator does not provide a '"+p+"' method")),C;var w=M(u,m.iterator,v.arg);if(w.type==="throw")return v.method="throw",v.arg=w.arg,v.delegate=null,C;var $=w.arg;return $?$.done?(v[m.resultName]=$.value,v.next=m.nextLoc,v.method!=="return"&&(v.method="next",v.arg=r),v.delegate=null,C):$:(v.method="throw",v.arg=new TypeError("iterator result is not an object"),v.delegate=null,C)}function h(m){var v={tryLoc:m[0]};1 in m&&(v.catchLoc=m[1]),2 in m&&(v.finallyLoc=m[2],v.afterLoc=m[3]),this.tryEntries.push(v)}function y(m){var v=m.completion||{};v.type="normal",delete v.arg,m.completion=v}function E(m){this.tryEntries=[{tryLoc:"root"}],m.forEach(h,this),this.reset(!0)}function x(m){if(m||m===""){var v=m[b];if(v)return v.call(m);if(typeof m.next=="function")return m;if(!isNaN(m.length)){var p=-1,u=function w(){for(;++p<m.length;)if(s.call(m,p))return w.value=m[p],w.done=!1,w;return w.value=r,w.done=!0,w};return u.next=u}}throw new TypeError(t(m)+" is not iterable")}return H.prototype=O,c(it,"constructor",{value:O,configurable:!0}),c(O,"constructor",{value:H,configurable:!0}),H.displayName=U(O,k,"GeneratorFunction"),o.isGeneratorFunction=function(m){var v=typeof m=="function"&&m.constructor;return!!v&&(v===H||(v.displayName||v.name)==="GeneratorFunction")},o.mark=function(m){return Object.setPrototypeOf?Object.setPrototypeOf(m,O):(m.__proto__=O,U(m,k,"GeneratorFunction")),m.prototype=Object.create(it),m},o.awrap=function(m){return{__await:m}},J(wt.prototype),U(wt.prototype,_,function(){return this}),o.AsyncIterator=wt,o.async=function(m,v,p,u,w){w===void 0&&(w=Promise);var $=new wt(R(m,v,p,u),w);return o.isGeneratorFunction(v)?$:$.next().then(function(j){return j.done?j.value:$.next()})},J(it),U(it,k,"Generator"),U(it,b,function(){return this}),U(it,"toString",function(){return"[object Generator]"}),o.keys=function(m){var v=Object(m),p=[];for(var u in v)p.push(u);return p.reverse(),function w(){for(;p.length;){var $=p.pop();if($ in v)return w.value=$,w.done=!1,w}return w.done=!0,w}},o.values=x,E.prototype={constructor:E,reset:function(v){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(y),!v)for(var p in this)p.charAt(0)==="t"&&s.call(this,p)&&!isNaN(+p.slice(1))&&(this[p]=r)},stop:function(){this.done=!0;var v=this.tryEntries[0].completion;if(v.type==="throw")throw v.arg;return this.rval},dispatchException:function(v){if(this.done)throw v;var p=this;function u(rt,ot){return j.type="throw",j.arg=v,p.next=rt,ot&&(p.method="next",p.arg=r),!!ot}for(var w=this.tryEntries.length-1;w>=0;--w){var $=this.tryEntries[w],j=$.completion;if($.tryLoc==="root")return u("end");if($.tryLoc<=this.prev){var V=s.call($,"catchLoc"),et=s.call($,"finallyLoc");if(V&&et){if(this.prev<$.catchLoc)return u($.catchLoc,!0);if(this.prev<$.finallyLoc)return u($.finallyLoc)}else if(V){if(this.prev<$.catchLoc)return u($.catchLoc,!0)}else{if(!et)throw new Error("try statement without catch or finally");if(this.prev<$.finallyLoc)return u($.finallyLoc)}}}},abrupt:function(v,p){for(var u=this.tryEntries.length-1;u>=0;--u){var w=this.tryEntries[u];if(w.tryLoc<=this.prev&&s.call(w,"finallyLoc")&&this.prev<w.finallyLoc){var $=w;break}}$&&(v==="break"||v==="continue")&&$.tryLoc<=p&&p<=$.finallyLoc&&($=null);var j=$?$.completion:{};return j.type=v,j.arg=p,$?(this.method="next",this.next=$.finallyLoc,C):this.complete(j)},complete:function(v,p){if(v.type==="throw")throw v.arg;return v.type==="break"||v.type==="continue"?this.next=v.arg:v.type==="return"?(this.rval=this.arg=v.arg,this.method="return",this.next="end"):v.type==="normal"&&p&&(this.next=p),C},finish:function(v){for(var p=this.tryEntries.length-1;p>=0;--p){var u=this.tryEntries[p];if(u.finallyLoc===v)return this.complete(u.completion,u.afterLoc),y(u),C}},catch:function(v){for(var p=this.tryEntries.length-1;p>=0;--p){var u=this.tryEntries[p];if(u.tryLoc===v){var w=u.completion;if(w.type==="throw"){var $=w.arg;y(u)}return $}}throw new Error("illegal catch attempt")},delegateYield:function(v,p,u){return this.delegate={iterator:x(v),resultName:p,nextLoc:u},this.method==="next"&&(this.arg=r),C}},o}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(oi)),oi.exports}var ai,Oo;function Mf(){if(Oo)return ai;Oo=1;var n=kf()();ai=n;try{regeneratorRuntime=n}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}return ai}var ci={exports:{}},Po;function Rf(){return Po||(Po=1,function(n){function t(r,o,i,s,c,d,b){try{var _=r[d](b),k=_.value}catch(U){i(U);return}_.done?o(k):Promise.resolve(k).then(s,c)}function e(r){return function(){var o=this,i=arguments;return new Promise(function(s,c){var d=r.apply(o,i);function b(k){t(d,s,c,b,_,"next",k)}function _(k){t(d,s,c,b,_,"throw",k)}b(void 0)})}}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(ci)),ci.exports}var ui={exports:{}},No;function oo(){return No||(No=1,function(n){function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(ui)),ui.exports}var fi={exports:{}},li={exports:{}},hi={exports:{}},qo;function Lf(){return qo||(qo=1,function(n){var t=en().default;function e(r,o){if(t(r)!="object"||!r)return r;var i=r[Symbol.toPrimitive];if(i!==void 0){var s=i.call(r,o||"default");if(t(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(r)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(hi)),hi.exports}var Do;function Tf(){return Do||(Do=1,function(n){var t=en().default,e=Lf();function r(o){var i=e(o,"string");return t(i)=="symbol"?i:String(i)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports}(li)),li.exports}var zo;function so(){return zo||(zo=1,function(n){var t=Tf();function e(o,i){for(var s=0;s<i.length;s++){var c=i[s];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(o,t(c.key),c)}}function r(o,i,s){return i&&e(o.prototype,i),s&&e(o,s),Object.defineProperty(o,"prototype",{writable:!1}),o}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports}(fi)),fi.exports}var di={exports:{}},pi={exports:{}},$o;function Cf(){return $o||($o=1,function(n){function t(e,r){return n.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},n.exports.__esModule=!0,n.exports.default=n.exports,t(e,r)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(pi)),pi.exports}var Ho;function la(){return Ho||(Ho=1,function(n){var t=Cf();function e(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),o&&t(r,o)}n.exports=e,n.exports.__esModule=!0,n.exports.default=n.exports}(di)),di.exports}var gi={exports:{}},yi={exports:{}},Ko;function Uf(){return Ko||(Ko=1,function(n){function t(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(yi)),yi.exports}var Wo;function ha(){return Wo||(Wo=1,function(n){var t=en().default,e=Uf();function r(o,i){if(i&&(t(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return e(o)}n.exports=r,n.exports.__esModule=!0,n.exports.default=n.exports}(gi)),gi.exports}var mi={exports:{}},jo;function da(){return jo||(jo=1,function(n){function t(e){return n.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(o){return o.__proto__||Object.getPrototypeOf(o)},n.exports.__esModule=!0,n.exports.default=n.exports,t(e)}n.exports=t,n.exports.__esModule=!0,n.exports.default=n.exports}(mi)),mi.exports}var wi={exports:{}},Go;function ao(){return Go||(Go=1,function(n){var t=Object.prototype.hasOwnProperty,e="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(e=!1));function o(d,b,_){this.fn=d,this.context=b,this.once=_||!1}function i(d,b,_,k,U){if(typeof _!="function")throw new TypeError("The listener must be a function");var R=new o(_,k||d,U),M=e?e+b:b;return d._events[M]?d._events[M].fn?d._events[M]=[d._events[M],R]:d._events[M].push(R):(d._events[M]=R,d._eventsCount++),d}function s(d,b){--d._eventsCount===0?d._events=new r:delete d._events[b]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var b=[],_,k;if(this._eventsCount===0)return b;for(k in _=this._events)t.call(_,k)&&b.push(e?k.slice(1):k);return Object.getOwnPropertySymbols?b.concat(Object.getOwnPropertySymbols(_)):b},c.prototype.listeners=function(b){var _=e?e+b:b,k=this._events[_];if(!k)return[];if(k.fn)return[k.fn];for(var U=0,R=k.length,M=new Array(R);U<R;U++)M[U]=k[U].fn;return M},c.prototype.listenerCount=function(b){var _=e?e+b:b,k=this._events[_];return k?k.fn?1:k.length:0},c.prototype.emit=function(b,_,k,U,R,M){var A=e?e+b:b;if(!this._events[A])return!1;var I=this._events[A],T=arguments.length,z,C;if(I.fn){switch(I.once&&this.removeListener(b,I.fn,void 0,!0),T){case 1:return I.fn.call(I.context),!0;case 2:return I.fn.call(I.context,_),!0;case 3:return I.fn.call(I.context,_,k),!0;case 4:return I.fn.call(I.context,_,k,U),!0;case 5:return I.fn.call(I.context,_,k,U,R),!0;case 6:return I.fn.call(I.context,_,k,U,R,M),!0}for(C=1,z=new Array(T-1);C<T;C++)z[C-1]=arguments[C];I.fn.apply(I.context,z)}else{var D=I.length,H;for(C=0;C<D;C++)switch(I[C].once&&this.removeListener(b,I[C].fn,void 0,!0),T){case 1:I[C].fn.call(I[C].context);break;case 2:I[C].fn.call(I[C].context,_);break;case 3:I[C].fn.call(I[C].context,_,k);break;case 4:I[C].fn.call(I[C].context,_,k,U);break;default:if(!z)for(H=1,z=new Array(T-1);H<T;H++)z[H-1]=arguments[H];I[C].fn.apply(I[C].context,z)}}return!0},c.prototype.on=function(b,_,k){return i(this,b,_,k,!1)},c.prototype.once=function(b,_,k){return i(this,b,_,k,!0)},c.prototype.removeListener=function(b,_,k,U){var R=e?e+b:b;if(!this._events[R])return this;if(!_)return s(this,R),this;var M=this._events[R];if(M.fn)M.fn===_&&(!U||M.once)&&(!k||M.context===k)&&s(this,R);else{for(var A=0,I=[],T=M.length;A<T;A++)(M[A].fn!==_||U&&!M[A].once||k&&M[A].context!==k)&&I.push(M[A]);I.length?this._events[R]=I.length===1?I[0]:I:s(this,R)}return this},c.prototype.removeAllListeners=function(b){var _;return b?(_=e?e+b:b,this._events[_]&&s(this,_)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=e,c.EventEmitter=c,n.exports=c}(wi)),wi.exports}var Br={},Vo;function Ff(){if(Vo)return Br;Vo=1;var n=io;Object.defineProperty(Br,"__esModule",{value:!0}),Br.DefaultDataPack=void 0,Br.createError=i;var t=n(oo()),e=n(so()),r=new Map([[-32e3,"Event not provided"],[-32600,"Invalid Request"],[-32601,"Method not found"],[-32602,"Invalid params"],[-32603,"Internal error"],[-32604,"Params not found"],[-32605,"Method forbidden"],[-32606,"Event forbidden"],[-32700,"Parse error"]]),o=function(){function s(){(0,t.default)(this,s)}return(0,e.default)(s,[{key:"encode",value:function(d){return JSON.stringify(d)}},{key:"decode",value:function(d){return JSON.parse(d)}}]),s}();Br.DefaultDataPack=o;function i(s,c){var d={code:s,message:r.get(s)||"Internal Server Error"};return c&&(d.data=c),d}return Br}(function(n){var t=io;Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var e=t(Mf()),r=t(Rf()),o=t(en()),i=t(oo()),s=t(so()),c=t(la()),d=t(ha()),b=t(da()),_=ao(),k=Ff();function U(I){var T=R();return function(){var C=(0,b.default)(I),D;if(T){var H=(0,b.default)(this).constructor;D=Reflect.construct(C,arguments,H)}else D=C.apply(this,arguments);return(0,d.default)(this,D)}}function R(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var M=function(I,T){var z={};for(var C in I)Object.prototype.hasOwnProperty.call(I,C)&&T.indexOf(C)<0&&(z[C]=I[C]);if(I!=null&&typeof Object.getOwnPropertySymbols=="function")for(var D=0,C=Object.getOwnPropertySymbols(I);D<C.length;D++)T.indexOf(C[D])<0&&Object.prototype.propertyIsEnumerable.call(I,C[D])&&(z[C[D]]=I[C[D]]);return z},A=function(I){(0,c.default)(z,I);var T=U(z);function z(C){var D,H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"ws://localhost:8080",O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},W=arguments.length>3?arguments[3]:void 0,K=arguments.length>4?arguments[4]:void 0;(0,i.default)(this,z);var Q=O.autoconnect,it=Q===void 0?!0:Q,J=O.reconnect,wt=J===void 0?!0:J,B=O.reconnect_interval,a=B===void 0?1e3:B,h=O.max_reconnects,y=h===void 0?5:h,E=M(O,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return D=T.call(this),D.webSocketFactory=C,D.queue={},D.rpc_id=0,D.address=H,D.autoconnect=it,D.ready=!1,D.reconnect=wt,D.reconnect_timer_id=void 0,D.reconnect_interval=a,D.max_reconnects=y,D.rest_options=E,D.current_reconnects=0,D.generate_request_id=W||function(){return++D.rpc_id},K?D.dataPack=K:D.dataPack=new k.DefaultDataPack,D.autoconnect&&D._connect(D.address,Object.assign({autoconnect:D.autoconnect,reconnect:D.reconnect,reconnect_interval:D.reconnect_interval,max_reconnects:D.max_reconnects},D.rest_options)),D}return(0,s.default)(z,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(D,H,O,W){var K=this;return!W&&(0,o.default)(O)==="object"&&(W=O,O=null),new Promise(function(Q,it){if(!K.ready)return it(new Error("socket not ready"));var J=K.generate_request_id(D,H),wt={jsonrpc:"2.0",method:D,params:H||void 0,id:J};K.socket.send(K.dataPack.encode(wt),W,function(B){if(B)return it(B);K.queue[J]={promise:[Q,it]},O&&(K.queue[J].timeout=setTimeout(function(){delete K.queue[J],it(new Error("reply timeout"))},O))})})}},{key:"login",value:function(){var C=(0,r.default)(e.default.mark(function H(O){var W;return e.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,this.call("rpc.login",O);case 2:if(W=Q.sent,W){Q.next=5;break}throw new Error("authentication failed");case 5:return Q.abrupt("return",W);case 6:case"end":return Q.stop()}},H,this)}));function D(H){return C.apply(this,arguments)}return D}()},{key:"listMethods",value:function(){var C=(0,r.default)(e.default.mark(function H(){return e.default.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,this.call("__listMethods");case 2:return W.abrupt("return",W.sent);case 3:case"end":return W.stop()}},H,this)}));function D(){return C.apply(this,arguments)}return D}()},{key:"notify",value:function(D,H){var O=this;return new Promise(function(W,K){if(!O.ready)return K(new Error("socket not ready"));var Q={jsonrpc:"2.0",method:D,params:H};O.socket.send(O.dataPack.encode(Q),function(it){if(it)return K(it);W()})})}},{key:"subscribe",value:function(){var C=(0,r.default)(e.default.mark(function H(O){var W;return e.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return typeof O=="string"&&(O=[O]),Q.next=3,this.call("rpc.on",O);case 3:if(W=Q.sent,!(typeof O=="string"&&W[O]!=="ok")){Q.next=6;break}throw new Error("Failed subscribing to an event '"+O+"' with: "+W[O]);case 6:return Q.abrupt("return",W);case 7:case"end":return Q.stop()}},H,this)}));function D(H){return C.apply(this,arguments)}return D}()},{key:"unsubscribe",value:function(){var C=(0,r.default)(e.default.mark(function H(O){var W;return e.default.wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return typeof O=="string"&&(O=[O]),Q.next=3,this.call("rpc.off",O);case 3:if(W=Q.sent,!(typeof O=="string"&&W[O]!=="ok")){Q.next=6;break}throw new Error("Failed unsubscribing from an event with: "+W);case 6:return Q.abrupt("return",W);case 7:case"end":return Q.stop()}},H,this)}));function D(H){return C.apply(this,arguments)}return D}()},{key:"close",value:function(D,H){this.socket.close(D||1e3,H)}},{key:"_connect",value:function(D,H){var O=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(D,H),this.socket.addEventListener("open",function(){O.ready=!0,O.emit("open"),O.current_reconnects=0}),this.socket.addEventListener("message",function(W){var K=W.data;K instanceof ArrayBuffer&&(K=Buffer.from(K).toString());try{K=O.dataPack.decode(K)}catch{return}if(K.notification&&O.listeners(K.notification).length){if(!Object.keys(K.params).length)return O.emit(K.notification);var Q=[K.notification];if(K.params.constructor===Object)Q.push(K.params);else for(var it=0;it<K.params.length;it++)Q.push(K.params[it]);return Promise.resolve().then(function(){O.emit.apply(O,Q)})}if(!O.queue[K.id])return K.method?Promise.resolve().then(function(){O.emit(K.method,K==null?void 0:K.params)}):void 0;"error"in K=="result"in K&&O.queue[K.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),O.queue[K.id].timeout&&clearTimeout(O.queue[K.id].timeout),K.error?O.queue[K.id].promise[1](K.error):O.queue[K.id].promise[0](K.result),delete O.queue[K.id]}),this.socket.addEventListener("error",function(W){return O.emit("error",W)}),this.socket.addEventListener("close",function(W){var K=W.code,Q=W.reason;O.ready&&setTimeout(function(){return O.emit("close",K,Q)},0),O.ready=!1,O.socket=void 0,K!==1e3&&(O.current_reconnects++,O.reconnect&&(O.max_reconnects>O.current_reconnects||O.max_reconnects===0)&&(O.reconnect_timer_id=setTimeout(function(){return O._connect(D,H)},O.reconnect_interval)))})}}]),z}(_.EventEmitter);n.default=A})(ua);const Of=Pr(ua);var pa={};(function(n){var t=io;Object.defineProperty(n,"__esModule",{value:!0}),n.default=k;var e=t(oo()),r=t(so()),o=t(la()),i=t(ha()),s=t(da()),c=ao();function d(U){var R=b();return function(){var A=(0,s.default)(U),I;if(R){var T=(0,s.default)(this).constructor;I=Reflect.construct(A,arguments,T)}else I=A.apply(this,arguments);return(0,i.default)(this,I)}}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _=function(U){(0,o.default)(M,U);var R=d(M);function M(A,I,T){var z;return(0,e.default)(this,M),z=R.call(this),z.socket=new window.WebSocket(A,T),z.socket.onopen=function(){return z.emit("open")},z.socket.onmessage=function(C){return z.emit("message",C.data)},z.socket.onerror=function(C){return z.emit("error",C)},z.socket.onclose=function(C){z.emit("close",C.code,C.reason)},z}return(0,r.default)(M,[{key:"send",value:function(I,T,z){var C=z||T;try{this.socket.send(I),C()}catch(D){C(D)}}},{key:"close",value:function(I,T){this.socket.close(I,T)}},{key:"addEventListener",value:function(I,T,z){this.socket.addEventListener(I,T,z)}}]),M}(c.EventEmitter);function k(U,R){return new _(U,R)}})(pa);const Pf=Pr(pa);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Nf(n){const t=Di(n);Nr(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:e,Fp:r,a:o}=t;if(e){if(!r.eql(o,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}const{bytesToNumberBE:qf,hexToBytes:Df}=Oc,dr={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(n){const{Err:t}=dr;if(n.length<2||n[0]!==2)throw new t("Invalid signature integer tag");const e=n[1],r=n.subarray(2,e+2);if(!e||r.length!==e)throw new t("Invalid signature integer: wrong length");if(r[0]&128)throw new t("Invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:qf(r),l:n.subarray(e+2)}},toSig(n){const{Err:t}=dr,e=typeof n=="string"?Df(n):n;if(!Ke(e))throw new Error("ui8a expected");let r=e.length;if(r<2||e[0]!=48)throw new t("Invalid signature tag");if(e[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:o,l:i}=dr._parseInt(e.subarray(2)),{d:s,l:c}=dr._parseInt(i);if(c.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s}},hexFromSig(n){const t=b=>Number.parseInt(b[0],16)&8?"00"+b:b,e=b=>{const _=b.toString(16);return _.length&1?`0${_}`:_},r=t(e(n.s)),o=t(e(n.r)),i=r.length/2,s=o.length/2,c=e(i),d=e(s);return`30${e(s+i+4)}02${d}${o}02${c}${r}`}},Je=BigInt(0),Ce=BigInt(1);BigInt(2);const Zo=BigInt(3);BigInt(4);function zf(n){const t=Nf(n),{Fp:e}=t,r=t.toBytes||((M,A,I)=>{const T=A.toAffine();return wr(Uint8Array.from([4]),e.toBytes(T.x),e.toBytes(T.y))}),o=t.fromBytes||(M=>{const A=M.subarray(1),I=e.fromBytes(A.subarray(0,e.BYTES)),T=e.fromBytes(A.subarray(e.BYTES,2*e.BYTES));return{x:I,y:T}});function i(M){const{a:A,b:I}=t,T=e.sqr(M),z=e.mul(T,M);return e.add(e.add(z,e.mul(M,A)),I)}if(!e.eql(e.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function s(M){return typeof M=="bigint"&&Je<M&&M<t.n}function c(M){if(!s(M))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(M){const{allowedPrivateKeyLengths:A,nByteLength:I,wrapPrivateKey:T,n:z}=t;if(A&&typeof M!="bigint"){if(Ke(M)&&(M=mr(M)),typeof M!="string"||!A.includes(M.length))throw new Error("Invalid key");M=M.padStart(I*2,"0")}let C;try{C=typeof M=="bigint"?M:pr(ue("private key",M,I))}catch{throw new Error(`private key must be ${I} bytes, hex or bigint, not ${typeof M}`)}return T&&(C=Dt(C,z)),c(C),C}const b=new Map;function _(M){if(!(M instanceof k))throw new Error("ProjectivePoint expected")}class k{constructor(A,I,T){if(this.px=A,this.py=I,this.pz=T,A==null||!e.isValid(A))throw new Error("x required");if(I==null||!e.isValid(I))throw new Error("y required");if(T==null||!e.isValid(T))throw new Error("z required")}static fromAffine(A){const{x:I,y:T}=A||{};if(!A||!e.isValid(I)||!e.isValid(T))throw new Error("invalid affine point");if(A instanceof k)throw new Error("projective point not allowed");const z=C=>e.eql(C,e.ZERO);return z(I)&&z(T)?k.ZERO:new k(I,T,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){const I=e.invertBatch(A.map(T=>T.pz));return A.map((T,z)=>T.toAffine(I[z])).map(k.fromAffine)}static fromHex(A){const I=k.fromAffine(o(ue("pointHex",A)));return I.assertValidity(),I}static fromPrivateKey(A){return k.BASE.multiply(d(A))}_setWindowSize(A){this._WINDOW_SIZE=A,b.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!e.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:A,y:I}=this.toAffine();if(!e.isValid(A)||!e.isValid(I))throw new Error("bad point: x or y not FE");const T=e.sqr(I),z=i(A);if(!e.eql(T,z))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:A}=this.toAffine();if(e.isOdd)return!e.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){_(A);const{px:I,py:T,pz:z}=this,{px:C,py:D,pz:H}=A,O=e.eql(e.mul(I,H),e.mul(C,z)),W=e.eql(e.mul(T,H),e.mul(D,z));return O&&W}negate(){return new k(this.px,e.neg(this.py),this.pz)}double(){const{a:A,b:I}=t,T=e.mul(I,Zo),{px:z,py:C,pz:D}=this;let H=e.ZERO,O=e.ZERO,W=e.ZERO,K=e.mul(z,z),Q=e.mul(C,C),it=e.mul(D,D),J=e.mul(z,C);return J=e.add(J,J),W=e.mul(z,D),W=e.add(W,W),H=e.mul(A,W),O=e.mul(T,it),O=e.add(H,O),H=e.sub(Q,O),O=e.add(Q,O),O=e.mul(H,O),H=e.mul(J,H),W=e.mul(T,W),it=e.mul(A,it),J=e.sub(K,it),J=e.mul(A,J),J=e.add(J,W),W=e.add(K,K),K=e.add(W,K),K=e.add(K,it),K=e.mul(K,J),O=e.add(O,K),it=e.mul(C,D),it=e.add(it,it),K=e.mul(it,J),H=e.sub(H,K),W=e.mul(it,Q),W=e.add(W,W),W=e.add(W,W),new k(H,O,W)}add(A){_(A);const{px:I,py:T,pz:z}=this,{px:C,py:D,pz:H}=A;let O=e.ZERO,W=e.ZERO,K=e.ZERO;const Q=t.a,it=e.mul(t.b,Zo);let J=e.mul(I,C),wt=e.mul(T,D),B=e.mul(z,H),a=e.add(I,T),h=e.add(C,D);a=e.mul(a,h),h=e.add(J,wt),a=e.sub(a,h),h=e.add(I,z);let y=e.add(C,H);return h=e.mul(h,y),y=e.add(J,B),h=e.sub(h,y),y=e.add(T,z),O=e.add(D,H),y=e.mul(y,O),O=e.add(wt,B),y=e.sub(y,O),K=e.mul(Q,h),O=e.mul(it,B),K=e.add(O,K),O=e.sub(wt,K),K=e.add(wt,K),W=e.mul(O,K),wt=e.add(J,J),wt=e.add(wt,J),B=e.mul(Q,B),h=e.mul(it,h),wt=e.add(wt,B),B=e.sub(J,B),B=e.mul(Q,B),h=e.add(h,B),J=e.mul(wt,h),W=e.add(W,J),J=e.mul(y,h),O=e.mul(a,O),O=e.sub(O,J),J=e.mul(a,wt),K=e.mul(y,K),K=e.add(K,J),new k(O,W,K)}subtract(A){return this.add(A.negate())}is0(){return this.equals(k.ZERO)}wNAF(A){return R.wNAFCached(this,b,A,I=>{const T=e.invertBatch(I.map(z=>z.pz));return I.map((z,C)=>z.toAffine(T[C])).map(k.fromAffine)})}multiplyUnsafe(A){const I=k.ZERO;if(A===Je)return I;if(c(A),A===Ce)return this;const{endo:T}=t;if(!T)return R.unsafeLadder(this,A);let{k1neg:z,k1:C,k2neg:D,k2:H}=T.splitScalar(A),O=I,W=I,K=this;for(;C>Je||H>Je;)C&Ce&&(O=O.add(K)),H&Ce&&(W=W.add(K)),K=K.double(),C>>=Ce,H>>=Ce;return z&&(O=O.negate()),D&&(W=W.negate()),W=new k(e.mul(W.px,T.beta),W.py,W.pz),O.add(W)}multiply(A){c(A);let I=A,T,z;const{endo:C}=t;if(C){const{k1neg:D,k1:H,k2neg:O,k2:W}=C.splitScalar(I);let{p:K,f:Q}=this.wNAF(H),{p:it,f:J}=this.wNAF(W);K=R.constTimeNegate(D,K),it=R.constTimeNegate(O,it),it=new k(e.mul(it.px,C.beta),it.py,it.pz),T=K.add(it),z=Q.add(J)}else{const{p:D,f:H}=this.wNAF(I);T=D,z=H}return k.normalizeZ([T,z])[0]}multiplyAndAddUnsafe(A,I,T){const z=k.BASE,C=(H,O)=>O===Je||O===Ce||!H.equals(z)?H.multiplyUnsafe(O):H.multiply(O),D=C(this,I).add(C(A,T));return D.is0()?void 0:D}toAffine(A){const{px:I,py:T,pz:z}=this,C=this.is0();A==null&&(A=C?e.ONE:e.inv(z));const D=e.mul(I,A),H=e.mul(T,A),O=e.mul(z,A);if(C)return{x:e.ZERO,y:e.ZERO};if(!e.eql(O,e.ONE))throw new Error("invZ was invalid");return{x:D,y:H}}isTorsionFree(){const{h:A,isTorsionFree:I}=t;if(A===Ce)return!0;if(I)return I(k,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:A,clearCofactor:I}=t;return A===Ce?this:I?I(k,this):this.multiplyUnsafe(t.h)}toRawBytes(A=!0){return this.assertValidity(),r(k,this,A)}toHex(A=!0){return mr(this.toRawBytes(A))}}k.BASE=new k(t.Gx,t.Gy,e.ONE),k.ZERO=new k(e.ZERO,e.ONE,e.ZERO);const U=t.nBitLength,R=Is(k,t.endo?Math.ceil(U/2):U);return{CURVE:t,ProjectivePoint:k,normPrivateKeyToScalar:d,weierstrassEquation:i,isWithinCurveOrder:s}}function $f(n){const t=Di(n);return Nr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Hf(n){const t=$f(n),{Fp:e,n:r}=t,o=e.BYTES+1,i=2*e.BYTES+1;function s(h){return Je<h&&h<e.ORDER}function c(h){return Dt(h,r)}function d(h){return _i(h,r)}const{ProjectivePoint:b,normPrivateKeyToScalar:_,weierstrassEquation:k,isWithinCurveOrder:U}=zf({...t,toBytes(h,y,E){const x=y.toAffine(),m=e.toBytes(x.x),v=wr;return E?v(Uint8Array.from([y.hasEvenY()?2:3]),m):v(Uint8Array.from([4]),m,e.toBytes(x.y))},fromBytes(h){const y=h.length,E=h[0],x=h.subarray(1);if(y===o&&(E===2||E===3)){const m=pr(x);if(!s(m))throw new Error("Point is not on curve");const v=k(m);let p=e.sqrt(v);const u=(p&Ce)===Ce;return(E&1)===1!==u&&(p=e.neg(p)),{x:m,y:p}}else if(y===i&&E===4){const m=e.fromBytes(x.subarray(0,e.BYTES)),v=e.fromBytes(x.subarray(e.BYTES,2*e.BYTES));return{x:m,y:v}}else throw new Error(`Point of length ${y} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),R=h=>mr(Tr(h,t.nByteLength));function M(h){const y=r>>Ce;return h>y}function A(h){return M(h)?c(-h):h}const I=(h,y,E)=>pr(h.slice(y,E));class T{constructor(y,E,x){this.r=y,this.s=E,this.recovery=x,this.assertValidity()}static fromCompact(y){const E=t.nByteLength;return y=ue("compactSignature",y,E*2),new T(I(y,0,E),I(y,E,2*E))}static fromDER(y){const{r:E,s:x}=dr.toSig(ue("DER",y));return new T(E,x)}assertValidity(){if(!U(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!U(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(y){return new T(this.r,this.s,y)}recoverPublicKey(y){const{r:E,s:x,recovery:m}=this,v=W(ue("msgHash",y));if(m==null||![0,1,2,3].includes(m))throw new Error("recovery id invalid");const p=m===2||m===3?E+t.n:E;if(p>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=m&1?"03":"02",w=b.fromHex(u+R(p)),$=d(p),j=c(-v*$),V=c(x*$),et=b.BASE.multiplyAndAddUnsafe(w,j,V);if(!et)throw new Error("point at infinify");return et.assertValidity(),et}hasHighS(){return M(this.s)}normalizeS(){return this.hasHighS()?new T(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Lr(this.toDERHex())}toDERHex(){return dr.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Lr(this.toCompactHex())}toCompactHex(){return R(this.r)+R(this.s)}}const z={isValidPrivateKey(h){try{return _(h),!0}catch{return!1}},normPrivateKeyToScalar:_,randomPrivateKey:()=>{const h=As(t.n);return Gc(t.randomBytes(h),t.n)},precompute(h=8,y=b.BASE){return y._setWindowSize(h),y.multiply(BigInt(3)),y}};function C(h,y=!0){return b.fromPrivateKey(h).toRawBytes(y)}function D(h){const y=Ke(h),E=typeof h=="string",x=(y||E)&&h.length;return y?x===o||x===i:E?x===2*o||x===2*i:h instanceof b}function H(h,y,E=!0){if(D(h))throw new Error("first arg must be private key");if(!D(y))throw new Error("second arg must be public key");return b.fromHex(y).multiply(_(h)).toRawBytes(E)}const O=t.bits2int||function(h){const y=pr(h),E=h.length*8-t.nBitLength;return E>0?y>>BigInt(E):y},W=t.bits2int_modN||function(h){return c(O(h))},K=qi(t.nBitLength);function Q(h){if(typeof h!="bigint")throw new Error("bigint expected");if(!(Je<=h&&h<K))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Tr(h,t.nByteLength)}function it(h,y,E=J){if(["recovered","canonical"].some(ot=>ot in E))throw new Error("sign() legacy options not supported");const{hash:x,randomBytes:m}=t;let{lowS:v,prehash:p,extraEntropy:u}=E;v==null&&(v=!0),h=ue("msgHash",h),p&&(h=ue("prehashed msgHash",x(h)));const w=W(h),$=_(y),j=[Q($),Q(w)];if(u!=null){const ot=u===!0?m(e.BYTES):u;j.push(ue("extraEntropy",ot))}const V=wr(...j),et=w;function rt(ot){const _t=O(ot);if(!U(_t))return;const gt=d(_t),bt=b.BASE.multiply(_t).toAffine(),Bt=c(bt.x);if(Bt===Je)return;const vt=c(gt*c(et+Bt*$));if(vt===Je)return;let It=(bt.x===Bt?0:2)|Number(bt.y&Ce),De=vt;return v&&M(vt)&&(De=A(vt),It^=1),new T(Bt,De,It)}return{seed:V,k2sig:rt}}const J={lowS:t.lowS,prehash:!1},wt={lowS:t.lowS,prehash:!1};function B(h,y,E=J){const{seed:x,k2sig:m}=it(h,y,E),v=t;return Es(v.hash.outputLen,v.nByteLength,v.hmac)(x,m)}b.BASE._setWindowSize(8);function a(h,y,E,x=wt){var bt;const m=h;if(y=ue("msgHash",y),E=ue("publicKey",E),"strict"in x)throw new Error("options.strict was renamed to lowS");const{lowS:v,prehash:p}=x;let u,w;try{if(typeof m=="string"||Ke(m))try{u=T.fromDER(m)}catch(Bt){if(!(Bt instanceof dr.Err))throw Bt;u=T.fromCompact(m)}else if(typeof m=="object"&&typeof m.r=="bigint"&&typeof m.s=="bigint"){const{r:Bt,s:vt}=m;u=new T(Bt,vt)}else throw new Error("PARSE");w=b.fromHex(E)}catch(Bt){if(Bt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(v&&u.hasHighS())return!1;p&&(y=t.hash(y));const{r:$,s:j}=u,V=W(y),et=d(j),rt=c(V*et),ot=c($*et),_t=(bt=b.BASE.multiplyAndAddUnsafe(w,rt,ot))==null?void 0:bt.toAffine();return _t?c(_t.x)===$:!1}return{CURVE:t,getPublicKey:C,getSharedSecret:H,sign:B,verify:a,ProjectivePoint:b,Signature:T,utils:z}}class ga extends ps{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Qa(t);const r=Pi(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const o=this.blockLen,i=new Uint8Array(o);i.set(r.length>o?t.create().update(r).digest():r);for(let s=0;s<i.length;s++)i[s]^=54;this.iHash.update(i),this.oHash=t.create();for(let s=0;s<i.length;s++)i[s]^=106;this.oHash.update(i),i.fill(0)}update(t){return un(this),this.iHash.update(t),this}digestInto(t){un(this),fs(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:r,finished:o,destroyed:i,blockLen:s,outputLen:c}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=s,t.outputLen=c,t.oHash=e._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const ya=(n,t,e)=>new ga(n,t).update(e).digest();ya.create=(n,t)=>new ga(n,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Kf(n){return{hash:n,hmac:(t,...e)=>ya(n,t,ds(...e)),randomBytes:ys}}function Wf(n,t){const e=r=>Hf({...n,...Kf(r)});return Object.freeze({...e(t),create:e})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ma=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Yo=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),jf=BigInt(1),Mi=BigInt(2),Jo=(n,t)=>(n+t/Mi)/t;function Gf(n){const t=ma,e=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),c=BigInt(44),d=BigInt(88),b=n*n*n%t,_=b*b*n%t,k=Ht(_,e,t)*_%t,U=Ht(k,e,t)*_%t,R=Ht(U,Mi,t)*b%t,M=Ht(R,o,t)*R%t,A=Ht(M,i,t)*M%t,I=Ht(A,c,t)*A%t,T=Ht(I,d,t)*I%t,z=Ht(T,c,t)*A%t,C=Ht(z,e,t)*_%t,D=Ht(C,s,t)*M%t,H=Ht(D,r,t)*b%t,O=Ht(H,Mi,t);if(!Ri.eql(Ri.sqr(O),n))throw new Error("Cannot find square root");return O}const Ri=_s(ma,void 0,void 0,{sqrt:Gf}),co=Wf({a:BigInt(0),b:BigInt(7),Fp:Ri,n:Yo,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const t=Yo,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-jf*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=e,s=BigInt("0x100000000000000000000000000000000"),c=Jo(i*n,t),d=Jo(-r*n,t);let b=Dt(n-c*e-d*o,t),_=Dt(-c*r-d*i,t);const k=b>s,U=_>s;if(k&&(b=t-b),U&&(_=t-_),b>s||_>s)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:k,k1:b,k2neg:U,k2:_}}}},Ii);BigInt(0);co.ProjectivePoint;function Xo(n){try{return Ki.ExtendedPoint.fromHex(n),!0}catch{return!1}}const wa=(n,t)=>Ki.sign(n,t.slice(0,32)),Vf=Ki.verify,Ur=n=>dt.Buffer.isBuffer(n)?n:n instanceof Uint8Array?dt.Buffer.from(n.buffer,n.byteOffset,n.byteLength):dt.Buffer.from(n);class Zf{constructor(t){Object.assign(this,t)}encode(){return dt.Buffer.from(Ps(cn,this))}static decode(t){return Ns(cn,this,t)}static decodeUnchecked(t){return Ts(cn,this,t)}}const cn=new Map;var ba;let va;const Yf=32,He=32;function Jf(n){return n._bn!==void 0}let Qo=1;va=Symbol.toStringTag;class ft extends Zf{constructor(t){if(super({}),this._bn=void 0,Jf(t))this._bn=t._bn;else{if(typeof t=="string"){const e=pe.decode(t);if(e.length!=He)throw new Error("Invalid public key input");this._bn=new Lo(e)}else this._bn=new Lo(t);if(this._bn.byteLength()>He)throw new Error("Invalid public key input")}}static unique(){const t=new ft(Qo);return Qo+=1,new ft(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return pe.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(dt.Buffer);if(t.length===He)return t;const e=dt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[va](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,r){const o=dt.Buffer.concat([t.toBuffer(),dt.Buffer.from(e),r.toBuffer()]),i=Ii(o);return new ft(i)}static createProgramAddressSync(t,e){let r=dt.Buffer.alloc(0);t.forEach(function(i){if(i.length>Yf)throw new TypeError("Max seed length exceeded");r=dt.Buffer.concat([r,Ur(i)])}),r=dt.Buffer.concat([r,e.toBuffer(),dt.Buffer.from("ProgramDerivedAddress")]);const o=Ii(r);if(Xo(o))throw new Error("Invalid seeds, address must fall off the curve");return new ft(o)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let r=255,o;for(;r!=0;){try{const i=t.concat(dt.Buffer.from([r]));o=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;r--;continue}return[o,r]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new ft(t);return Xo(e.toBytes())}}ba=ft;ft.default=new ba("11111111111111111111111111111111");cn.set(ft,{kind:"struct",fields:[["_bn","u256"]]});new ft("BPFLoader1111111111111111111111111111111111");const Rr=1232,uo=127,Vr=64;class xa extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(xa.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ea extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ea.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Hr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Hr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class gn{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const r=new Map;this.keySegments().flat().forEach((i,s)=>{r.set(i.toBase58(),s)});const o=i=>{const s=r.get(i.toBase58());if(s===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return s};return t.map(i=>({programIdIndex:o(i.programId),accountKeyIndexes:i.keys.map(s=>o(s.pubkey)),data:i.data}))}}const xt=(n="publicKey")=>Ot(32,n),Xf=(n="signature")=>Ot(64,n),kr=(n="string")=>{const t=nt([at("length"),at("lengthPadding"),Ot(gr(at(),-8),"chars")],n),e=t.decode.bind(t),r=t.encode.bind(t),o=t;return o.decode=(i,s)=>e(i,s).chars.toString(),o.encode=(i,s,c)=>{const d={chars:dt.Buffer.from(i,"utf8")};return r(d,s,c)},o.alloc=i=>at().span+at().span+dt.Buffer.from(i,"utf8").length,o},Qf=(n="authorized")=>nt([xt("staker"),xt("withdrawer")],n),tl=(n="lockup")=>nt([Ie("unixTimestamp"),Ie("epoch"),xt("custodian")],n),el=(n="voteInit")=>nt([xt("nodePubkey"),xt("authorizedVoter"),xt("authorizedWithdrawer"),At("commission")],n),rl=(n="voteAuthorizeWithSeedArgs")=>nt([at("voteAuthorizationType"),xt("currentAuthorityDerivedKeyOwnerPubkey"),kr("currentAuthorityDerivedKeySeed"),xt("newAuthorized")],n);function ke(n){let t=0,e=0;for(;;){let r=n.shift();if(t|=(r&127)<<e*7,e+=1,!(r&128))break}return t}function Me(n,t){let e=t;for(;;){let r=e&127;if(e>>=7,e==0){n.push(r);break}else r|=128,n.push(r)}}function qt(n,t){if(!n)throw new Error(t||"Assertion failed")}class Bn{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const r=new Map,o=s=>{const c=s.toBase58();let d=r.get(c);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(c,d)),d},i=o(e);i.isSigner=!0,i.isWritable=!0;for(const s of t){o(s.programId).isInvoked=!0;for(const c of s.keys){const d=o(c.pubkey);d.isSigner||(d.isSigner=c.isSigner),d.isWritable||(d.isWritable=c.isWritable)}}return new Bn(e,r)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];qt(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,d])=>d.isSigner&&d.isWritable),r=t.filter(([,d])=>d.isSigner&&!d.isWritable),o=t.filter(([,d])=>!d.isSigner&&d.isWritable),i=t.filter(([,d])=>!d.isSigner&&!d.isWritable),s={numRequiredSignatures:e.length+r.length,numReadonlySignedAccounts:r.length,numReadonlyUnsignedAccounts:i.length};{qt(e.length>0,"Expected at least one writable signer key");const[d]=e[0];qt(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const c=[...e.map(([d])=>new ft(d)),...r.map(([d])=>new ft(d)),...o.map(([d])=>new ft(d)),...i.map(([d])=>new ft(d))];return[s,c]}extractTableLookup(t){const[e,r]=this.drainKeysFoundInLookupTable(t.state.addresses,s=>!s.isSigner&&!s.isInvoked&&s.isWritable),[o,i]=this.drainKeysFoundInLookupTable(t.state.addresses,s=>!s.isSigner&&!s.isInvoked&&!s.isWritable);if(!(e.length===0&&o.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:o},{writable:r,readonly:i}]}drainKeysFoundInLookupTable(t,e){const r=new Array,o=new Array;for(const[i,s]of this.keyMetaMap.entries())if(e(s)){const c=new ft(i),d=t.findIndex(b=>b.equals(c));d>=0&&(qt(d<256,"Max lookup table index exceeded"),r.push(d),o.push(c),this.keyMetaMap.delete(i))}return[r,o]}}class Qe{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new ft(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:pe.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new gn(this.staticAccountKeys)}static compile(t){const e=Bn.compile(t.instructions,t.payerKey),[r,o]=e.getMessageComponents(),s=new gn(o).compileInstructions(t.instructions).map(c=>({programIdIndex:c.programIdIndex,accounts:c.accountKeyIndexes,data:pe.encode(c.data)}));return new Qe({header:r,accountKeys:o,recentBlockhash:t.recentBlockhash,instructions:s})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const r=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return r<i}else{const r=e-this.header.numReadonlySignedAccounts;return t<r}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Me(e,t);const r=this.instructions.map(k=>{const{accounts:U,programIdIndex:R}=k,M=Array.from(pe.decode(k.data));let A=[];Me(A,U.length);let I=[];return Me(I,M.length),{programIdIndex:R,keyIndicesCount:dt.Buffer.from(A),keyIndices:U,dataLength:dt.Buffer.from(I),data:M}});let o=[];Me(o,r.length);let i=dt.Buffer.alloc(Rr);dt.Buffer.from(o).copy(i);let s=o.length;r.forEach(k=>{const R=nt([At("programIdIndex"),Ot(k.keyIndicesCount.length,"keyIndicesCount"),ve(At("keyIndex"),k.keyIndices.length,"keyIndices"),Ot(k.dataLength.length,"dataLength"),ve(At("userdatum"),k.data.length,"data")]).encode(k,i,s);s+=R}),i=i.slice(0,s);const c=nt([Ot(1,"numRequiredSignatures"),Ot(1,"numReadonlySignedAccounts"),Ot(1,"numReadonlyUnsignedAccounts"),Ot(e.length,"keyCount"),ve(xt("key"),t,"keys"),xt("recentBlockhash")]),d={numRequiredSignatures:dt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:dt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:dt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:dt.Buffer.from(e),keys:this.accountKeys.map(k=>Ur(k.toBytes())),recentBlockhash:pe.decode(this.recentBlockhash)};let b=dt.Buffer.alloc(2048);const _=c.encode(d,b);return i.copy(b,_),b.slice(0,_+i.length)}static from(t){let e=[...t];const r=e.shift();if(r!==(r&uo))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const o=e.shift(),i=e.shift(),s=ke(e);let c=[];for(let U=0;U<s;U++){const R=e.slice(0,He);e=e.slice(He),c.push(new ft(dt.Buffer.from(R)))}const d=e.slice(0,He);e=e.slice(He);const b=ke(e);let _=[];for(let U=0;U<b;U++){const R=e.shift(),M=ke(e),A=e.slice(0,M);e=e.slice(M);const I=ke(e),T=e.slice(0,I),z=pe.encode(dt.Buffer.from(T));e=e.slice(I),_.push({programIdIndex:R,accounts:A,data:z})}const k={header:{numRequiredSignatures:r,numReadonlySignedAccounts:o,numReadonlyUnsignedAccounts:i},recentBlockhash:pe.encode(dt.Buffer.from(d)),accountKeys:c,instructions:_};return new Qe(k)}}class Zr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new gn(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,r=this.staticAccountKeys.length;if(t>=r){const o=t-r,i=this.addressTableLookups.reduce((s,c)=>s+c.writableIndexes.length,0);return o<i}else if(t>=this.header.numRequiredSignatures){const o=t-e,s=r-e-this.header.numReadonlyUnsignedAccounts;return o<s}else{const o=e-this.header.numReadonlySignedAccounts;return t<o}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const r of this.addressTableLookups){const o=t.find(i=>i.key.equals(r.accountKey));if(!o)throw new Error(`Failed to find address lookup table account for table key ${r.accountKey.toBase58()}`);for(const i of r.writableIndexes)if(i<o.state.addresses.length)e.writable.push(o.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`);for(const i of r.readonlyIndexes)if(i<o.state.addresses.length)e.readonly.push(o.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${r.accountKey.toBase58()}`)}return e}static compile(t){const e=Bn.compile(t.instructions,t.payerKey),r=new Array,o={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const _ of i){const k=e.extractTableLookup(_);if(k!==void 0){const[U,{writable:R,readonly:M}]=k;r.push(U),o.writable.push(...R),o.readonly.push(...M)}}const[s,c]=e.getMessageComponents(),b=new gn(c,o).compileInstructions(t.instructions);return new Zr({header:s,staticAccountKeys:c,recentBlockhash:t.recentBlockhash,compiledInstructions:b,addressTableLookups:r})}serialize(){const t=Array();Me(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),r=Array();Me(r,this.compiledInstructions.length);const o=this.serializeAddressTableLookups(),i=Array();Me(i,this.addressTableLookups.length);const s=nt([At("prefix"),nt([At("numRequiredSignatures"),At("numReadonlySignedAccounts"),At("numReadonlyUnsignedAccounts")],"header"),Ot(t.length,"staticAccountKeysLength"),ve(xt(),this.staticAccountKeys.length,"staticAccountKeys"),xt("recentBlockhash"),Ot(r.length,"instructionsLength"),Ot(e.length,"serializedInstructions"),Ot(i.length,"addressTableLookupsLength"),Ot(o.length,"serializedAddressTableLookups")]),c=new Uint8Array(Rr),b=s.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(_=>_.toBytes()),recentBlockhash:pe.decode(this.recentBlockhash),instructionsLength:new Uint8Array(r),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:o},c);return c.slice(0,b)}serializeInstructions(){let t=0;const e=new Uint8Array(Rr);for(const r of this.compiledInstructions){const o=Array();Me(o,r.accountKeyIndexes.length);const i=Array();Me(i,r.data.length);const s=nt([At("programIdIndex"),Ot(o.length,"encodedAccountKeyIndexesLength"),ve(At(),r.accountKeyIndexes.length,"accountKeyIndexes"),Ot(i.length,"encodedDataLength"),Ot(r.data.length,"data")]);t+=s.encode({programIdIndex:r.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(o),accountKeyIndexes:r.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:r.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Rr);for(const r of this.addressTableLookups){const o=Array();Me(o,r.writableIndexes.length);const i=Array();Me(i,r.readonlyIndexes.length);const s=nt([xt("accountKey"),Ot(o.length,"encodedWritableIndexesLength"),ve(At(),r.writableIndexes.length,"writableIndexes"),Ot(i.length,"encodedReadonlyIndexesLength"),ve(At(),r.readonlyIndexes.length,"readonlyIndexes")]);t+=s.encode({accountKey:r.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(o),writableIndexes:r.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:r.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const r=e.shift(),o=r&uo;qt(r!==o,"Expected versioned message but received legacy message");const i=o;qt(i===0,`Expected versioned message with version 0 but found version ${i}`);const s={numRequiredSignatures:e.shift(),numReadonlySignedAccounts:e.shift(),numReadonlyUnsignedAccounts:e.shift()},c=[],d=ke(e);for(let M=0;M<d;M++)c.push(new ft(e.splice(0,He)));const b=pe.encode(e.splice(0,He)),_=ke(e),k=[];for(let M=0;M<_;M++){const A=e.shift(),I=ke(e),T=e.splice(0,I),z=ke(e),C=new Uint8Array(e.splice(0,z));k.push({programIdIndex:A,accountKeyIndexes:T,data:C})}const U=ke(e),R=[];for(let M=0;M<U;M++){const A=new ft(e.splice(0,He)),I=ke(e),T=e.splice(0,I),z=ke(e),C=e.splice(0,z);R.push({accountKey:A,writableIndexes:T,readonlyIndexes:C})}return new Zr({header:s,staticAccountKeys:c,recentBlockhash:b,compiledInstructions:k,addressTableLookups:R})}}const Sa={deserializeMessageVersion(n){const t=n[0],e=t&uo;return e===t?"legacy":e},deserialize:n=>{const t=Sa.deserializeMessageVersion(n);if(t==="legacy")return Qe.from(n);if(t===0)return Zr.deserialize(n);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let ir=function(n){return n[n.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",n[n.PROCESSED=1]="PROCESSED",n[n.TIMED_OUT=2]="TIMED_OUT",n[n.NONCE_INVALID=3]="NONCE_INVALID",n}({});const nl=dt.Buffer.alloc(Vr).fill(0);class ts{constructor(t){this.keys=void 0,this.programId=void 0,this.data=dt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:r})=>({pubkey:t.toJSON(),isSigner:e,isWritable:r})),programId:this.programId.toJSON(),data:[...this.data]}}}class or{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:r}=t;this.minNonceContextSlot=e,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:r}=t;this.recentBlockhash=e,this.lastValidBlockHeight=r}else{const{recentBlockhash:e,nonceInfo:r}=t;r&&(this.nonceInfo=r),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new ts(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let r;if(this.feePayer)r=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)r=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<e.length;A++)if(e[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const o=[],i=[];e.forEach(A=>{A.keys.forEach(T=>{i.push({...T})});const I=A.programId.toString();o.includes(I)||o.push(I)}),o.forEach(A=>{i.push({pubkey:new ft(A),isSigner:!1,isWritable:!1})});const s=[];i.forEach(A=>{const I=A.pubkey.toString(),T=s.findIndex(z=>z.pubkey.toString()===I);T>-1?(s[T].isWritable=s[T].isWritable||A.isWritable,s[T].isSigner=s[T].isSigner||A.isSigner):s.push(A)}),s.sort(function(A,I){if(A.isSigner!==I.isSigner)return A.isSigner?-1:1;if(A.isWritable!==I.isWritable)return A.isWritable?-1:1;const T={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(I.pubkey.toBase58(),"en",T)});const c=s.findIndex(A=>A.pubkey.equals(r));if(c>-1){const[A]=s.splice(c,1);A.isSigner=!0,A.isWritable=!0,s.unshift(A)}else s.unshift({pubkey:r,isSigner:!0,isWritable:!0});for(const A of this.signatures){const I=s.findIndex(T=>T.pubkey.equals(A.publicKey));if(I>-1)s[I].isSigner||(s[I].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let d=0,b=0,_=0;const k=[],U=[];s.forEach(({pubkey:A,isSigner:I,isWritable:T})=>{I?(k.push(A.toString()),d+=1,T||(b+=1)):(U.push(A.toString()),T||(_+=1))});const R=k.concat(U),M=e.map(A=>{const{data:I,programId:T}=A;return{programIdIndex:R.indexOf(T.toString()),accounts:A.keys.map(z=>R.indexOf(z.pubkey.toString())),data:pe.encode(I)}});return M.forEach(A=>{qt(A.programIdIndex>=0),A.accounts.forEach(I=>qt(I>=0))}),new Qe({header:{numRequiredSignatures:d,numReadonlySignedAccounts:b,numReadonlyUnsignedAccounts:_},accountKeys:R,recentBlockhash:t,instructions:M})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((o,i)=>e[i].equals(o.publicKey))||(this.signatures=e.map(r=>({signature:null,publicKey:r}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(r=>{const o=r.toString();return e.has(o)?!1:(e.add(o),!0)}).map(r=>({signature:null,publicKey:r}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const s=i.publicKey.toString();e.has(s)||(e.add(s),r.push(i))}this.signatures=r.map(i=>({signature:null,publicKey:i.publicKey}));const o=this._compile();this._partialSign(o,...r)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,r=[];for(const i of t){const s=i.publicKey.toString();e.has(s)||(e.add(s),r.push(i))}const o=this._compile();this._partialSign(o,...r)}_partialSign(t,...e){const r=t.serialize();e.forEach(o=>{const i=wa(r,o.secretKey);this._addSignature(o.publicKey,Ur(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){qt(e.length===64);const r=this.signatures.findIndex(o=>t.equals(o.publicKey));if(r<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[r].signature=dt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const r={};for(const{signature:o,publicKey:i}of this.signatures)o===null?e&&(r.missing||(r.missing=[])).push(i):Vf(o,t,i.toBytes())||(r.invalid||(r.invalid=[])).push(i);return r.invalid||r.missing?r:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:r}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),o=this.serializeMessage();if(r){const i=this._getMessageSignednessErrors(o,e);if(i){let s="Signature verification failed.";throw i.invalid&&(s+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(c=>c.toBase58()).join("`, `")}\`].`),i.missing&&(s+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(c=>c.toBase58()).join("`, `")}\`].`),new Error(s)}}return this._serialize(o)}_serialize(t){const{signatures:e}=this,r=[];Me(r,e.length);const o=r.length+e.length*64+t.length,i=dt.Buffer.alloc(o);return qt(e.length<256),dt.Buffer.from(r).copy(i,0),e.forEach(({signature:s},c)=>{s!==null&&(qt(s.length===64,"signature has invalid length"),dt.Buffer.from(s).copy(i,r.length+c*64))}),t.copy(i,r.length+e.length*64),qt(i.length<=Rr,`Transaction too large: ${i.length} > ${Rr}`),i}get keys(){return qt(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return qt(this.instructions.length===1),this.instructions[0].programId}get data(){return qt(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const r=ke(e);let o=[];for(let i=0;i<r;i++){const s=e.slice(0,Vr);e=e.slice(Vr),o.push(pe.encode(dt.Buffer.from(s)))}return or.populate(Qe.from(e),o)}static populate(t,e=[]){const r=new or;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),e.forEach((o,i)=>{const s={signature:o==pe.encode(nl)?null:pe.decode(o),publicKey:t.accountKeys[i]};r.signatures.push(s)}),t.instructions.forEach(o=>{const i=o.accounts.map(s=>{const c=t.accountKeys[s];return{pubkey:c,isSigner:r.signatures.some(d=>d.publicKey.toString()===c.toString())||t.isAccountSigner(s),isWritable:t.isAccountWritable(s)}});r.instructions.push(new ts({keys:i,programId:t.accountKeys[o.programIdIndex],data:pe.decode(o.data)}))}),r._message=t,r._json=r.toJSON(),r}}class _a{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)qt(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const r=[];for(let o=0;o<t.header.numRequiredSignatures;o++)r.push(new Uint8Array(Vr));this.signatures=r}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Me(e,this.signatures.length);const r=nt([Ot(e.length,"encodedSignaturesLength"),ve(Xf(),this.signatures.length,"signatures"),Ot(t.length,"serializedMessage")]),o=new Uint8Array(2048),i=r.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},o);return o.slice(0,i)}static deserialize(t){let e=[...t];const r=[],o=ke(e);for(let s=0;s<o;s++)r.push(new Uint8Array(e.splice(0,Vr)));const i=Sa.deserialize(new Uint8Array(e));return new _a(i,r)}sign(t){const e=this.message.serialize(),r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const o of t){const i=r.findIndex(s=>s.equals(o.publicKey));qt(i>=0,`Cannot sign with non signer key ${o.publicKey.toBase58()}`),this.signatures[i]=wa(e,o.secretKey)}}addSignature(t,e){qt(e.byteLength===64,"Signature must be 64 bytes long");const o=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));qt(o>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[o]=e}}const il=160,ol=64,sl=il/ol,al=1e3/sl;new ft("SysvarC1ock11111111111111111111111111111111");new ft("SysvarEpochSchedu1e111111111111111111111111");new ft("Sysvar1nstructions1111111111111111111111111");new ft("SysvarRecentB1ockHashes11111111111111111111");new ft("SysvarRent111111111111111111111111111111111");new ft("SysvarRewards111111111111111111111111111111");new ft("SysvarS1otHashes111111111111111111111111111");new ft("SysvarS1otHistory11111111111111111111111111");new ft("SysvarStakeHistory1111111111111111111111111");function Ir(n){return new Promise(t=>setTimeout(t,n))}const cl=he("lamportsPerSignature"),Ba=nt([at("version"),at("state"),xt("authorizedPubkey"),xt("nonce"),nt([cl],"feeCalculator")]);Ba.span;class fo{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Ba.decode(Ur(t),0);return new fo({authorizedPubkey:new ft(e.authorizedPubkey),nonce:new ft(e.nonce).toString(),feeCalculator:e.feeCalculator})}}const ul=n=>{const t=n.decode.bind(n),e=n.encode.bind(n);return{decode:t,encode:e}},fl=n=>t=>{const e=Ot(n,t),{encode:r,decode:o}=ul(e),i=e;return i.decode=(s,c)=>{const d=o(s,c);return Du(dt.Buffer.from(d))},i.encode=(s,c,d)=>{const b=Hu(s,n);return r(b,c,d)},i},Fr=fl(8);Object.freeze({Create:{index:0,layout:nt([at("instruction"),Ie("lamports"),Ie("space"),xt("programId")])},Assign:{index:1,layout:nt([at("instruction"),xt("programId")])},Transfer:{index:2,layout:nt([at("instruction"),Fr("lamports")])},CreateWithSeed:{index:3,layout:nt([at("instruction"),xt("base"),kr("seed"),Ie("lamports"),Ie("space"),xt("programId")])},AdvanceNonceAccount:{index:4,layout:nt([at("instruction")])},WithdrawNonceAccount:{index:5,layout:nt([at("instruction"),Ie("lamports")])},InitializeNonceAccount:{index:6,layout:nt([at("instruction"),xt("authorized")])},AuthorizeNonceAccount:{index:7,layout:nt([at("instruction"),xt("authorized")])},Allocate:{index:8,layout:nt([at("instruction"),Ie("space")])},AllocateWithSeed:{index:9,layout:nt([at("instruction"),xt("base"),kr("seed"),Ie("space"),xt("programId")])},AssignWithSeed:{index:10,layout:nt([at("instruction"),xt("base"),kr("seed"),xt("programId")])},TransferWithSeed:{index:11,layout:nt([at("instruction"),Fr("lamports"),kr("seed"),xt("programId")])},UpgradeNonceAccount:{index:12,layout:nt([at("instruction")])}});new ft("11111111111111111111111111111111");new ft("BPFLoader2111111111111111111111111111111111");function ll(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var hl=Object.prototype.toString,dl=Object.keys||function(n){var t=[];for(var e in n)t.push(e);return t};function Kr(n,t){var e,r,o,i,s,c,d;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return Kr(n.toJSON(),t);if(d=hl.call(n),d==="[object Array]"){for(o="[",r=n.length-1,e=0;e<r;e++)o+=Kr(n[e],!0)+",";return r>-1&&(o+=Kr(n[e],!0)),o+"]"}else if(d==="[object Object]"){for(i=dl(n).sort(),r=i.length,o="",e=0;e<r;)s=i[e],c=Kr(n[s],!1),c!==void 0&&(o&&(o+=","),o+=JSON.stringify(s)+":"+c),e++;return"{"+o+"}"}else return JSON.stringify(n);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}var pl=function(n){var t=Kr(n,!1);if(t!==void 0)return""+t},es=ll(pl);const $r=32;function bi(n){let t=0;for(;n>1;)n/=2,t++;return t}function gl(n){return n===0?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,n|=n>>32,n+1)}class yl{constructor(t,e,r,o,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=r,this.firstNormalEpoch=o,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=bi(gl(t+$r+1))-bi($r)-1,r=this.getSlotsInEpoch(e),o=t-(r-$r);return[e,o]}else{const e=t-this.firstNormalSlot,r=Math.floor(e/this.slotsPerEpoch),o=this.firstNormalEpoch+r,i=e%this.slotsPerEpoch;return[o,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*$r:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+bi($r)):this.slotsPerEpoch}}class rs extends Error{constructor(t,e){super(t),this.logs=void 0,this.logs=e}}class st extends Error{constructor({code:t,message:e,data:r},o){super(o!=null?`${o}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=r,this.name="SolanaJSONRPCError"}}var ml=globalThis.fetch;class wl extends Of{constructor(t,e,r){const o=i=>{const s=Pf(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in s?this.underlyingSocket=s.socket:this.underlyingSocket=s,s};super(o,t,e,r),this.underlyingSocket=void 0}call(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var r;const e=(r=this.underlyingSocket)==null?void 0:r.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function bl(n,t){let e;try{e=n.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(e.typeIndex!==n.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${n.index}`);return e}const ns=56;class is{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=bl(vl,t),r=t.length-ns;qt(r>=0,"lookup table is invalid"),qt(r%32===0,"lookup table is invalid");const o=r/32,{addresses:i}=nt([ve(xt(),o,"addresses")]).decode(t.slice(ns));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new ft(e.authority[0]):void 0,addresses:i.map(s=>new ft(s))}}}const vl={index:1,layout:nt([at("typeIndex"),Fr("deactivationSlot"),he("lastExtendedSlot"),At("lastExtendedStartIndex"),At(),ve(xt(),gr(At(),-1),"authority")])},xl=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function El(n){const t=n.match(xl);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${n}\``);const[e,r,o,i]=t,s=n.startsWith("https:")?"wss:":"ws:",c=o==null?null:parseInt(o.slice(1),10),d=c==null?"":`:${c+1}`;return`${s}//${r}${d}${i}`}const ce=tn(ro(ft),Z(),n=>new ft(n)),Aa=no([Z(),zt("base64")]),lo=tn(ro(dt.Buffer),Aa,n=>dt.Buffer.from(n[0],"base64")),Sl=30*1e3;function _l(n){if(/^https?:/.test(n)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return n}function Nt(n){let t,e;if(typeof n=="string")t=n;else if(n){const{commitment:r,...o}=n;t=r,e=o}return{commitment:t,config:e}}function Ia(n){return Be([G({jsonrpc:zt("2.0"),id:Z(),result:n}),G({jsonrpc:zt("2.0"),id:Z(),error:G({code:Qr(),message:Z(),data:ct(Ju())})})])}const Bl=Ia(Qr());function mt(n){return tn(Ia(n),Bl,t=>"error"in t?t:{...t,result:Y(t.result,n)})}function Kt(n){return mt(G({context:G({slot:P()}),value:n}))}function An(n){return G({context:G({slot:P()}),value:n})}function vi(n,t){return n===0?new Zr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new ft(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:pe.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new Qe(t)}const Al=G({foundation:P(),foundationTerm:P(),initial:P(),taper:P(),terminal:P()}),Il=mt(tt(X(G({epoch:P(),effectiveSlot:P(),amount:P(),postBalance:P(),commission:ct(X(P()))})))),kl=tt(G({slot:P(),prioritizationFee:P()})),Ml=G({total:P(),validator:P(),foundation:P(),epoch:P()}),Rl=G({epoch:P(),slotIndex:P(),slotsInEpoch:P(),absoluteSlot:P(),blockHeight:ct(P()),transactionCount:ct(P())}),Ll=G({slotsPerEpoch:P(),leaderScheduleSlotOffset:P(),warmup:We(),firstNormalEpoch:P(),firstNormalSlot:P()}),Tl=na(Z(),tt(P())),xr=X(Be([G({}),Z()])),Cl=G({err:xr}),Ul=zt("receivedSignature"),Fl=G({"solana-core":Z(),"feature-set":ct(P())}),os=Kt(G({err:X(Be([G({}),Z()])),logs:X(tt(Z())),accounts:ct(X(tt(X(G({executable:We(),owner:Z(),lamports:P(),data:tt(Z()),rentEpoch:ct(P())}))))),unitsConsumed:ct(P()),returnData:ct(X(G({programId:Z(),data:no([Z(),zt("base64")])})))})),Ol=Kt(G({byIdentity:na(Z(),tt(P())),range:G({firstSlot:P(),lastSlot:P()})}));function Pl(n,t,e,r,o,i){const s=e||ml;let c;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let d;return r&&(d=async(_,k)=>{const U=await new Promise((R,M)=>{try{r(_,k,(A,I)=>R([A,I]))}catch(A){M(A)}});return await s(...U)}),new If(async(_,k)=>{const U={method:"POST",body:_,agent:c,headers:Object.assign({"Content-Type":"application/json"},t||{},Nh)};try{let R=5,M,A=500;for(;d?M=await d(n,U):M=await s(n,U),!(M.status!==429||o===!0||(R-=1,R===0));)console.error(`Server responded with ${M.status} ${M.statusText}.  Retrying after ${A}ms delay...`),await Ir(A),A*=2;const I=await M.text();M.ok?k(null,I):k(new Error(`${M.status} ${M.statusText}: ${I}`))}catch(R){R instanceof Error&&k(R)}},{})}function Nl(n){return(t,e)=>new Promise((r,o)=>{n.request(t,e,(i,s)=>{if(i){o(i);return}r(s)})})}function ql(n){return t=>new Promise((e,r)=>{t.length===0&&e([]);const o=t.map(i=>n.request(i.methodName,i.args));n.request(o,(i,s)=>{if(i){r(i);return}e(s)})})}const Dl=mt(Al),zl=mt(Ml),$l=mt(kl),Hl=mt(Rl),Kl=mt(Ll),Wl=mt(Tl),jl=mt(P()),Gl=Kt(G({total:P(),circulating:P(),nonCirculating:P(),nonCirculatingAccounts:tt(ce)})),Li=G({amount:Z(),uiAmount:X(P()),decimals:P(),uiAmountString:ct(Z())}),Vl=Kt(tt(G({address:ce,amount:Z(),uiAmount:X(P()),decimals:P(),uiAmountString:ct(Z())}))),Zl=Kt(tt(G({pubkey:ce,account:G({executable:We(),owner:ce,lamports:P(),data:lo,rentEpoch:P()})}))),Ti=G({program:Z(),parsed:Qr(),space:P()}),Yl=Kt(tt(G({pubkey:ce,account:G({executable:We(),owner:ce,lamports:P(),data:Ti,rentEpoch:P()})}))),Jl=Kt(tt(G({lamports:P(),address:ce}))),Yr=G({executable:We(),owner:ce,lamports:P(),data:lo,rentEpoch:P()}),Xl=G({pubkey:ce,account:Yr}),Ql=tn(Be([ro(dt.Buffer),Ti]),Be([Aa,Ti]),n=>Array.isArray(n)?Y(n,lo):n),Ci=G({executable:We(),owner:ce,lamports:P(),data:Ql,rentEpoch:P()}),th=G({pubkey:ce,account:Ci}),eh=G({state:Be([zt("active"),zt("inactive"),zt("activating"),zt("deactivating")]),active:P(),inactive:P()}),rh=mt(tt(G({signature:Z(),slot:P(),err:xr,memo:X(Z()),blockTime:ct(X(P()))}))),nh=mt(tt(G({signature:Z(),slot:P(),err:xr,memo:X(Z()),blockTime:ct(X(P()))}))),ih=G({subscription:P(),result:An(Yr)}),oh=G({pubkey:ce,account:Yr}),sh=G({subscription:P(),result:An(oh)}),ah=G({parent:P(),slot:P(),root:P()}),ch=G({subscription:P(),result:ah}),uh=Be([G({type:Be([zt("firstShredReceived"),zt("completed"),zt("optimisticConfirmation"),zt("root")]),slot:P(),timestamp:P()}),G({type:zt("createdBank"),parent:P(),slot:P(),timestamp:P()}),G({type:zt("frozen"),slot:P(),timestamp:P(),stats:G({numTransactionEntries:P(),numSuccessfulTransactions:P(),numFailedTransactions:P(),maxTransactionsPerEntry:P()})}),G({type:zt("dead"),slot:P(),timestamp:P(),err:Z()})]),fh=G({subscription:P(),result:uh}),lh=G({subscription:P(),result:An(Be([Cl,Ul]))}),hh=G({subscription:P(),result:P()}),dh=G({pubkey:Z(),gossip:X(Z()),tpu:X(Z()),rpc:X(Z()),version:X(Z())}),ss=G({votePubkey:Z(),nodePubkey:Z(),activatedStake:P(),epochVoteAccount:We(),epochCredits:tt(no([P(),P(),P()])),commission:P(),lastVote:P(),rootSlot:X(P())}),ph=mt(G({current:tt(ss),delinquent:tt(ss)})),gh=Be([zt("processed"),zt("confirmed"),zt("finalized")]),yh=G({slot:P(),confirmations:X(P()),err:xr,confirmationStatus:ct(gh)}),mh=Kt(tt(X(yh))),wh=mt(P()),ka=G({accountKey:ce,writableIndexes:tt(P()),readonlyIndexes:tt(P())}),ho=G({signatures:tt(Z()),message:G({accountKeys:tt(Z()),header:G({numRequiredSignatures:P(),numReadonlySignedAccounts:P(),numReadonlyUnsignedAccounts:P()}),instructions:tt(G({accounts:tt(P()),data:Z(),programIdIndex:P()})),recentBlockhash:Z(),addressTableLookups:ct(tt(ka))})}),Ma=G({pubkey:ce,signer:We(),writable:We(),source:ct(Be([zt("transaction"),zt("lookupTable")]))}),Ra=G({accountKeys:tt(Ma),signatures:tt(Z())}),La=G({parsed:Qr(),program:Z(),programId:ce}),Ta=G({accounts:tt(ce),data:Z(),programId:ce}),bh=Be([Ta,La]),vh=Be([G({parsed:Qr(),program:Z(),programId:Z()}),G({accounts:tt(Z()),data:Z(),programId:Z()})]),Ca=tn(bh,vh,n=>"accounts"in n?Y(n,Ta):Y(n,La)),Ua=G({signatures:tt(Z()),message:G({accountKeys:tt(Ma),instructions:tt(Ca),recentBlockhash:Z(),addressTableLookups:ct(X(tt(ka)))})}),yn=G({accountIndex:P(),mint:Z(),owner:ct(Z()),uiTokenAmount:Li}),Fa=G({writable:tt(ce),readonly:tt(ce)}),In=G({err:xr,fee:P(),innerInstructions:ct(X(tt(G({index:P(),instructions:tt(G({accounts:tt(P()),data:Z(),programIdIndex:P()}))})))),preBalances:tt(P()),postBalances:tt(P()),logMessages:ct(X(tt(Z()))),preTokenBalances:ct(X(tt(yn))),postTokenBalances:ct(X(tt(yn))),loadedAddresses:ct(Fa),computeUnitsConsumed:ct(P())}),po=G({err:xr,fee:P(),innerInstructions:ct(X(tt(G({index:P(),instructions:tt(Ca)})))),preBalances:tt(P()),postBalances:tt(P()),logMessages:ct(X(tt(Z()))),preTokenBalances:ct(X(tt(yn))),postTokenBalances:ct(X(tt(yn))),loadedAddresses:ct(Fa),computeUnitsConsumed:ct(P())}),zr=Be([zt(0),zt("legacy")]),Er=G({pubkey:Z(),lamports:P(),postBalance:X(P()),rewardType:X(Z()),commission:ct(X(P()))}),xh=mt(X(G({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),transactions:tt(G({transaction:ho,meta:X(In),version:ct(zr)})),rewards:ct(tt(Er)),blockTime:X(P()),blockHeight:X(P())}))),Eh=mt(X(G({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),rewards:ct(tt(Er)),blockTime:X(P()),blockHeight:X(P())}))),Sh=mt(X(G({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),transactions:tt(G({transaction:Ra,meta:X(In),version:ct(zr)})),rewards:ct(tt(Er)),blockTime:X(P()),blockHeight:X(P())}))),_h=mt(X(G({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),transactions:tt(G({transaction:Ua,meta:X(po),version:ct(zr)})),rewards:ct(tt(Er)),blockTime:X(P()),blockHeight:X(P())}))),Bh=mt(X(G({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),transactions:tt(G({transaction:Ra,meta:X(po),version:ct(zr)})),rewards:ct(tt(Er)),blockTime:X(P()),blockHeight:X(P())}))),Ah=mt(X(G({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),rewards:ct(tt(Er)),blockTime:X(P()),blockHeight:X(P())}))),Ih=mt(X(G({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),transactions:tt(G({transaction:ho,meta:X(In)})),rewards:ct(tt(Er)),blockTime:X(P())}))),as=mt(X(G({blockhash:Z(),previousBlockhash:Z(),parentSlot:P(),signatures:tt(Z()),blockTime:X(P())}))),xi=mt(X(G({slot:P(),meta:X(In),blockTime:ct(X(P())),transaction:ho,version:ct(zr)}))),an=mt(X(G({slot:P(),transaction:Ua,meta:X(po),blockTime:ct(X(P())),version:ct(zr)}))),kh=Kt(G({blockhash:Z(),feeCalculator:G({lamportsPerSignature:P()})})),Mh=Kt(G({blockhash:Z(),lastValidBlockHeight:P()})),Rh=Kt(We()),Lh=G({slot:P(),numTransactions:P(),numSlots:P(),samplePeriodSecs:P()}),Th=mt(tt(Lh)),Ch=Kt(X(G({feeCalculator:G({lamportsPerSignature:P()})}))),Uh=mt(Z()),Fh=mt(Z()),Oh=G({err:xr,logs:tt(Z()),signature:Z()}),Ph=G({result:An(Oh),subscription:P()}),Nh={"solana-client":"js/0.0.0-development"};class ud{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const b={};return async _=>{const{commitment:k,config:U}=Nt(_),R=this._buildArgs([],k,void 0,U),M=es(R);return b[M]=b[M]??(async()=>{try{const A=await this._rpcRequest("getBlockHeight",R),I=Y(A,mt(P()));if("error"in I)throw new st(I.error,"failed to get block height information");return I.result}finally{delete b[M]}})(),await b[M]}})();let r,o,i,s,c,d;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,r=e.wsEndpoint,o=e.httpHeaders,i=e.fetch,s=e.fetchMiddleware,c=e.disableRetryOnRateLimit,d=e.httpAgent),this._rpcEndpoint=_l(t),this._rpcWsEndpoint=r||El(t),this._rpcClient=Pl(t,o,i,s,c,d),this._rpcRequest=Nl(this._rpcClient),this._rpcBatchRequest=ql(this._rpcClient),this._rpcWebSocket=new wl(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:r,config:o}=Nt(e),i=this._buildArgs([t.toBase58()],r,void 0,o),s=await this._rpcRequest("getBalance",i),c=Y(s,Kt(P()));if("error"in c)throw new st(c.error,`failed to get balance for ${t.toBase58()}`);return c.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+r)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),r=Y(e,mt(X(P())));if("error"in r)throw new st(r.error,`failed to get block time for slot ${t}`);return r.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Y(t,mt(P()));if("error"in e)throw new st(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Y(t,jl);if("error"in e)throw new st(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const r=await this._rpcRequest("getSupply",[e]),o=Y(r,Gl);if("error"in o)throw new st(o.error,"failed to get supply");return o.result}async getTokenSupply(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenSupply",r),i=Y(o,Kt(Li));if("error"in i)throw new st(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenAccountBalance",r),i=Y(o,Kt(Li));if("error"in i)throw new st(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,r){const{commitment:o,config:i}=Nt(r);let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const c=this._buildArgs(s,o,"base64",i),d=await this._rpcRequest("getTokenAccountsByOwner",c),b=Y(d,Zl);if("error"in b)throw new st(b.error,`failed to get token accounts owned by account ${t.toBase58()}`);return b.result}async getParsedTokenAccountsByOwner(t,e,r){let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const i=this._buildArgs(o,r,"jsonParsed"),s=await this._rpcRequest("getTokenAccountsByOwner",i),c=Y(s,Yl);if("error"in c)throw new st(c.error,`failed to get token accounts owned by account ${t.toBase58()}`);return c.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},r=e.filter||e.commitment?[e]:[],o=await this._rpcRequest("getLargestAccounts",r),i=Y(o,Jl);if("error"in i)throw new st(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const r=this._buildArgs([t.toBase58()],e),o=await this._rpcRequest("getTokenLargestAccounts",r),i=Y(o,Vl);if("error"in i)throw new st(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:r,config:o}=Nt(e),i=this._buildArgs([t.toBase58()],r,"base64",o),s=await this._rpcRequest("getAccountInfo",i),c=Y(s,Kt(X(Yr)));if("error"in c)throw new st(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getParsedAccountInfo(t,e){const{commitment:r,config:o}=Nt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",o),s=await this._rpcRequest("getAccountInfo",i),c=Y(s,Kt(X(Ci)));if("error"in c)throw new st(c.error,`failed to get info about account ${t.toBase58()}`);return c.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(r){throw new Error("failed to get info about account "+t.toBase58()+": "+r)}}async getMultipleParsedAccounts(t,e){const{commitment:r,config:o}=Nt(e),i=t.map(b=>b.toBase58()),s=this._buildArgs([i],r,"jsonParsed",o),c=await this._rpcRequest("getMultipleAccounts",s),d=Y(c,Kt(tt(X(Ci))));if("error"in d)throw new st(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:r,config:o}=Nt(e),i=t.map(b=>b.toBase58()),s=this._buildArgs([i],r,"base64",o),c=await this._rpcRequest("getMultipleAccounts",s),d=Y(c,Kt(tt(X(Yr))));if("error"in d)throw new st(d.error,`failed to get info for accounts ${i}`);return d.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,r){const{commitment:o,config:i}=Nt(e),s=this._buildArgs([t.toBase58()],o,void 0,{...i,epoch:r??(i==null?void 0:i.epoch)}),c=await this._rpcRequest("getStakeActivation",s),d=Y(c,mt(eh));if("error"in d)throw new st(d.error,`failed to get Stake Activation ${t.toBase58()}`);return d.result}async getProgramAccounts(t,e){const{commitment:r,config:o}=Nt(e),{encoding:i,...s}=o||{},c=this._buildArgs([t.toBase58()],r,i||"base64",s),d=await this._rpcRequest("getProgramAccounts",c),b=tt(Xl),_=s.withContext===!0?Y(d,Kt(b)):Y(d,mt(b));if("error"in _)throw new st(_.error,`failed to get accounts owned by program ${t.toBase58()}`);return _.result}async getParsedProgramAccounts(t,e){const{commitment:r,config:o}=Nt(e),i=this._buildArgs([t.toBase58()],r,"jsonParsed",o),s=await this._rpcRequest("getProgramAccounts",i),c=Y(s,mt(tt(th)));if("error"in c)throw new st(c.error,`failed to get accounts owned by program ${t.toBase58()}`);return c.result}async confirmTransaction(t,e){var i;let r;if(typeof t=="string")r=t;else{const s=t;if((i=s.abortSignal)!=null&&i.aborted)return Promise.reject(s.abortSignal.reason);r=s.signature}let o;try{o=pe.decode(r)}catch{throw new Error("signature must be base58 encoded: "+r)}return qt(o.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:r}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,r)=>{t!=null&&(t.aborted?r(t.reason):t.addEventListener("abort",()=>{r(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let r,o,i=!1;const s=new Promise((d,b)=>{try{r=this.onSignature(e,(k,U)=>{r=void 0;const R={context:U,value:k};d({__type:ir.PROCESSED,response:R})},t);const _=new Promise(k=>{r==null?k():o=this._onSubscriptionStateChange(r,U=>{U==="subscribed"&&k()})});(async()=>{if(await _,i)return;const k=await this.getSignatureStatus(e);if(i||k==null)return;const{context:U,value:R}=k;if(R!=null)if(R!=null&&R.err)b(R.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(R.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(R.confirmationStatus==="processed"||R.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,d({__type:ir.PROCESSED,response:{context:U,value:R}})}})()}catch(_){b(_)}});return{abortConfirmation:()=>{o&&(o(),o=void 0),r!=null&&(this.removeSignatureListener(r),r=void 0)},confirmationPromise:s}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:r,signature:o}}){let i=!1;const s=new Promise(k=>{const U=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let R=await U();if(!i){for(;R<=r;)if(await Ir(1e3),i||(R=await U(),i))return;k({__type:ir.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:c,confirmationPromise:d}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),b=this.getCancellationPromise(e);let _;try{const k=await Promise.race([b,d,s]);if(k.__type===ir.PROCESSED)_=k.response;else throw new xa(o)}finally{i=!0,c()}return _}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:r,nonceAccountPubkey:o,nonceValue:i,signature:s}}){let c=!1;const d=new Promise(R=>{let M=i,A=null;const I=async()=>{try{const{context:T,value:z}=await this.getNonceAndContext(o,{commitment:t,minContextSlot:r});return A=T.slot,z==null?void 0:z.nonce}catch{return M}};(async()=>{if(M=await I(),!c)for(;;){if(i!==M){R({__type:ir.NONCE_INVALID,slotInWhichNonceDidAdvance:A});return}if(await Ir(2e3),c||(M=await I(),c))return}})()}),{abortConfirmation:b,confirmationPromise:_}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),k=this.getCancellationPromise(e);let U;try{const R=await Promise.race([k,_,d]);if(R.__type===ir.PROCESSED)U=R.response;else{let M;for(;;){const A=await this.getSignatureStatus(s);if(A==null)break;if(A.context.slot<(R.slotInWhichNonceDidAdvance??r)){await Ir(400);continue}M=A;break}if(M!=null&&M.value){const A=t||"finalized",{confirmationStatus:I}=M.value;switch(A){case"processed":case"recent":if(I!=="processed"&&I!=="confirmed"&&I!=="finalized")throw new Hr(s);break;case"confirmed":case"single":case"singleGossip":if(I!=="confirmed"&&I!=="finalized")throw new Hr(s);break;case"finalized":case"max":case"root":if(I!=="finalized")throw new Hr(s);break;default:}U={context:M.context,value:{err:M.value.err}}}else throw new Hr(s)}}finally{c=!0,b()}return U}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let r;const o=new Promise(d=>{let b=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{b=this._confirmTransactionInitialTimeout||3e4;break}}r=setTimeout(()=>d({__type:ir.TIMED_OUT,timeoutMs:b}),b)}),{abortConfirmation:i,confirmationPromise:s}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let c;try{const d=await Promise.race([s,o]);if(d.__type===ir.PROCESSED)c=d.response;else throw new Ea(e,d.timeoutMs/1e3)}finally{clearTimeout(r),i()}return c}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Y(t,mt(tt(dh)));if("error"in e)throw new st(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getVoteAccounts",e),o=Y(r,ph);if("error"in o)throw new st(o.error,"failed to get vote accounts");return o.result}async getSlot(t){const{commitment:e,config:r}=Nt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlot",o),s=Y(i,mt(P()));if("error"in s)throw new st(s.error,"failed to get slot");return s.result}async getSlotLeader(t){const{commitment:e,config:r}=Nt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getSlotLeader",o),s=Y(i,mt(Z()));if("error"in s)throw new st(s.error,"failed to get slot leader");return s.result}async getSlotLeaders(t,e){const r=[t,e],o=await this._rpcRequest("getSlotLeaders",r),i=Y(o,mt(tt(ce)));if("error"in i)throw new st(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:r,value:o}=await this.getSignatureStatuses([t],e);qt(o.length===1);const i=o[0];return{context:r,value:i}}async getSignatureStatuses(t,e){const r=[t];e&&r.push(e);const o=await this._rpcRequest("getSignatureStatuses",r),i=Y(o,mh);if("error"in i)throw new st(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:r}=Nt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getTransactionCount",o),s=Y(i,mt(P()));if("error"in s)throw new st(s.error,"failed to get transaction count");return s.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getInflationGovernor",e),o=Y(r,Dl);if("error"in o)throw new st(o.error,"failed to get inflation");return o.result}async getInflationReward(t,e,r){const{commitment:o,config:i}=Nt(r),s=this._buildArgs([t.map(b=>b.toBase58())],o,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),c=await this._rpcRequest("getInflationReward",s),d=Y(c,Il);if("error"in d)throw new st(d.error,"failed to get inflation reward");return d.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=Y(t,zl);if("error"in e)throw new st(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:r}=Nt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getEpochInfo",o),s=Y(i,Hl);if("error"in s)throw new st(s.error,"failed to get epoch info");return s.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Y(t,Kl);if("error"in e)throw new st(e.error,"failed to get epoch schedule");const r=e.result;return new yl(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Y(t,Wl);if("error"in e)throw new st(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getMinimumBalanceForRentExemption",r),i=Y(o,wh);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const e=this._buildArgs([],t),r=await this._rpcRequest("getRecentBlockhash",e),o=Y(r,kh);if("error"in o)throw new st(o.error,"failed to get recent blockhash");return o.result}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),r=Y(e,Th);if("error"in r)throw new st(r.error,"failed to get recent performance samples");return r.result}async getFeeCalculatorForBlockhash(t,e){const r=this._buildArgs([t],e),o=await this._rpcRequest("getFeeCalculatorForBlockhash",r),i=Y(o,Ch);if("error"in i)throw new st(i.error,"failed to get fee calculator");const{context:s,value:c}=i.result;return{context:s,value:c!==null?c.feeCalculator:null}}async getFeeForMessage(t,e){const r=Ur(t.serialize()).toString("base64"),o=this._buildArgs([r],e),i=await this._rpcRequest("getFeeForMessage",o),s=Y(i,Kt(X(P())));if("error"in s)throw new st(s.error,"failed to get fee for message");if(s.result===null)throw new Error("invalid blockhash");return s.result}async getRecentPrioritizationFees(t){var s;const e=(s=t==null?void 0:t.lockedWritableAccounts)==null?void 0:s.map(c=>c.toBase58()),r=e!=null&&e.length?[e]:[],o=await this._rpcRequest("getRecentPrioritizationFees",r),i=Y(o,$l);if("error"in i)throw new st(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:r}=Nt(t),o=this._buildArgs([],e,void 0,r),i=await this._rpcRequest("getLatestBlockhash",o),s=Y(i,Mh);if("error"in s)throw new st(s.error,"failed to get latest blockhash");return s.result}async isBlockhashValid(t,e){const{commitment:r,config:o}=Nt(e),i=this._buildArgs([t],r,void 0,o),s=await this._rpcRequest("isBlockhashValid",i),c=Y(s,Rh);if("error"in c)throw new st(c.error,"failed to determine if the blockhash `"+t+"`is valid");return c.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Y(t,mt(Fl));if("error"in e)throw new st(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Y(t,mt(Z()));if("error"in e)throw new st(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:r,config:o}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,o),s=await this._rpcRequest("getBlock",i);try{switch(o==null?void 0:o.transactionDetails){case"accounts":{const c=Y(s,Sh);if("error"in c)throw c.error;return c.result}case"none":{const c=Y(s,Eh);if("error"in c)throw c.error;return c.result}default:{const c=Y(s,xh);if("error"in c)throw c.error;const{result:d}=c;return d?{...d,transactions:d.transactions.map(({transaction:b,meta:_,version:k})=>({meta:_,transaction:{...b,message:vi(k,b.message)},version:k}))}:null}}}catch(c){throw new st(c,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:r,config:o}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),s=await this._rpcRequest("getBlock",i);try{switch(o==null?void 0:o.transactionDetails){case"accounts":{const c=Y(s,Bh);if("error"in c)throw c.error;return c.result}case"none":{const c=Y(s,Ah);if("error"in c)throw c.error;return c.result}default:{const c=Y(s,_h);if("error"in c)throw c.error;return c.result}}}catch(c){throw new st(c,"failed to get block")}}async getBlockProduction(t){let e,r;if(typeof t=="string")r=t;else if(t){const{commitment:c,...d}=t;r=c,e=d}const o=this._buildArgs([],r,"base64",e),i=await this._rpcRequest("getBlockProduction",o),s=Y(i,Ol);if("error"in s)throw new st(s.error,"failed to get block production information");return s.result}async getTransaction(t,e){const{commitment:r,config:o}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],r,void 0,o),s=await this._rpcRequest("getTransaction",i),c=Y(s,xi);if("error"in c)throw new st(c.error,"failed to get transaction");const d=c.result;return d&&{...d,transaction:{...d.transaction,message:vi(d.version,d.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:r,config:o}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],r,"jsonParsed",o),s=await this._rpcRequest("getTransaction",i),c=Y(s,an);if("error"in c)throw new st(c.error,"failed to get transaction");return c.result}async getParsedTransactions(t,e){const{commitment:r,config:o}=Nt(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,"jsonParsed",o)}));return(await this._rpcBatchRequest(i)).map(d=>{const b=Y(d,an);if("error"in b)throw new st(b.error,"failed to get transactions");return b.result})}async getTransactions(t,e){const{commitment:r,config:o}=Nt(e),i=t.map(d=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([d],r,void 0,o)}));return(await this._rpcBatchRequest(i)).map(d=>{const b=Y(d,xi);if("error"in b)throw new st(b.error,"failed to get transactions");const _=b.result;return _&&{..._,transaction:{..._.transaction,message:vi(_.version,_.transaction.message)}}})}async getConfirmedBlock(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getConfirmedBlock",r),i=Y(o,Ih);if("error"in i)throw new st(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");const c={...s,transactions:s.transactions.map(({transaction:d,meta:b})=>{const _=new Qe(d.message);return{meta:b,transaction:{...d,message:_}}})};return{...c,transactions:c.transactions.map(({transaction:d,meta:b})=>({meta:b,transaction:or.populate(d.message,d.signatures)}))}}async getBlocks(t,e,r){const o=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],r),i=await this._rpcRequest("getBlocks",o),s=Y(i,mt(tt(P())));if("error"in s)throw new st(s.error,"failed to get blocks");return s.result}async getBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getBlock",r),i=Y(o,as);if("error"in i)throw new st(i.error,"failed to get block");const s=i.result;if(!s)throw new Error("Block "+t+" not found");return s}async getConfirmedBlockSignatures(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),o=await this._rpcRequest("getConfirmedBlock",r),i=Y(o,as);if("error"in i)throw new st(i.error,"failed to get confirmed block");const s=i.result;if(!s)throw new Error("Confirmed block "+t+" not found");return s}async getConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e),o=await this._rpcRequest("getConfirmedTransaction",r),i=Y(o,xi);if("error"in i)throw new st(i.error,"failed to get transaction");const s=i.result;if(!s)return s;const c=new Qe(s.transaction.message),d=s.transaction.signatures;return{...s,transaction:or.populate(c,d)}}async getParsedConfirmedTransaction(t,e){const r=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),o=await this._rpcRequest("getConfirmedTransaction",r),i=Y(o,an);if("error"in i)throw new st(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const r=t.map(s=>({methodName:"getConfirmedTransaction",args:this._buildArgsAtLeastConfirmed([s],e,"jsonParsed")}));return(await this._rpcBatchRequest(r)).map(s=>{const c=Y(s,an);if("error"in c)throw new st(c.error,"failed to get confirmed transactions");return c.result})}async getConfirmedSignaturesForAddress(t,e,r){let o={},i=await this.getFirstAvailableBlock();for(;!("until"in o)&&(e--,!(e<=0||e<i));)try{const d=await this.getConfirmedBlockSignatures(e,"finalized");d.signatures.length>0&&(o.until=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}let s=await this.getSlot("finalized");for(;!("before"in o)&&(r++,!(r>s));)try{const d=await this.getConfirmedBlockSignatures(r);d.signatures.length>0&&(o.before=d.signatures[d.signatures.length-1].toString())}catch(d){if(d instanceof Error&&d.message.includes("skipped"))continue;throw d}return(await this.getConfirmedSignaturesForAddress2(t,o)).map(d=>d.signature)}async getConfirmedSignaturesForAddress2(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",o),s=Y(i,rh);if("error"in s)throw new st(s.error,"failed to get confirmed signatures for address");return s.result}async getSignaturesForAddress(t,e,r){const o=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",o),s=Y(i,nh);if("error"in s)throw new st(s.error,"failed to get signatures for address");return s.result}async getAddressLookupTable(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let i=null;return o!==null&&(i=new is({key:t,state:is.deserialize(o.data)})),{context:r,value:i}}async getNonceAndContext(t,e){const{context:r,value:o}=await this.getAccountInfoAndContext(t,e);let i=null;return o!==null&&(i=fo.fromAccountData(o.data)),{context:r,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(r=>r.value).catch(r=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+r)})}async requestAirdrop(t,e){const r=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),o=Y(r,Uh);if("error"in o)throw new st(o.error,`airdrop to ${t.toBase58()} failed`);return o.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await Ir(100);const r=Date.now()-this._blockhashInfo.lastFetch>=Sl;if(this._blockhashInfo.latestBlockhash!==null&&!r)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,r=e?e.blockhash:null;for(let o=0;o<50;o++){const i=await this.getLatestBlockhash("finalized");if(r!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await Ir(al/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:r}=Nt(t),o=this._buildArgs([],e,"base64",r),i=await this._rpcRequest("getStakeMinimumDelegation",o),s=Y(i,Kt(P()));if("error"in s)throw new st(s.error,"failed to get stake minimum delegation");return s.result}async simulateTransaction(t,e,r){if("message"in t){const A=t.serialize(),I=dt.Buffer.from(A).toString("base64");if(Array.isArray(e)||r!==void 0)throw new Error("Invalid arguments");const T=e||{};T.encoding="base64","commitment"in T||(T.commitment=this.commitment);const z=[I,T],C=await this._rpcRequest("simulateTransaction",z),D=Y(C,os);if("error"in D)throw new Error("failed to simulate transaction: "+D.error.message);return D.result}let o;if(t instanceof or){let M=t;o=new or,o.feePayer=M.feePayer,o.instructions=t.instructions,o.nonceInfo=M.nonceInfo,o.signatures=M.signatures}else o=or.populate(t),o._message=o._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(o.nonceInfo&&i)o.sign(...i);else{let M=this._disableBlockhashCaching;for(;;){const A=await this._blockhashWithExpiryBlockHeight(M);if(o.lastValidBlockHeight=A.lastValidBlockHeight,o.recentBlockhash=A.blockhash,!i)break;if(o.sign(...i),!o.signature)throw new Error("!signature");const I=o.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(I)&&!this._blockhashInfo.transactionSignatures.includes(I)){this._blockhashInfo.simulatedSignatures.push(I);break}else M=!0}}const s=o._compile(),c=s.serialize(),b=o._serialize(c).toString("base64"),_={encoding:"base64",commitment:this.commitment};if(r){const M=(Array.isArray(r)?r:s.nonProgramIds()).map(A=>A.toBase58());_.accounts={encoding:"base64",addresses:M}}i&&(_.sigVerify=!0);const k=[b,_],U=await this._rpcRequest("simulateTransaction",k),R=Y(U,os);if("error"in R){let M;if("data"in R.error&&(M=R.error.data.logs,M&&Array.isArray(M))){const A=`
    `,I=A+M.join(A);console.error(R.error.message,I)}throw new rs("failed to simulate transaction: "+R.error.message,M)}return R.result}async sendTransaction(t,e,r){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const s=t.serialize();return await this.sendRawTransaction(s,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const o=e;if(t.nonceInfo)t.sign(...o);else{let s=this._disableBlockhashCaching;for(;;){const c=await this._blockhashWithExpiryBlockHeight(s);if(t.lastValidBlockHeight=c.lastValidBlockHeight,t.recentBlockhash=c.blockhash,t.sign(...o),!t.signature)throw new Error("!signature");const d=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(d))s=!0;else{this._blockhashInfo.transactionSignatures.push(d);break}}}const i=t.serialize();return await this.sendRawTransaction(i,r)}async sendRawTransaction(t,e){const r=Ur(t).toString("base64");return await this.sendEncodedTransaction(r,e)}async sendEncodedTransaction(t,e){const r={encoding:"base64"},o=e&&e.skipPreflight,i=e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(r.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(r.minContextSlot=e.minContextSlot),o&&(r.skipPreflight=o),i&&(r.preflightCommitment=i);const s=[t,r],c=await this._rpcRequest("sendTransaction",s),d=Y(c,Fh);if("error"in d){let b;throw"data"in d.error&&(b=d.error.data.logs),new rs("failed to send transaction: "+d.error.message,b)}return d.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,r])=>{this._setSubscription(e,{...r,state:"pending"})})}_setSubscription(t,e){var o;const r=(o=this._subscriptionsByHash[t])==null?void 0:o.state;if(this._subscriptionsByHash[t]=e,r!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(s=>{try{s(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const r=this._subscriptionHashByClientSubscriptionId[t];if(r==null)return()=>{};const o=(i=this._subscriptionStateChangeCallbacksByHash)[r]||(i[r]=new Set);return o.add(e),()=>{o.delete(e),o.size===0&&delete this._subscriptionStateChangeCallbacksByHash[r]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(r){r instanceof Error&&console.log(`Error when closing socket connection: ${r.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async r=>{const o=this._subscriptionsByHash[r];if(o!==void 0)switch(o.state){case"pending":case"unsubscribed":if(o.callbacks.size===0){delete this._subscriptionsByHash[r],o.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[o.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:s}=o;try{this._setSubscription(r,{...o,state:"subscribing"});const c=await this._rpcWebSocket.call(s,i);this._setSubscription(r,{...o,serverSubscriptionId:c,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[c]=o.callbacks,await this._updateSubscriptions()}catch(c){if(c instanceof Error&&console.error(`${s} error for argument`,i,c.message),!e())return;this._setSubscription(r,{...o,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":o.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:s}=o;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(r,{...o,state:"unsubscribing"}),this._setSubscription(r,{...o,state:"unsubscribing"});try{await this._rpcWebSocket.call(s,[i])}catch(c){if(c instanceof Error&&console.error(`${s} error:`,c.message),!e())return;this._setSubscription(r,{...o,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(r,{...o,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const r=this._subscriptionCallbacksByServerSubscriptionId[t];r!==void 0&&r.forEach(o=>{try{o(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:r}=Y(t,ih);this._handleServerNotification(r,[e.value,e.context])}_makeSubscription(t,e){const r=this._nextClientSubscriptionId++,o=es([t.method,e],!0),i=this._subscriptionsByHash[o];return i===void 0?this._subscriptionsByHash[o]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[r]=o,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete this._subscriptionHashByClientSubscriptionId[r];const s=this._subscriptionsByHash[o];qt(s!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${r}`),s.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),r}onAccountChange(t,e,r){const o=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64");return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:r}=Y(t,sh);this._handleServerNotification(r,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,r,o){const i=this._buildArgs([t.toBase58()],r||this._commitment||"finalized","base64",o?{filters:o}:void 0);return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,r){const o=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],r||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},o)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:r}=Y(t,Ph);this._handleServerNotification(r,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:r}=Y(t,ch);this._handleServerNotification(r,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:r}=Y(t,fh);this._handleServerNotification(r,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];r?await r():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,r,o){const i=e||this._commitment;if(i||r||o){let s={};r&&(s.encoding=r),i&&(s.commitment=i),o&&(s=Object.assign(s,o)),t.push(s)}return t}_buildArgsAtLeastConfirmed(t,e,r,o){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,r,o)}_wsOnSignatureNotification(t){const{result:e,subscription:r}=Y(t,lh);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,r){const o=this._buildArgs([t],r||this._commitment||"finalized"),i=this._makeSubscription({callback:(s,c)=>{if(s.type==="status"){e(s.result,c);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return i}onSignatureWithOptions(t,e,r){const{commitment:o,...i}={...r,commitment:r&&r.commitment||this._commitment||"finalized"},s=this._buildArgs([t],o,void 0,i),c=this._makeSubscription({callback:(d,b)=>{e(d,b);try{this.removeSignatureListener(c)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return c}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:r}=Y(t,hh);this._handleServerNotification(r,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:nt([at("instruction"),Fr("recentSlot"),At("bumpSeed")])},FreezeLookupTable:{index:1,layout:nt([at("instruction")])},ExtendLookupTable:{index:2,layout:nt([at("instruction"),Fr(),ve(xt(),gr(at(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:nt([at("instruction")])},CloseLookupTable:{index:4,layout:nt([at("instruction")])}});new ft("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:nt([At("instruction"),at("units"),at("additionalFee")])},RequestHeapFrame:{index:1,layout:nt([At("instruction"),at("bytes")])},SetComputeUnitLimit:{index:2,layout:nt([At("instruction"),at("units")])},SetComputeUnitPrice:{index:3,layout:nt([At("instruction"),Fr("microLamports")])}});new ft("ComputeBudget111111111111111111111111111111");nt([At("numSignatures"),At("padding"),Ue("signatureOffset"),Ue("signatureInstructionIndex"),Ue("publicKeyOffset"),Ue("publicKeyInstructionIndex"),Ue("messageDataOffset"),Ue("messageDataSize"),Ue("messageInstructionIndex")]);new ft("Ed25519SigVerify111111111111111111111111111");co.utils.isValidPrivateKey;co.getPublicKey;nt([At("numSignatures"),Ue("signatureOffset"),At("signatureInstructionIndex"),Ue("ethAddressOffset"),At("ethAddressInstructionIndex"),Ue("messageDataOffset"),Ue("messageDataSize"),At("messageInstructionIndex"),Ot(20,"ethAddress"),Ot(64,"signature"),At("recoveryId")]);new ft("KeccakSecp256k11111111111111111111111111111");var Oa;new ft("StakeConfig11111111111111111111111111111111");class Pa{constructor(t,e,r){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=r}}Oa=Pa;Pa.default=new Oa(0,0,ft.default);Object.freeze({Initialize:{index:0,layout:nt([at("instruction"),Qf(),tl()])},Authorize:{index:1,layout:nt([at("instruction"),xt("newAuthorized"),at("stakeAuthorizationType")])},Delegate:{index:2,layout:nt([at("instruction")])},Split:{index:3,layout:nt([at("instruction"),Ie("lamports")])},Withdraw:{index:4,layout:nt([at("instruction"),Ie("lamports")])},Deactivate:{index:5,layout:nt([at("instruction")])},Merge:{index:7,layout:nt([at("instruction")])},AuthorizeWithSeed:{index:8,layout:nt([at("instruction"),xt("newAuthorized"),at("stakeAuthorizationType"),kr("authoritySeed"),xt("authorityOwner")])}});new ft("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:nt([at("instruction"),el()])},Authorize:{index:1,layout:nt([at("instruction"),xt("newAuthorized"),at("voteAuthorizationType")])},Withdraw:{index:3,layout:nt([at("instruction"),Ie("lamports")])},AuthorizeWithSeed:{index:10,layout:nt([at("instruction"),rl()])}});new ft("Vote111111111111111111111111111111111111111");new ft("Va1idator1nfo111111111111111111111111111111");G({name:Z(),website:ct(Z()),details:ct(Z()),keybaseUsername:ct(Z())});new ft("Vote111111111111111111111111111111111111111");nt([xt("nodePubkey"),xt("authorizedWithdrawer"),At("commission"),he(),ve(nt([he("slot"),at("confirmationCount")]),gr(at(),-8),"votes"),At("rootSlotValid"),he("rootSlot"),he(),ve(nt([he("epoch"),xt("authorizedVoter")]),gr(at(),-8),"authorizedVoters"),nt([ve(nt([xt("authorizedPubkey"),he("epochOfLastAuthorizedSwitch"),he("targetEpoch")]),32,"buf"),he("idx"),At("isEmpty")],"priorVoters"),he(),ve(nt([he("epoch"),he("credits"),he("prevCredits")]),gr(at(),-8),"epochCredits"),nt([he("slot"),he("timestamp")],"lastTimestamp")]);const cs={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function fd(n,t){const e=t===!1?"http":"https";if(!n)return cs[e].devnet;const r=cs[e][n];if(!r)throw new Error(`Unknown ${e} cluster: ${n}`);return r}var qh=ao();const Dh=Pr(qh);class Le extends Error{constructor(t,e){super(t),this.error=e}}class zh extends Le{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class ld extends Le{constructor(){super(...arguments),this.name="WalletLoadError"}}class hd extends Le{constructor(){super(...arguments),this.name="WalletConfigError"}}class dd extends Le{constructor(){super(...arguments),this.name="WalletConnectionError"}}class pd extends Le{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class gd extends Le{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class yd extends Le{constructor(){super(...arguments),this.name="WalletAccountError"}}class md extends Le{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class Wr extends Le{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class wd extends Le{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class bd extends Le{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class vd extends Le{constructor(){super(...arguments),this.name="WalletSignMessageError"}}var Or;(function(n){n.Installed="Installed",n.NotDetected="NotDetected",n.Loadable="Loadable",n.Unsupported="Unsupported"})(Or||(Or={}));class xd extends Dh{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,r={}){const o=this.publicKey;if(!o)throw new Wr;return t.feePayer=t.feePayer||o,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot})).blockhash,t}}function Ed(n){if(typeof window>"u"||typeof document>"u")return;const t=[];function e(){if(n())for(const i of t)i()}const r=setInterval(e,1e3);t.push(()=>clearInterval(r)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",e,{once:!0}),t.push(()=>document.removeEventListener("DOMContentLoaded",e))),document.readyState!=="complete"&&(window.addEventListener("load",e,{once:!0}),t.push(()=>window.removeEventListener("load",e))),e()}function Sd(){if(!navigator)return!1;const n=navigator.userAgent.toLowerCase(),t=n.includes("iphone")||n.includes("ipad"),e=n.includes("safari");return t&&e}class Na extends Le{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}function $h(n,t=null){try{const e=localStorage.getItem(n);if(e)return JSON.parse(e)}catch(e){typeof window<"u"&&console.error(e)}return t}function Hh(n,t=null){try{t===null?localStorage.removeItem(n):localStorage.setItem(n,JSON.stringify(t))}catch(e){typeof window<"u"&&console.error(e)}}const Et=Gh();function Kh(n){const{onError:t,wallets:e}=xe(Et);e.forEach(({adapter:r})=>{r.on("readyStateChange",$a,r)}),n.on("connect",Da),n.on("disconnect",za),n.on("error",t)}async function Wh(){const{adapter:n}=xe(Et);try{Et.setConnecting(!0),await(n==null?void 0:n.connect())}catch{Et.resetWallet()}finally{Et.setConnecting(!1)}}async function jh(){const{connected:n,connecting:t,disconnecting:e,ready:r,adapter:o}=xe(Et);if(!(n||t||e)){if(!o)throw yr(new Na);if(!(r===Or.Installed||r===Or.Loadable))throw Et.resetWallet(),typeof window<"u"&&window.open(o.url,"_blank"),yr(new zh);try{Et.setConnecting(!0),await o.connect()}catch(i){throw Et.resetWallet(),i}finally{Et.setConnecting(!1)}}}function Gh(){const{subscribe:n,update:t}=Ui({autoConnect:!1,wallets:[],adapter:null,connected:!1,connecting:!1,disconnecting:!1,localStorageKey:"walletAdapter",onError:i=>console.error(i),publicKey:null,ready:"Unsupported",wallet:null,name:null,walletsByName:{},connect:jh,disconnect:qa,select:Vh,sendTransaction:Zh,signTransaction:void 0,signAllTransactions:void 0,signMessage:void 0});function e(i){o(i),t(s=>({...s,name:(i==null?void 0:i.name)||null,wallet:i,ready:(i==null?void 0:i.readyState)||"Unsupported",publicKey:(i==null?void 0:i.publicKey)||null,connected:(i==null?void 0:i.connected)||!1})),i&&Yh()&&Wh()}function r(i){var s;const{localStorageKey:c,walletsByName:d}=xe(Et),b=(s=d==null?void 0:d[i])!==null&&s!==void 0?s:null;Hh(c,i),e(b)}function o(i){Ha();let s,c,d;i&&("signTransaction"in i&&(s=async function(b){const{connected:_}=xe(Et);if(!_)throw yr(new Wr);return await i.signTransaction(b)}),"signAllTransactions"in i&&(c=async function(b){const{connected:_}=xe(Et);if(!_)throw yr(new Wr);return await i.signAllTransactions(b)}),"signMessage"in i&&(d=async function(b){const{connected:_}=xe(Et);if(!_)throw yr(new Wr);return await i.signMessage(b)}),Kh(i)),t(b=>({...b,adapter:i,signTransaction:s,signAllTransactions:c,signMessage:d}))}return{resetWallet:()=>r(null),setConnecting:i=>t(s=>({...s,connecting:i})),setDisconnecting:i=>t(s=>({...s,disconnecting:i})),setReady:i=>t(s=>({...s,ready:i})),subscribe:n,updateConfig:i=>t(s=>({...s,...i})),updateWallets:i=>t(s=>({...s,...i})),updateStatus:i=>t(s=>({...s,...i})),updateWallet:i=>r(i)}}async function qa(){const{disconnecting:n,adapter:t}=xe(Et);if(!n){if(!t)return Et.resetWallet();try{Et.setDisconnecting(!0),await t.disconnect()}finally{Et.resetWallet(),Et.setDisconnecting(!1)}}}async function _d({wallets:n,autoConnect:t=!1,localStorageKey:e="walletAdapter",onError:r=o=>console.error(o)}){const o=n.reduce((c,d)=>(c[d.name]=d,c),{}),i=n.map(c=>({adapter:c,readyState:c.readyState}));Et.updateConfig({wallets:i,walletsByName:o,autoConnect:t,localStorageKey:e,onError:r});const s=$h(e);s&&Et.updateWallet(s)}function yr(n){const{onError:t}=xe(Et);return t(n),n}function Da(){const{adapter:n}=xe(Et);n&&Et.updateStatus({publicKey:n.publicKey,connected:n.connected})}function za(){Et.resetWallet()}function $a(n){const{adapter:t,wallets:e}=xe(Et);if(!t)return;Et.setReady(t.readyState);const r=e.findIndex(({adapter:o})=>o.name===this.name);r!==-1&&Et.updateWallets([...e.slice(0,r),{...e[r],readyState:n},...e.slice(r+1)])}function Ha(){const{adapter:n,onError:t,wallets:e}=xe(Et);n&&(e.forEach(({adapter:r})=>{r.off("readyStateChange",$a,r)}),n.off("connect",Da),n.off("disconnect",za),n.off("error",t))}async function Vh(n){const{name:t,adapter:e}=xe(Et);t!==n&&(e&&await qa(),Et.updateWallet(n))}async function Zh(n,t,e){const{connected:r,adapter:o}=xe(Et);if(!r)throw yr(new Wr);if(!o)throw yr(new Na);return await o.sendTransaction(n,t,e)}function Yh(){const{adapter:n,autoConnect:t,ready:e,connected:r,connecting:o}=xe(Et);return!(!t||!n||!(e===Or.Installed||e===Or.Loadable)||r||o)}typeof window<"u"&&window.addEventListener("beforeunload",Ha);const Jh=Ui({type:"signin"});async function ur(n,t){const e=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return e.ok,e.json()}const Xh=[{name:"GPT 3.5",id:"asst_JDuAOrAyViXMVwMPEFyGlfPp",priceMultiplier:1},{name:"GPT 4",id:"asst_HuN786BrRzdGc5s7w7WGQLWe",priceMultiplier:45}],Bd=[{amount:.1,tokens:1e6,price:.011},{amount:.2,tokens:1e7,price:.11},{amount:1,tokens:1e8,price:1.1}],Ad=["Learn a new language.","Inquire about science and space.","Get movie recommendations.","Discuss travel tips and destinations.","Explore health and fitness advice.","Share cooking and recipe ideas.","Discover music and playlist suggestions.","Talk about fashion and style trends.","Find book and reading suggestions.","Learn about mindfulness and meditation.","Discuss pet care and advice.","Get help with homework and study.","Explore gardening and plant care.","Share DIY and crafting ideas.","Learn historical facts and trivia.","Ask about blockchain basics and concepts.","Learn about cryptocurrency trading and investments.","Discuss the technology behind Bitcoin and Ethereum.","Explore the future of decentralized finance (DeFi).","Understand smart contracts and their applications."],Id=["What can I help you with?","How can I help you?","What can I do for you?","What would you like to do?","What would you like to talk about?","What would you like to discuss?","How can I be of service?"],Qh=n=>new Promise(t=>setTimeout(t,n)),td={loading:!1,error:!1,data:null};function ed(){const{subscribe:n,set:t,update:e}=Ui(td);async function r(R){e(M=>({...M,loading:!0}));try{let M=await ur("/api/database/user/find",{pubkey:R});M.status!==200&&(Jh.set({type:"creating"}),M=await ur("/api/database/user/create",{pubkey:R})),e(A=>({...A,data:M.body}))}catch(M){console.error("Error fetching/creating user:",M),e(A=>({...A,error:!0}))}finally{e(M=>({...M,loading:!1}))}}async function o(R,M=2){try{await r(R)}catch(A){M>0?(await Qh(1500),o(R,M-1)):console.error("Final error after retries:",A)}}async function i(R,M,A){var I;try{const T=await ur("/api/database/conversations/create",{content:R,assistant:A}),z=new Date,C=(I=Xh.find(D=>D.id===A))==null?void 0:I.name;return e(D=>(D.data&&D.data.conversations.push({id:T.body,created:z,name:z.toLocaleString(),model:C||"GPT 3.5"}),D)),await d(M),T.body}catch(T){console.error("Error creating thread:",T)}}async function s(R,M){e(A=>{if(A.data){for(var I=0;I<A.data.conversations.length;I++)if(A.data.conversations[I].id===R){A.data.conversations.splice(I,1);break}}return A}),await d(M)}async function c(R,M,A){e(I=>{if(I.data){for(var T=0;T<I.data.conversations.length;T++)if(I.data.conversations[T].id===R){I.data.conversations[T].name=A;break}}return I}),await d(M)}async function d(R){try{await ur("/api/database/user/update",{pubkey:R,data:U().data})}catch(M){console.error("Error updating user conversations:",M)}}async function b(R){try{return(await ur("/api/openai/fetchConvo",{threadId:R})).body}catch(M){console.error("Error fetching conversation:",M)}}async function _(R,M){var A,I;try{e(T=>(T.data&&(T.data.credits+=M),T)),typeof((A=U().data)==null?void 0:A.credits)!="number"&&e(T=>(T.data&&(T.data.credits=0),T)),await ur("/api/database/user/update",{pubkey:(I=R.publicKey)==null?void 0:I.toBase58(),data:U().data})}catch(T){console.error("Error updating user conversations:",T)}}async function k(R,M){var A,I;try{e(T=>(T.data&&(T.data.credits-=M),T)),typeof((A=U().data)==null?void 0:A.credits)!="number"&&e(T=>(T.data&&(T.data.credits=0),T)),await ur("/api/database/user/update",{pubkey:(I=R.publicKey)==null?void 0:I.toBase58(),data:U().data})}catch(T){console.error("Error updating user conversations:",T)}}function U(){let R;return e(M=>R=M),R}return{subscribe:n,fetchUser:o,updateUserConversations:d,fetchConversation:b,buyCredits:_,spendCredits:k,createThread:i,deleteThread:s,editThread:c,get:U}}const kd=ed(),Md=()=>{const n=document.getElementById("signin_modal");n&&n.showModal()},Rd=()=>{const n=document.getElementById("signin_modal");n&&n.close()},Ld=()=>{const n=document.getElementById("pay_modal");n&&(n.showModal(),n.addEventListener("click",function(t){t.target===n&&rd()},{once:!0}))},rd=()=>{const n=document.getElementById("pay_modal");n&&n.close()};export{Le as A,xd as B,ud as C,vd as D,ld as E,hd as F,fd as G,Rd as H,ft as P,_a as V,wd as W,Jh as a,dt as b,mn as c,Xh as d,Md as e,Ld as f,Id as g,rd as h,Pr as i,_d as j,bd as k,Or as l,pd as m,md as n,Sd as o,ur as p,Ed as q,zh as r,Ad as s,Bd as t,kd as u,dd as v,Et as w,yd as x,gd as y,Wr as z};
