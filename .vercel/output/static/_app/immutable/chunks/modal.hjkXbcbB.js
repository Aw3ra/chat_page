import{s as C,e as p,c as m,b as g,f,p as u,i as _,h,n as x,k as Y,a as A,w as H,g as N,z as J,t as M,d as T,y as Q,l as G}from"./scheduler.BnSwxYe-.js";import{S as I,i as D,g as W,t as y,c as X,a as k,b as j,d as V,m as B,e as O}from"./index.ikIDff96.js";import{w as ee,C as te,p as le,V as se,b as ne,u as ie,h as ae,t as q,a as re}from"./modals.fz6RkjOm.js";function K(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}function R(n,e,l){const t=n.slice();return t[5]=e[l],t}function oe(n){let e,l,t='<div class="text-center"><h3 class="font-bold text-4xl inline-block">Buy credits</h3></div>',i,d,r=K(q),a=[];for(let s=0;s<r.length;s+=1)a[s]=U(R(n,r,s));return{c(){e=p("div"),l=p("div"),l.innerHTML=t,i=A(),d=p("div");for(let s=0;s<a.length;s+=1)a[s].c();this.h()},l(s){e=m(s,"DIV",{class:!0});var c=g(e);l=m(c,"DIV",{class:!0,"data-svelte-h":!0}),H(l)!=="svelte-tml862"&&(l.innerHTML=t),i=N(c),d=m(c,"DIV",{class:!0});var o=g(d);for(let v=0;v<a.length;v+=1)a[v].l(o);o.forEach(f),c.forEach(f),this.h()},h(){u(l,"class","flex flex-row pb-2 justify-center"),u(d,"class","flex flex-row justify-center gap-2"),u(e,"class","flex flex-col gap-2 flex-wrap text-center")},m(s,c){_(s,e,c),h(e,l),h(e,i),h(e,d);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(d,null)},p(s,c){if(c&2){r=K(q);let o;for(o=0;o<r.length;o+=1){const v=R(s,r,o);a[o]?a[o].p(v,c):(a[o]=U(v),a[o].c(),a[o].m(d,null))}for(;o<a.length;o+=1)a[o].d(1);a.length=r.length}},d(s){s&&f(e),J(a,s)}}}function ce(n){let e,l='<div class="flex flex-row pb-2 justify-center"><div class="text-center"><h3 class="font-bold text-4xl inline-block">Processing...</h3></div></div> <div class="flex flex-row justify-center gap-2"><div class="flex flex-col justify-center items-center rounded-2xl p-2"><h3 class="text-2xl font-semibold">Please wait</h3> <p class="text-sm">Your transaction is being processed</p></div></div>';return{c(){e=p("div"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIV",{class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1svoiho"&&(e.innerHTML=l),this.h()},h(){u(e,"class","flex flex-col gap-2 flex-wrap text-center")},m(t,i){_(t,e,i)},p:x,d(t){t&&f(e)}}}function U(n){let e,l,t,i,d=fe(n[5].tokens)+"",r,a,s,c,o=n[5].price.toFixed(3)+"",v,$,L,P,F;function Z(){return n[2](n[5])}return{c(){e=p("button"),l=p("div"),t=p("h3"),i=M("+"),r=M(d),a=M(" tokens"),s=A(),c=p("p"),v=M(o),$=M(" SOL"),L=A(),this.h()},l(b){e=m(b,"BUTTON",{class:!0});var w=g(e);l=m(w,"DIV",{class:!0});var S=g(l);t=m(S,"H3",{class:!0});var E=g(t);i=T(E,"+"),r=T(E,d),a=T(E," tokens"),E.forEach(f),s=N(S),c=m(S,"P",{class:!0});var z=g(c);v=T(z,o),$=T(z," SOL"),z.forEach(f),S.forEach(f),L=N(w),w.forEach(f),this.h()},h(){u(t,"class","text-2xl font-semibold"),u(c,"class","text-sm"),u(l,"class","flex flex-col justify-center items-center rounded-2xl p-2"),u(e,"class","button")},m(b,w){_(b,e,w),h(e,l),h(l,t),h(t,i),h(t,r),h(t,a),h(l,s),h(l,c),h(c,v),h(c,$),h(e,L),P||(F=Q(e,"click",Z),P=!0)},p(b,w){n=b},d(b){b&&f(e),P=!1,F()}}}function de(n){let e,l,t;function i(a,s){return a[0]?ce:oe}let d=i(n),r=d(n);return{c(){e=p("dialog"),l=p("div"),t=p("div"),r.c(),this.h()},l(a){e=m(a,"DIALOG",{id:!0,class:!0});var s=g(e);l=m(s,"DIV",{class:!0});var c=g(l);t=m(c,"DIV",{});var o=g(t);r.l(o),o.forEach(f),c.forEach(f),s.forEach(f),this.h()},h(){u(l,"class","modal-box"),u(e,"id","pay_modal"),u(e,"class","modal")},m(a,s){_(a,e,s),h(e,l),h(l,t),r.m(t,null)},p(a,[s]){d===(d=i(a))&&r?r.p(a,s):(r.d(1),r=d(a),r&&(r.c(),r.m(t,null)))},i:x,o:x,d(a){a&&f(e),r.d()}}}function fe(n){return n>=1e9?(n/1e9).toFixed(0)+"B":n>=1e6?(n/1e6).toFixed(0)+"M":n}function ue(n,e,l){let t;Y(n,ee,s=>l(3,t=s));let i=!1;const d=new te("https://api.devnet.solana.com");async function r(s,c=0){const o=await le("/api/solana/create-transaction",{amount:s,from:t.publicKey.toBase58()}),v=se.deserialize(ne.Buffer.from(o.serialized,"base64"));try{let $=await t.sendTransaction(v,d);l(0,i=!0),await new Promise(L=>setTimeout(L,5e3)),await ie.buyCredits(t,c)}catch($){console.log($)}finally{ae(),l(0,i=!1)}}return[i,r,async s=>await r(s.price,s.tokens)]}class he extends I{constructor(e){super(),D(this,e,ue,de,C,{})}}function pe(n){let e,l='<div class="modal-box"><div class="flex gap-4 flex-wrap text-center"><div><div class="flex flex-row pb-2 justify-center"><div class="text-center"><h3 class="font-bold text-4xl inline-block">Sign here</h3></div> <svg class="w-12 h-12 bounce" viewBox="0 0 24 24"><path fill="currentColor" d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></svg></div> <p class="text-sm font-semibold">Sign the following message to prove you own this wallet.</p></div></div></div>';return{c(){e=p("dialog"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIALOG",{id:!0,class:!0,"data-svelte-h":!0}),H(e)!=="svelte-16dt6j6"&&(e.innerHTML=l),this.h()},h(){u(e,"id","signin_modal"),u(e,"class","modal")},m(t,i){_(t,e,i)},p:x,i:x,o:x,d(t){t&&f(e)}}}class me extends I{constructor(e){super(),D(this,e,null,pe,C,{})}}function ve(n){let e,l='<div class="modal-box"><div class="flex gap-4 flex-wrap"><div class=""><button class="btn btn-ghost loading"></button></div> <div><h3 class="font-bold text-lg">Signing In...</h3> <p class="text-sm">Sign the following message to prove you own this wallet.</p></div></div></div>';return{c(){e=p("dialog"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIALOG",{id:!0,class:!0,"data-svelte-h":!0}),H(e)!=="svelte-ae026x"&&(e.innerHTML=l),this.h()},h(){u(e,"id","signin_modal"),u(e,"class","modal bg-slate-100 rounded-2xl p-2")},m(t,i){_(t,e,i)},p:x,i:x,o:x,d(t){t&&f(e)}}}class xe extends I{constructor(e){super(),D(this,e,null,ve,C,{})}}function ge(n){let e,l='<div class="modal-box"><div class="flex gap-4 flex-wrap text-center"><div><div class="flex flex-row pb-2 justify-center"><div class="text-center"><h3 class="font-bold text-4xl inline-block">Creating your account</h3></div> <svg class="w-12 h-12 bounce" viewBox="0 0 24 24"><path fill="currentColor" d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path></svg></div> <p class="text-sm font-semibold">Please wait a second.</p></div></div></div>';return{c(){e=p("dialog"),e.innerHTML=l,this.h()},l(t){e=m(t,"DIALOG",{id:!0,class:!0,"data-svelte-h":!0}),H(e)!=="svelte-1w7a9ez"&&(e.innerHTML=l),this.h()},h(){u(e,"id","signin_modal"),u(e,"class","modal")},m(t,i){_(t,e,i)},p:x,i:x,o:x,d(t){t&&f(e)}}}class _e extends I{constructor(e){super(),D(this,e,null,ge,C,{})}}function be(n){let e,l;return e=new _e({}),{c(){j(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function $e(n){let e,l;return e=new xe({}),{c(){j(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function we(n){let e,l;return e=new me({}),{c(){j(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function ye(n){let e,l;return e=new he({}),{c(){j(e.$$.fragment)},l(t){V(e.$$.fragment,t)},m(t,i){B(e,t,i),l=!0},i(t){l||(k(e.$$.fragment,t),l=!0)},o(t){y(e.$$.fragment,t),l=!1},d(t){O(e,t)}}}function ke(n){let e,l,t,i;const d=[ye,we,$e,be],r=[];function a(s,c){return s[0].type==="pay"?0:s[0].type==="signin"?1:s[0].type==="editName"?2:s[0].type==="creating"?3:-1}return~(e=a(n))&&(l=r[e]=d[e](n)),{c(){l&&l.c(),t=G()},l(s){l&&l.l(s),t=G()},m(s,c){~e&&r[e].m(s,c),_(s,t,c),i=!0},p(s,[c]){let o=e;e=a(s),e!==o&&(l&&(W(),y(r[o],1,1,()=>{r[o]=null}),X()),~e?(l=r[e],l||(l=r[e]=d[e](s),l.c()),k(l,1),l.m(t.parentNode,t)):l=null)},i(s){i||(k(l),i=!0)},o(s){y(l),i=!1},d(s){s&&f(t),~e&&r[e].d(s)}}}function Le(n,e,l){let t;return Y(n,re,i=>l(0,t=i)),[t]}class He extends I{constructor(e){super(),D(this,e,Le,ke,C,{})}}export{He as M,K as e};
